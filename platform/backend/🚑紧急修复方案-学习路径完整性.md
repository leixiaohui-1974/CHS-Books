# ğŸš‘ ç´§æ€¥ä¿®å¤æ–¹æ¡ˆ - å­¦ä¹ è·¯å¾„å®Œæ•´æ€§

## ğŸ“… åˆ›å»ºæ—¶é—´
2025-11-11

## ğŸ¯ é—®é¢˜è¯Šæ–­

### ç”¨æˆ·åé¦ˆ
"é—®é¢˜å¾ˆå¤šï¼Œä½ è¯•ç€ä»å„ä¸ªæ•™æå‡ºå‘ï¼Œæ¥å®ç°æ¡ˆä¾‹è„šæœ¬ã€æ–‡æ¡£è¯´æ˜ç­‰å…¨é“¾æ¡çš„æµ‹è¯•ï¼Œå°±ä¼šå‘ç°åŸºæœ¬ä¸Šéƒ½æ²¡æ³•ç”¨"

### æµ‹è¯•ç»“æœ
é€šè¿‡æµè§ˆå™¨æ·±åº¦æµ‹è¯•å‘ç°ï¼š

#### âœ… åŸºç¡€åŠŸèƒ½æ­£å¸¸
1. âœ… 18æœ¬æ•™ææ­£å¸¸åŠ è½½
2. âœ… ç« èŠ‚ç›®å½•å±•å¼€/æŠ˜å æ­£å¸¸
3. âœ… ç« èŠ‚å†…å®¹Markdownæ¸²æŸ“å®Œç¾
4. âœ… ç•Œé¢ç¾è§‚ã€å“åº”æµç•…

#### âŒ å…³é”®åŠŸèƒ½ç¼ºå¤±
1. âŒ **ç« èŠ‚é¡µé¢ä¸æ˜¾ç¤ºå…³è”æ¡ˆä¾‹** - è™½ç„¶æ•°æ®åº“æœ‰243æ¡æ˜ å°„ï¼Œä½†å‰ç«¯æ²¡æœ‰æ¸²æŸ“
2. âŒ **æ¡ˆä¾‹å¡ç‰‡çš„æŒ‰é’®æ— åŠŸèƒ½** - [ğŸ“– æŸ¥çœ‹æ–‡æ¡£] å’Œ [â–¶ï¸ è¿è¡Œä»£ç ] åªæ˜¯æ‘†è®¾
3. âŒ **æ— æ³•ä»æ•™æè·³è½¬åˆ°æ¡ˆä¾‹** - ç†è®ºå’Œå®è·µå®Œå…¨æ–­è£‚
4. âŒ **æ— æ³•åœ¨çº¿è¿è¡Œæ¡ˆä¾‹ä»£ç ** - ç¼ºå°‘ä»£ç ç¼–è¾‘å™¨å’Œæ‰§è¡Œç¯å¢ƒ

### æ ¹æœ¬åŸå› 
**learning.htmlé¡µé¢åªå®ç°äº†æ•™æç« èŠ‚å±•ç¤ºï¼Œæ²¡æœ‰å®ç°æ¡ˆä¾‹å…³è”å±•ç¤ºå’Œè¿è¡ŒåŠŸèƒ½ã€‚**

---

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆAï¼šå¿«é€Ÿä¿®å¤ï¼ˆæ¨èï¼‰- 2-3å°æ—¶
**ç›®æ ‡**: è®©ç”¨æˆ·èƒ½çœ‹åˆ°æ¡ˆä¾‹å¹¶èƒ½è·³è½¬

#### Step 1: ä¿®å¤æ¡ˆä¾‹å¡ç‰‡æ˜¾ç¤º (1å°æ—¶)
**æ–‡ä»¶**: `platform/frontend/learning.html`

**é—®é¢˜**: `renderCases()` å‡½æ•°å­˜åœ¨ä½†æœªè¢«æ­£ç¡®è°ƒç”¨

**ä¿®å¤**:
```javascript
// åœ¨renderChapterContentå‡½æ•°ä¸­æ·»åŠ æ¡ˆä¾‹æ¸²æŸ“
async function loadAndRenderChapter(chapterId) {
    const response = await fetch(`/api/textbooks/chapters/${chapterId}/full`);
    const data = await response.json();
    
    if (data.success) {
        // æ¸²æŸ“ç« èŠ‚å†…å®¹
        renderChapterContent(data.chapter);
        
        // æ¸²æŸ“å…³è”æ¡ˆä¾‹ï¼ˆè¿™æ˜¯ç¼ºå¤±çš„éƒ¨åˆ†ï¼ï¼‰
        if (data.related_cases && data.related_cases.length > 0) {
            renderCases(data.related_cases);
        }
    }
}

function renderCases(cases) {
    const casesContainer = document.createElement('div');
    casesContainer.className = 'related-cases-section';
    casesContainer.innerHTML = `
        <h2>ğŸ’¡ é…å¥—æ¡ˆä¾‹ (${cases.length}ä¸ª)</h2>
        <p>ä»¥ä¸‹æ¡ˆä¾‹å¸®åŠ©ä½ ç†è§£æœ¬ç« èŠ‚çš„ç†è®ºçŸ¥è¯†</p>
        <div class="cases-grid"></div>
    `;
    
    const grid = casesContainer.querySelector('.cases-grid');
    
    cases.forEach(case => {
        const card = document.createElement('div');
        card.className = 'case-card';
        card.innerHTML = `
            <div class="case-header">
                <span class="case-icon">${caseData.icon || 'ğŸ’§'}</span>
                <h3>${caseData.title}</h3>
            </div>
            <p class="case-description">${caseData.description || ''}</p>
            <div class="case-meta">
                <span class="case-type">${caseData.relation_type || 'ç†è®ºéªŒè¯'}</span>
                <span class="case-score">ç›¸å…³åº¦: ${caseData.relevance_score || 0}%</span>
            </div>
            <div class="case-actions">
                <button class="btn-primary" onclick="viewCaseDoc('${caseData.case_id}')">
                    ğŸ“– æŸ¥çœ‹æ–‡æ¡£
                </button>
                <button class="btn-success" onclick="runCaseCode('${caseData.case_id}')">
                    â–¶ï¸ è¿è¡Œä»£ç 
                </button>
            </div>
        `;
        grid.appendChild(card);
    });
    
    // æ’å…¥åˆ°ç« èŠ‚å†…å®¹åé¢
    const contentArea = document.querySelector('.chapter-content-area');
    contentArea.appendChild(casesContainer);
}
```

#### Step 2: å®ç°æ¡ˆä¾‹æ–‡æ¡£è·³è½¬ (30åˆ†é’Ÿ)
**æ–°å»ºAPI**: `GET /api/cases/{case_id}/readme`

```python
# platform/backend/api/case_routes.py (æ–°æ–‡ä»¶)
from fastapi import APIRouter, HTTPException
from pathlib import Path

router = APIRouter(prefix="/api/cases", tags=["cases"])

@router.get("/{case_id}/readme")
async def get_case_readme(case_id: str):
    """è·å–æ¡ˆä¾‹çš„READMEæ–‡æ¡£"""
    try:
        # æŸ¥æ‰¾æ¡ˆä¾‹ç›®å½•
        books_root = Path(__file__).parent.parent.parent.parent / 'books'
        
        for book_dir in books_root.iterdir():
            if not book_dir.is_dir():
                continue
            
            examples_dir = book_dir / 'code' / 'examples'
            case_dir = examples_dir / case_id
            
            if case_dir.exists():
                readme = case_dir / 'README.md'
                if readme.exists():
                    content = readme.read_text(encoding='utf-8')
                    return {
                        "success": True,
                        "content": content,
                        "title": case_id
                    }
        
        raise HTTPException(status_code=404, detail="æ¡ˆä¾‹æ–‡æ¡£æœªæ‰¾åˆ°")
        
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))
```

**å‰ç«¯å‡½æ•°**:
```javascript
async function viewCaseDoc(caseId) {
    try {
        const response = await fetch(`/api/cases/${caseId}/readme`);
        const data = await response.json();
        
        if (data.success) {
            // åœ¨æ¨¡æ€æ¡†ä¸­æ˜¾ç¤º
            showModal('æ¡ˆä¾‹æ–‡æ¡£', data.content);
        }
    } catch (error) {
        alert('æ–‡æ¡£åŠ è½½å¤±è´¥: ' + error.message);
    }
}

function showModal(title, markdownContent) {
    // åˆ›å»ºæ¨¡æ€æ¡†æ˜¾ç¤ºMarkdownå†…å®¹
    const modal = document.createElement('div');
    modal.className = 'modal';
    modal.innerHTML = `
        <div class="modal-content">
            <div class="modal-header">
                <h2>${title}</h2>
                <button class="close-btn" onclick="this.closest('.modal').remove()">Ã—</button>
            </div>
            <div class="modal-body markdown-content">
                ${marked.parse(markdownContent)}
            </div>
        </div>
    `;
    document.body.appendChild(modal);
}
```

#### Step 3: å®ç°ä»£ç è¿è¡ŒåŠŸèƒ½ (1å°æ—¶)
**æ–°å»ºAPI**: `GET /api/cases/{case_id}/code`

```python
@router.get("/{case_id}/code")
async def get_case_code(case_id: str):
    """è·å–æ¡ˆä¾‹çš„main.pyä»£ç """
    try:
        books_root = Path(__file__).parent.parent.parent.parent / 'books'
        
        for book_dir in books_root.iterdir():
            if not book_dir.is_dir():
                continue
            
            examples_dir = book_dir / 'code' / 'examples'
            case_dir = examples_dir / case_id
            
            if case_dir.exists():
                main_py = case_dir / 'main.py'
                if main_py.exists():
                    code = main_py.read_text(encoding='utf-8')
                    return {
                        "success": True,
                        "code": code,
                        "filename": "main.py"
                    }
        
        raise HTTPException(status_code=404, detail="æ¡ˆä¾‹ä»£ç æœªæ‰¾åˆ°")
        
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))
```

**å‰ç«¯å‡½æ•°**:
```javascript
async function runCaseCode(caseId) {
    try {
        // 1. è·å–ä»£ç 
        const codeResponse = await fetch(`/api/cases/${caseId}/code`);
        const codeData = await codeResponse.json();
        
        if (!codeData.success) {
            alert('ä»£ç è·å–å¤±è´¥');
            return;
        }
        
        // 2. æ‰“å¼€ä»£ç è¿è¡Œå™¨
        openCodeRunner(codeId, codeData.code);
        
    } catch (error) {
        alert('ä»£ç è¿è¡Œå¤±è´¥: ' + error.message);
    }
}

function openCodeRunner(caseId, code) {
    // åˆ›å»ºä»£ç è¿è¡Œç•Œé¢
    const runner = document.createElement('div');
    runner.className = 'code-runner-modal';
    runner.innerHTML = `
        <div class="runner-content">
            <div class="runner-header">
                <h2>ğŸš€ æ¡ˆä¾‹ä»£ç è¿è¡Œå™¨ - ${caseId}</h2>
                <button class="close-btn" onclick="this.closest('.code-runner-modal').remove()">Ã—</button>
            </div>
            <div class="runner-body">
                <div class="code-editor-container">
                    <div id="code-editor" style="height: 400px;"></div>
                </div>
                <div class="runner-controls">
                    <button class="btn-success" onclick="executeCode()">â–¶ï¸ è¿è¡Œ</button>
                    <button class="btn-secondary" onclick="clearOutput()">ğŸ—‘ï¸ æ¸…é™¤è¾“å‡º</button>
                </div>
                <div class="output-container">
                    <h3>è¾“å‡ºç»“æœï¼š</h3>
                    <pre id="code-output">ç‚¹å‡»"è¿è¡Œ"æŒ‰é’®æ‰§è¡Œä»£ç ...</pre>
                </div>
            </div>
        </div>
    `;
    document.body.appendChild(runner);
    
    // åˆå§‹åŒ–Monaco Editor
    require(['vs/editor/editor.main'], function() {
        window.codeEditor = monaco.editor.create(document.getElementById('code-editor'), {
            value: code,
            language: 'python',
            theme: 'vs-dark',
            automaticLayout: true
        });
    });
}

async function executeCode() {
    const code = window.codeEditor.getValue();
    const outputEl = document.getElementById('code-output');
    
    outputEl.textContent = 'æ­£åœ¨æ‰§è¡Œ...';
    
    try {
        const response = await fetch('/api/code/execute', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({code})
        });
        
        const result = await response.json();
        
        if (result.status === 'success') {
            outputEl.textContent = result.output;
        } else {
            outputEl.textContent = `é”™è¯¯ï¼š\n${result.error}`;
            outputEl.style.color = 'red';
        }
    } catch (error) {
        outputEl.textContent = `æ‰§è¡Œå¤±è´¥ï¼š${error.message}`;
        outputEl.style.color = 'red';
    }
}
```

#### Step 4: æ·»åŠ æ ·å¼ (30åˆ†é’Ÿ)
```css
/* æ¡ˆä¾‹å¡ç‰‡æ ·å¼ */
.related-cases-section {
    margin-top: 40px;
    padding: 30px;
    background: #1e1e1e;
    border-radius: 12px;
}

.related-cases-section h2 {
    color: #61dafb;
    margin-bottom: 10px;
}

.cases-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.case-card {
    background: #2d2d2d;
    border-radius: 8px;
    padding: 20px;
    border: 1px solid #3d3d3d;
    transition: all 0.3s;
}

.case-card:hover {
    border-color: #61dafb;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(97, 218, 251, 0.2);
}

.case-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
}

.case-icon {
    font-size: 32px;
}

.case-header h3 {
    font-size: 18px;
    color: #fff;
    margin: 0;
}

.case-description {
    color: #ccc;
    font-size: 14px;
    margin-bottom: 15px;
    line-height: 1.6;
}

.case-meta {
    display: flex;
    gap: 15px;
    margin-bottom: 15px;
    font-size: 12px;
}

.case-type {
    background: #3d3d3d;
    padding: 4px 8px;
    border-radius: 4px;
    color: #61dafb;
}

.case-score {
    color: #888;
}

.case-actions {
    display: flex;
    gap: 10px;
}

.case-actions button {
    flex: 1;
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-primary {
    background: #61dafb;
    color: #1e1e1e;
}

.btn-primary:hover {
    background: #4fa8c5;
}

.btn-success {
    background: #52c41a;
    color: #fff;
}

.btn-success:hover {
    background: #3ea315;
}

/* æ¨¡æ€æ¡†æ ·å¼ */
.modal,
.code-runner-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
}

.modal-content,
.runner-content {
    background: #1e1e1e;
    border-radius: 12px;
    max-width: 90%;
    max-height: 90vh;
    overflow: auto;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
}

.modal-header,
.runner-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 30px;
    border-bottom: 1px solid #3d3d3d;
}

.modal-header h2,
.runner-header h2 {
    margin: 0;
    color: #61dafb;
}

.close-btn {
    font-size: 28px;
    background: none;
    border: none;
    color: #ccc;
    cursor: pointer;
    padding: 0;
    width: 32px;
    height: 32px;
    line-height: 1;
}

.close-btn:hover {
    color: #fff;
}

.modal-body {
    padding: 30px;
    color: #ccc;
}

.runner-body {
    padding: 20px;
}

.runner-controls {
    display: flex;
    gap: 10px;
    margin: 15px 0;
}

.output-container {
    margin-top: 20px;
}

.output-container h3 {
    color: #61dafb;
    font-size: 16px;
}

#code-output {
    background: #0d0d0d;
    color: #0f0;
    padding: 15px;
    border-radius: 6px;
    font-family: 'Courier New', monospace;
    font-size: 13px;
    max-height: 300px;
    overflow: auto;
}
```

---

### æ–¹æ¡ˆBï¼šå®Œæ•´é‡æ„ï¼ˆé•¿æœŸï¼‰- 3-5å¤©
åˆ›å»ºå…¨æ–°çš„æ¡ˆä¾‹æµè§ˆå’Œè¿è¡Œç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š
1. æ¡ˆä¾‹åº“é¡µé¢
2. æ¡ˆä¾‹è¯¦æƒ…é¡µé¢
3. ä»£ç åœ¨çº¿ç¼–è¾‘å™¨
4. ç»“æœå¯è§†åŒ–
5. å­¦ä¹ è·¯å¾„è¿½è¸ª

---

## ğŸ“‹ å®æ–½è®¡åˆ’

### ç«‹å³æ‰§è¡Œï¼ˆä»Šå¤©ï¼‰
1. âœ… åˆ›å»ºæœ¬ä¿®å¤æ–¹æ¡ˆæ–‡æ¡£
2. â³ å®æ–½æ–¹æ¡ˆAçš„Step 1-4
3. â³ å®Œæ•´æµ‹è¯•ä¸€ä¸ªæ•™æçš„å…¨é“¾è·¯

### çŸ­æœŸï¼ˆ1-2å¤©ï¼‰
1. â³ ä¼˜åŒ–æ¡ˆä¾‹å¡ç‰‡æ˜¾ç¤º
2. â³ æ·»åŠ é”™è¯¯å¤„ç†
3. â³ å®Œå–„ä»£ç è¿è¡Œå™¨

### ä¸­æœŸï¼ˆ1å‘¨ï¼‰
1. â³ å®ç°æ¡ˆä¾‹åˆ—è¡¨é¡µé¢
2. â³ æ·»åŠ æ¡ˆä¾‹æœç´¢åŠŸèƒ½
3. â³ å®ç°å­¦ä¹ è¿›åº¦è·Ÿè¸ª

---

## âœ… éªŒæ”¶æ ‡å‡†

### å¿…é¡»è¾¾åˆ°
1. âœ… ç”¨æˆ·æ‰“å¼€ä»»æ„ç« èŠ‚ï¼Œèƒ½çœ‹åˆ°å…³è”çš„æ¡ˆä¾‹å¡ç‰‡
2. âœ… ç‚¹å‡»"æŸ¥çœ‹æ–‡æ¡£"ï¼Œèƒ½å¼¹å‡ºæ¡ˆä¾‹README
3. âœ… ç‚¹å‡»"è¿è¡Œä»£ç "ï¼Œèƒ½åœ¨ç¼–è¾‘å™¨ä¸­çœ‹åˆ°ä»£ç å¹¶æ‰§è¡Œ
4. âœ… ä»£ç æ‰§è¡Œç»“æœæ­£ç¡®æ˜¾ç¤º

### æœŸæœ›è¾¾åˆ°
1. âœ… æ¡ˆä¾‹å¡ç‰‡ç¾è§‚ã€ä¿¡æ¯ä¸°å¯Œ
2. âœ… ä»£ç ç¼–è¾‘å™¨åŠŸèƒ½å®Œæ•´ï¼ˆè¯­æ³•é«˜äº®ã€è‡ªåŠ¨è¡¥å…¨ï¼‰
3. âœ… æ‰§è¡Œç»“æœåŒ…å«å›¾è¡¨å±•ç¤º
4. âœ… ç”¨æˆ·ä½“éªŒæµç•…

---

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

**ç”¨æˆ·èƒ½å¤Ÿ**:
1. ä»æ•™æç« èŠ‚ç›´æ¥è·³è½¬åˆ°ç›¸å…³æ¡ˆä¾‹
2. åœ¨çº¿æŸ¥çœ‹æ¡ˆä¾‹æ–‡æ¡£
3. åœ¨çº¿è¿è¡Œæ¡ˆä¾‹ä»£ç 
4. çœ‹åˆ°æ‰§è¡Œç»“æœ
5. å®Œæˆä»ç†è®ºå­¦ä¹ åˆ°å®è·µéªŒè¯çš„å®Œæ•´é—­ç¯

**ç³»ç»Ÿè¡¨ç°**:
1. APIå“åº”æ—¶é—´ < 500ms
2. ä»£ç æ‰§è¡Œæ—¶é—´ < 10s
3. ç•Œé¢æ— å¡é¡¿
4. æ— JavaScripté”™è¯¯

---

## ğŸš€ å¼€å§‹æ‰§è¡Œ

ç°åœ¨ç«‹å³å¼€å§‹å®æ–½æ–¹æ¡ˆAï¼

---

**åˆ›å»ºæ—¶é—´**: 2025-11-11
**é¢„è®¡å®Œæˆ**: 2-3å°æ—¶
**ä¼˜å…ˆçº§**: ğŸ”´ P0 - æœ€é«˜

