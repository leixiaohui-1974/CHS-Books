# ğŸ”§ Platformå¹³å°æ•…éšœæ’æŸ¥æŒ‡å—

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¥æœŸ**: 2025-11-12  
**é€‚ç”¨ç‰ˆæœ¬**: Platform 1.0.0+

---

## ğŸ“‹ ç›®å½•

- [å¿«é€Ÿè¯Šæ–­](#å¿«é€Ÿè¯Šæ–­)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [æœåŠ¡é—®é¢˜](#æœåŠ¡é—®é¢˜)
- [æ•°æ®åº“é—®é¢˜](#æ•°æ®åº“é—®é¢˜)
- [æ€§èƒ½é—®é¢˜](#æ€§èƒ½é—®é¢˜)
- [å®‰å…¨é—®é¢˜](#å®‰å…¨é—®é¢˜)

---

## ğŸš¨ å¿«é€Ÿè¯Šæ–­

### ç³»ç»Ÿå¥åº·æ£€æŸ¥æ¸…å•

```bash
# 1. æ£€æŸ¥å‰ç«¯æœåŠ¡
curl -I http://localhost:8080
# æœŸæœ›: HTTP/1.1 200 OK

# 2. æ£€æŸ¥åç«¯æœåŠ¡
curl http://localhost:8000/health
# æœŸæœ›: {"status":"healthy"}

# 3. æ£€æŸ¥æ•°æ®åº“
psql -h localhost -U platform -d platform_db -c "SELECT 1;"
# æœŸæœ›: è¿”å› 1

# 4. æ£€æŸ¥Redis
redis-cli ping
# æœŸæœ›: PONG

# 5. æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h
# æœŸæœ›: ä½¿ç”¨ç‡ < 80%

# 6. æ£€æŸ¥å†…å­˜
free -h
# æœŸæœ›: å¯ç”¨å†…å­˜ > 1GB

# 7. æ£€æŸ¥CPU
top -bn1 | grep "Cpu(s)"
# æœŸæœ›: CPUä½¿ç”¨ç‡ < 80%
```

### å¿«é€Ÿæ•…éšœæ ‘

```
é—®é¢˜: ç½‘ç«™æ— æ³•è®¿é—®
â”‚
â”œâ”€ å‰ç«¯æ— æ³•è®¿é—®
â”‚  â”œâ”€ æ£€æŸ¥å‰ç«¯æœåŠ¡çŠ¶æ€
â”‚  â”œâ”€ æ£€æŸ¥ç«¯å£8080
â”‚  â””â”€ æ£€æŸ¥é˜²ç«å¢™è§„åˆ™
â”‚
â”œâ”€ åç«¯APIé”™è¯¯
â”‚  â”œâ”€ æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€
â”‚  â”œâ”€ æ£€æŸ¥æ—¥å¿—æ–‡ä»¶
â”‚  â””â”€ æ£€æŸ¥æ•°æ®åº“è¿æ¥
â”‚
â””â”€ ç½‘ç»œé—®é¢˜
   â”œâ”€ æ£€æŸ¥DNSè§£æ
   â”œâ”€ æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
   â””â”€ æ£€æŸ¥SSLè¯ä¹¦
```

---

## â“ å¸¸è§é—®é¢˜

### 1. é¡µé¢æ— æ³•è®¿é—®

#### ç—‡çŠ¶
```
æµè§ˆå™¨æ˜¾ç¤º: "æ— æ³•è®¿é—®æ­¤ç½‘ç«™"
æˆ– "ERR_CONNECTION_REFUSED"
```

#### è¯Šæ–­æ­¥éª¤

```bash
# æ­¥éª¤1: æ£€æŸ¥å‰ç«¯æœåŠ¡
sudo systemctl status platform-frontend
# æˆ–
ps aux | grep "http.server"

# æ­¥éª¤2: æ£€æŸ¥ç«¯å£å ç”¨
sudo lsof -i :8080
# æˆ–
sudo netstat -tulpn | grep 8080

# æ­¥éª¤3: æ£€æŸ¥é˜²ç«å¢™
sudo ufw status
sudo firewall-cmd --list-ports  # CentOS/RHEL
```

#### è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ1: é‡å¯å‰ç«¯æœåŠ¡**
```bash
sudo systemctl restart platform-frontend
# æˆ–
pkill -f "http.server"
cd /workspace/platform/frontend
python3 -m http.server 8080 &
```

**æ–¹æ¡ˆ2: ç«¯å£è¢«å ç”¨**
```bash
# æŸ¥æ‰¾å ç”¨è¿›ç¨‹
sudo lsof -i :8080
# ç»ˆæ­¢è¿›ç¨‹
sudo kill -9 <PID>
# é‡å¯æœåŠ¡
sudo systemctl start platform-frontend
```

**æ–¹æ¡ˆ3: é˜²ç«å¢™é…ç½®**
```bash
# Ubuntu/Debian
sudo ufw allow 8080/tcp

# CentOS/RHEL
sudo firewall-cmd --add-port=8080/tcp --permanent
sudo firewall-cmd --reload
```

---

### 2. APIè¯·æ±‚å¤±è´¥

#### ç—‡çŠ¶
```
æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤º:
"Failed to fetch"
"CORS policy error"
"500 Internal Server Error"
```

#### è¯Šæ–­æ­¥éª¤

```bash
# æ­¥éª¤1: æ£€æŸ¥åç«¯æœåŠ¡
sudo systemctl status platform-backend
curl http://localhost:8000/health

# æ­¥éª¤2: æ£€æŸ¥æ—¥å¿—
sudo journalctl -u platform-backend -n 100
# æˆ–
tail -f /var/log/platform/backend.log

# æ­¥éª¤3: æ£€æŸ¥ç¯å¢ƒå˜é‡
cat /workspace/platform/backend/.env

# æ­¥éª¤4: æµ‹è¯•API
curl -X GET http://localhost:8000/api/v1/books \
  -H "Content-Type: application/json"
```

#### è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ1: CORSé”™è¯¯**
```python
# backend/.env
CORS_ORIGINS=["http://localhost:8080","https://yourdomain.com"]
```

**æ–¹æ¡ˆ2: æ•°æ®åº“è¿æ¥é”™è¯¯**
```bash
# æ£€æŸ¥æ•°æ®åº“
psql -h localhost -U platform -d platform_db

# é‡å¯æ•°æ®åº“
sudo systemctl restart postgresql

# æ£€æŸ¥è¿æ¥å­—ç¬¦ä¸²
# backend/.env
DATABASE_URL=postgresql+asyncpg://user:pass@localhost:5432/platform_db
```

**æ–¹æ¡ˆ3: æœåŠ¡å´©æºƒ**
```bash
# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo journalctl -u platform-backend -n 200

# é‡å¯æœåŠ¡
sudo systemctl restart platform-backend

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status platform-backend
```

---

### 3. ä»£ç è¿è¡Œå¤±è´¥

#### ç—‡çŠ¶
```
"æ‰§è¡Œè¶…æ—¶"
"å†…å­˜ä¸è¶³"
"æƒé™é”™è¯¯"
```

#### è¯Šæ–­æ­¥éª¤

```bash
# æ­¥éª¤1: æ£€æŸ¥Docker
docker ps | grep platform
docker stats

# æ­¥éª¤2: æ£€æŸ¥å®¹å™¨æ—¥å¿—
docker logs <container_id>

# æ­¥éª¤3: æ£€æŸ¥èµ„æºé™åˆ¶
docker inspect <container_id> | grep -A 10 "Memory"
```

#### è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ1: è°ƒæ•´è¶…æ—¶æ—¶é—´**
```python
# backend/.env
EXECUTOR_TIMEOUT=60  # å¢åŠ åˆ°60ç§’
```

**æ–¹æ¡ˆ2: å¢åŠ å†…å­˜é™åˆ¶**
```yaml
# docker-compose.yml
services:
  executor:
    mem_limit: 1g  # å¢åŠ åˆ°1GB
```

**æ–¹æ¡ˆ3: æ¸…ç†å®¹å™¨**
```bash
# åœæ­¢æ‰€æœ‰æ‰§è¡Œå®¹å™¨
docker ps | grep executor | awk '{print $1}' | xargs docker stop

# æ¸…ç†æ‚¬ç©ºé•œåƒ
docker system prune -f
```

---

### 4. æ•°æ®åº“è¿æ¥å¤±è´¥

#### ç—‡çŠ¶
```
"could not connect to server"
"authentication failed"
"database does not exist"
```

#### è¯Šæ–­æ­¥éª¤

```bash
# æ­¥éª¤1: æ£€æŸ¥PostgreSQLæœåŠ¡
sudo systemctl status postgresql

# æ­¥éª¤2: æµ‹è¯•è¿æ¥
psql -h localhost -U platform -d platform_db

# æ­¥éª¤3: æ£€æŸ¥è®¤è¯é…ç½®
sudo cat /etc/postgresql/15/main/pg_hba.conf | grep platform

# æ­¥éª¤4: æ£€æŸ¥ç›‘å¬åœ°å€
sudo grep "listen_addresses" /etc/postgresql/15/main/postgresql.conf
```

#### è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ1: é‡å¯æ•°æ®åº“**
```bash
sudo systemctl restart postgresql
sudo systemctl status postgresql
```

**æ–¹æ¡ˆ2: ä¿®å¤è®¤è¯**
```bash
# ç¼–è¾‘ pg_hba.conf
sudo vim /etc/postgresql/15/main/pg_hba.conf

# æ·»åŠ æˆ–ä¿®æ”¹
local   platform_db    platform                    md5
host    platform_db    platform    127.0.0.1/32    md5

# é‡æ–°åŠ è½½é…ç½®
sudo systemctl reload postgresql
```

**æ–¹æ¡ˆ3: é‡ç½®å¯†ç **
```bash
sudo -u postgres psql
ALTER USER platform WITH PASSWORD 'new_password';
\q

# æ›´æ–°.envæ–‡ä»¶
vim /workspace/platform/backend/.env
DATABASE_URL=postgresql+asyncpg://platform:new_password@localhost:5432/platform_db
```

---

## ğŸ”§ æœåŠ¡é—®é¢˜

### Nginxé—®é¢˜

#### é—®é¢˜1: 502 Bad Gateway

**åŸå› **: åç«¯æœåŠ¡æœªè¿è¡Œæˆ–æ— å“åº”

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥åç«¯æœåŠ¡
sudo systemctl status platform-backend

# é‡å¯åç«¯
sudo systemctl restart platform-backend

# æ£€æŸ¥Nginxé…ç½®
sudo nginx -t

# é‡æ–°åŠ è½½Nginx
sudo systemctl reload nginx
```

#### é—®é¢˜2: 404 Not Found

**åŸå› **: è·¯ç”±é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```nginx
# /etc/nginx/sites-available/platform

location /api/ {
    proxy_pass http://127.0.0.1:8000;
    # æ³¨æ„ proxy_pass åé¢çš„æ–œæ 
}

location / {
    proxy_pass http://127.0.0.1:8080;
}
```

### Redisé—®é¢˜

#### é—®é¢˜1: Connection refused

**è¯Šæ–­**:
```bash
# æ£€æŸ¥RedisçŠ¶æ€
sudo systemctl status redis

# æµ‹è¯•è¿æ¥
redis-cli ping

# æ£€æŸ¥ç«¯å£
sudo lsof -i :6379
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å¯åŠ¨Redis
sudo systemctl start redis

# è®¾ç½®å¼€æœºè‡ªå¯
sudo systemctl enable redis

# æ£€æŸ¥é…ç½®
sudo cat /etc/redis/redis.conf | grep "bind"
# åº”è¯¥æ˜¯: bind 127.0.0.1 ::1
```

---

## ğŸ—„ï¸ æ•°æ®åº“é—®é¢˜

### æ€§èƒ½é—®é¢˜

#### æ…¢æŸ¥è¯¢è¯Šæ–­

```sql
-- æŸ¥çœ‹æ…¢æŸ¥è¯¢
SELECT query, calls, total_time, mean_time
FROM pg_stat_statements
ORDER BY mean_time DESC
LIMIT 10;

-- æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„æŸ¥è¯¢
SELECT pid, now() - query_start as duration, query
FROM pg_stat_activity
WHERE state = 'active'
ORDER BY duration DESC;
```

#### ä¼˜åŒ–å»ºè®®

```sql
-- 1. åˆ›å»ºç´¢å¼•
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_books_slug ON books(slug);

-- 2. åˆ†æè¡¨
ANALYZE users;
ANALYZE books;

-- 3. æ¸…ç†æ­»å…ƒç»„
VACUUM ANALYZE;
```

### è¿æ¥æ± è€—å°½

**ç—‡çŠ¶**: "too many clients"

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥çœ‹å½“å‰è¿æ¥
psql -U postgres -c "SELECT count(*) FROM pg_stat_activity;"

# ç»ˆæ­¢ç©ºé—²è¿æ¥
psql -U postgres -c "
SELECT pg_terminate_backend(pid)
FROM pg_stat_activity
WHERE state = 'idle'
AND state_change < current_timestamp - INTERVAL '10 minutes';
"

# è°ƒæ•´max_connections
sudo vim /etc/postgresql/15/main/postgresql.conf
max_connections = 200

sudo systemctl restart postgresql
```

---

## âš¡ æ€§èƒ½é—®é¢˜

### é«˜è´Ÿè½½è¯Šæ–­

#### CPUé«˜

```bash
# æŸ¥çœ‹CPUå ç”¨
top -bn1 | head -20

# æŸ¥çœ‹è¿›ç¨‹CPU
ps aux --sort=-%cpu | head -10

# æŸ¥çœ‹Pythonè¿›ç¨‹
ps aux | grep python | sort -k3 -rn
```

**è§£å†³æ–¹æ¡ˆ**:
- ä¼˜åŒ–ä»£ç é€»è¾‘
- å¢åŠ ç¼“å­˜
- ä½¿ç”¨å¼‚æ­¥å¤„ç†
- å¢åŠ æœåŠ¡å™¨èµ„æº

#### å†…å­˜é«˜

```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h

# æŸ¥çœ‹è¿›ç¨‹å†…å­˜
ps aux --sort=-%mem | head -10

# æŸ¥çœ‹Pythonå†…å­˜
ps aux | grep python | sort -k4 -rn
```

**è§£å†³æ–¹æ¡ˆ**:
- æ¸…ç†ç¼“å­˜
- ä¼˜åŒ–æŸ¥è¯¢
- å¢åŠ swapç©ºé—´
- é‡å¯æœåŠ¡

#### ç£ç›˜æ»¡

```bash
# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
df -h

# æŸ¥æ‰¾å¤§æ–‡ä»¶
sudo du -h / | sort -rh | head -20

# æ¸…ç†æ—¥å¿—
sudo journalctl --vacuum-time=7d
sudo find /var/log -type f -name "*.log" -mtime +30 -delete
```

---

## ğŸ”’ å®‰å…¨é—®é¢˜

### å¼‚å¸¸ç™»å½•

**æ£€æµ‹**:
```bash
# æŸ¥çœ‹å¤±è´¥ç™»å½•
sudo grep "Failed" /var/log/auth.log | tail -50

# æŸ¥çœ‹SSHç™»å½•
sudo last -n 20
```

**é˜²æŠ¤**:
```bash
# é…ç½®fail2ban
sudo apt install fail2ban
sudo systemctl enable fail2ban
sudo systemctl start fail2ban

# é™åˆ¶SSH
# /etc/ssh/sshd_config
PermitRootLogin no
MaxAuthTries 3
PasswordAuthentication no
```

### DDoSæ”»å‡»

**æ£€æµ‹**:
```bash
# æŸ¥çœ‹è¿æ¥æ•°
netstat -an | grep :80 | wc -l

# æŸ¥çœ‹è®¿é—®IP
tail -1000 /var/log/nginx/access.log | awk '{print $1}' | sort | uniq -c | sort -rn | head -20
```

**é˜²æŠ¤**:
```nginx
# /etc/nginx/nginx.conf
limit_req_zone $binary_remote_addr zone=mylimit:10m rate=10r/s;

server {
    limit_req zone=mylimit burst=20;
}
```

---

## ğŸ“Š æ—¥å¿—åˆ†æ

### æ—¥å¿—ä½ç½®

```bash
# ç³»ç»Ÿæ—¥å¿—
/var/log/syslog

# Nginxæ—¥å¿—
/var/log/nginx/access.log
/var/log/nginx/error.log

# PostgreSQLæ—¥å¿—
/var/log/postgresql/postgresql-15-main.log

# åº”ç”¨æ—¥å¿—
/var/log/platform/backend.log
/var/log/platform/frontend.log

# Systemdæ—¥å¿—
journalctl -u platform-backend
journalctl -u platform-frontend
```

### æ—¥å¿—åˆ†æå·¥å…·

```bash
# å®æ—¶æŸ¥çœ‹
tail -f /var/log/nginx/access.log

# æœç´¢é”™è¯¯
grep "ERROR" /var/log/platform/backend.log | tail -50

# ç»Ÿè®¡è®¿é—®
awk '{print $1}' /var/log/nginx/access.log | sort | uniq -c | sort -rn | head -20

# åˆ†æå“åº”æ—¶é—´
awk '{print $10}' /var/log/nginx/access.log | sort -n | uniq -c
```

---

## ğŸ†˜ ç´§æ€¥æ¢å¤

### æœåŠ¡å®Œå…¨å®•æœº

```bash
# æ­¥éª¤1: åœæ­¢æ‰€æœ‰æœåŠ¡
sudo systemctl stop platform-backend
sudo systemctl stop platform-frontend
sudo systemctl stop nginx

# æ­¥éª¤2: æ£€æŸ¥ç³»ç»Ÿèµ„æº
free -h
df -h
top

# æ­¥éª¤3: æ¸…ç†èµ„æº
sudo systemctl restart postgresql
sudo systemctl restart redis
docker system prune -af

# æ­¥éª¤4: é‡å¯æœåŠ¡
sudo systemctl start nginx
sudo systemctl start platform-backend  
sudo systemctl start platform-frontend

# æ­¥éª¤5: éªŒè¯
curl http://localhost:8080
curl http://localhost:8000/health
```

### æ•°æ®æ¢å¤

```bash
# ä»å¤‡ä»½æ¢å¤PostgreSQL
pg_restore -h localhost -U platform -d platform_db /backup/platform_db.dump

# ä»å¤‡ä»½æ¢å¤æ–‡ä»¶
tar -xzf /backup/platform_files.tar.gz -C /home/platform/

# é‡å¯æœåŠ¡
sudo systemctl restart platform-backend
```

---

## ğŸ“ è·å–å¸®åŠ©

### è‡ªåŠ©èµ„æº

- ğŸ“– æŸ¥çœ‹ç”¨æˆ·æ‰‹å†Œ
- ğŸ” æœç´¢å·²çŸ¥é—®é¢˜
- ğŸ“Š æŸ¥çœ‹ç›‘æ§æ•°æ®
- ğŸ“ æ£€æŸ¥æ›´æ–°æ—¥å¿—

### è”ç³»æ”¯æŒ

- ğŸ“§ æŠ€æœ¯æ”¯æŒé‚®ç®±
- ğŸ’¬ åœ¨çº¿å®¢æœ
- ğŸ› GitHub Issues
- ğŸ“ ç´§æ€¥çƒ­çº¿

---

## ğŸ“ é—®é¢˜æŠ¥å‘Šæ¨¡æ¿

```markdown
### é—®é¢˜æè¿°
[ç®€è¦æè¿°é—®é¢˜]

### å¤ç°æ­¥éª¤
1. [æ­¥éª¤1]
2. [æ­¥éª¤2]
3. [æ­¥éª¤3]

### é¢„æœŸè¡Œä¸º
[åº”è¯¥å‘ç”Ÿä»€ä¹ˆ]

### å®é™…è¡Œä¸º
[å®é™…å‘ç”Ÿäº†ä»€ä¹ˆ]

### ç¯å¢ƒä¿¡æ¯
- OS: [æ“ä½œç³»ç»Ÿ]
- Python: [ç‰ˆæœ¬]
- Platform: [ç‰ˆæœ¬]

### é”™è¯¯æ—¥å¿—
```
[ç²˜è´´ç›¸å…³æ—¥å¿—]
```

### å·²å°è¯•çš„è§£å†³æ–¹æ¡ˆ
[åˆ—å‡ºå·²ç»å°è¯•çš„æ–¹æ³•]
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-11-12  
**ç»´æŠ¤å›¢é˜Ÿ**: Platform Support Team
