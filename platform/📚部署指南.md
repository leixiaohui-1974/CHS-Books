# ğŸ“š Platformå¹³å°éƒ¨ç½²æŒ‡å—

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¥æœŸ**: 2025-11-12  
**é€‚ç”¨ç‰ˆæœ¬**: Platform 1.0.0+

---

## ğŸ“‹ ç›®å½•

- [éƒ¨ç½²æ¦‚è¿°](#éƒ¨ç½²æ¦‚è¿°)
- [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
- [å¼€å‘ç¯å¢ƒéƒ¨ç½²](#å¼€å‘ç¯å¢ƒéƒ¨ç½²)
- [ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²](#ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²)
- [Dockeréƒ¨ç½²](#dockeréƒ¨ç½²)
- [ç¯å¢ƒé…ç½®](#ç¯å¢ƒé…ç½®)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ¯ éƒ¨ç½²æ¦‚è¿°

Platformå¹³å°æ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ï¼š

| éƒ¨ç½²æ–¹å¼ | éš¾åº¦ | æ¨èåœºæ™¯ |
|----------|------|----------|
| å¼€å‘ç¯å¢ƒ | â­ ç®€å• | æœ¬åœ°å¼€å‘ã€æµ‹è¯• |
| ç”Ÿäº§ç¯å¢ƒ | â­â­â­ ä¸­ç­‰ | æ­£å¼ä¸Šçº¿ |
| Dockeréƒ¨ç½² | â­â­ ç®€å• | å¿«é€Ÿéƒ¨ç½²ã€å®¹å™¨åŒ– |
| Kubernetes | â­â­â­â­ å¤æ‚ | å¤§è§„æ¨¡é›†ç¾¤ |

---

## ğŸ”§ ç¯å¢ƒå‡†å¤‡

### ç³»ç»Ÿè¦æ±‚

#### æœ€ä½é…ç½®
```
CPU:     2æ ¸
å†…å­˜:    4GB
ç¡¬ç›˜:    20GB
ç³»ç»Ÿ:    Linux/macOS/Windows
```

#### æ¨èé…ç½®
```
CPU:     4æ ¸+
å†…å­˜:    8GB+
ç¡¬ç›˜:    50GB+
ç³»ç»Ÿ:    Ubuntu 20.04+ / CentOS 8+
```

### è½¯ä»¶ä¾èµ–

#### å¿…éœ€è½¯ä»¶

1. **Python 3.12+**
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install python3.12 python3-pip

# CentOS/RHEL
sudo yum install python3.12 python3-pip

# macOS
brew install python@3.12

# éªŒè¯å®‰è£…
python3 --version
```

2. **Node.js 22+** (å¯é€‰ï¼Œç”¨äºå‰ç«¯å·¥å…·)
```bash
# Ubuntu/Debian
curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash -
sudo apt install nodejs

# macOS
brew install node@22

# éªŒè¯å®‰è£…
node --version
npm --version
```

3. **Git**
```bash
# Ubuntu/Debian
sudo apt install git

# CentOS/RHEL
sudo yum install git

# macOS
brew install git
```

#### å¯é€‰è½¯ä»¶

1. **PostgreSQL 15+** (ç”Ÿäº§ç¯å¢ƒæ¨è)
```bash
# Ubuntu/Debian
sudo apt install postgresql-15

# macOS
brew install postgresql@15
```

2. **Redis 7+** (ç¼“å­˜)
```bash
# Ubuntu/Debian
sudo apt install redis-server

# macOS
brew install redis
```

3. **MongoDB 6+** (å†…å®¹å­˜å‚¨)
```bash
# Ubuntu/Debian
wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -
sudo apt install mongodb-org

# macOS
brew tap mongodb/brew
brew install mongodb-community@6.0
```

---

## ğŸ’» å¼€å‘ç¯å¢ƒéƒ¨ç½²

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd platform
```

### 2. å®‰è£…Pythonä¾èµ–

```bash
cd backend
pip install -r requirements.txt
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘é…ç½®ï¼ˆä½¿ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨ï¼‰
vim .env
```

åŸºç¡€é…ç½®ç¤ºä¾‹ï¼š
```bash
# .env
APP_NAME=Platform
APP_ENV=development
APP_DEBUG=true
SECRET_KEY=your-secret-key-here

# æ•°æ®åº“ï¼ˆå¼€å‘ç¯å¢ƒä½¿ç”¨SQLiteï¼‰
DATABASE_URL=sqlite+aiosqlite:///./dev.db

# CORSé…ç½®
CORS_ORIGINS=["http://localhost:8080","http://localhost:3000"]
```

### 4. å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
# æ–¹å¼1: ä½¿ç”¨Pythonå†…ç½®æœåŠ¡å™¨
cd frontend
python3 -m http.server 8080

# æ–¹å¼2: ä½¿ç”¨Node.js http-server
npm install -g http-server
http-server frontend -p 8080
```

### 5. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
python3 -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 6. éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥å‰ç«¯
curl http://localhost:8080

# æ£€æŸ¥åç«¯
curl http://localhost:8000/health

# æ£€æŸ¥APIæ–‡æ¡£
open http://localhost:8000/docs
```

---

## ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Nginx (80/443) â”‚ â† å…¥å£
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
    â”‚          â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”
â”‚Frontendâ”‚  â”‚Backendâ”‚
â”‚  8080  â”‚  â”‚ 8000  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”˜
                â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
         â”‚             â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚Databaseâ”‚    â”‚  Redis â”‚
    â”‚  5432  â”‚    â”‚  6379  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1. å‡†å¤‡æœåŠ¡å™¨

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£…å¿…è¦è½¯ä»¶
sudo apt install -y python3.12 python3-pip nginx postgresql redis-server git

# åˆ›å»ºåº”ç”¨ç”¨æˆ·
sudo useradd -m -s /bin/bash platform
```

### 2. éƒ¨ç½²åº”ç”¨

```bash
# åˆ‡æ¢åˆ°åº”ç”¨ç”¨æˆ·
sudo su - platform

# å…‹éš†é¡¹ç›®
git clone <repository-url> /home/platform/app
cd /home/platform/app

# å®‰è£…ä¾èµ–
cd backend
pip install -r requirements.txt
```

### 3. é…ç½®æ•°æ®åº“

```bash
# åˆ›å»ºPostgreSQLæ•°æ®åº“
sudo -u postgres psql
CREATE DATABASE platform_db;
CREATE USER platform_user WITH PASSWORD 'your_secure_password';
GRANT ALL PRIVILEGES ON DATABASE platform_db TO platform_user;
\q

# é…ç½®ç¯å¢ƒå˜é‡
cat > /home/platform/app/backend/.env << EOF
APP_NAME=Platform
APP_ENV=production
APP_DEBUG=false
SECRET_KEY=$(openssl rand -hex 32)

# PostgreSQL
DATABASE_URL=postgresql+asyncpg://platform_user:your_secure_password@localhost:5432/platform_db

# Redis
REDIS_URL=redis://localhost:6379/0

# CORS
CORS_ORIGINS=["https://yourdomain.com"]
EOF
```

### 4. é…ç½®SystemdæœåŠ¡

#### åç«¯æœåŠ¡

```bash
sudo tee /etc/systemd/system/platform-backend.service > /dev/null << EOF
[Unit]
Description=Platform Backend Service
After=network.target postgresql.service redis.service

[Service]
Type=simple
User=platform
WorkingDirectory=/home/platform/app/backend
Environment="PATH=/home/platform/.local/bin:/usr/local/bin:/usr/bin"
ExecStart=/usr/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
EOF

# å¯åŠ¨æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl enable platform-backend
sudo systemctl start platform-backend

# æ£€æŸ¥çŠ¶æ€
sudo systemctl status platform-backend
```

#### å‰ç«¯æœåŠ¡

```bash
sudo tee /etc/systemd/system/platform-frontend.service > /dev/null << EOF
[Unit]
Description=Platform Frontend Service
After=network.target

[Service]
Type=simple
User=platform
WorkingDirectory=/home/platform/app/frontend
ExecStart=/usr/bin/python3 -m http.server 8080
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
EOF

# å¯åŠ¨æœåŠ¡
sudo systemctl enable platform-frontend
sudo systemctl start platform-frontend
```

### 5. é…ç½®Nginx

```bash
sudo tee /etc/nginx/sites-available/platform << 'EOF'
# HTTP -> HTTPS é‡å®šå‘
server {
    listen 80;
    server_name yourdomain.com www.yourdomain.com;
    return 301 https://$server_name$request_uri;
}

# ä¸»ç«™ç‚¹é…ç½®
server {
    listen 443 ssl http2;
    server_name yourdomain.com www.yourdomain.com;

    # SSLè¯ä¹¦é…ç½®
    ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    # å®‰å…¨å¤´
    add_header Strict-Transport-Security "max-age=31536000" always;
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;

    # å‰ç«¯
    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # åç«¯API
    location /api/ {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # é™æ€æ–‡ä»¶ç¼“å­˜
    location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
        proxy_pass http://127.0.0.1:8080;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
EOF

# å¯ç”¨ç«™ç‚¹
sudo ln -s /etc/nginx/sites-available/platform /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

### 6. é…ç½®SSLè¯ä¹¦ (Let's Encrypt)

```bash
# å®‰è£…Certbot
sudo apt install certbot python3-certbot-nginx

# è·å–è¯ä¹¦
sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com

# è®¾ç½®è‡ªåŠ¨ç»­æœŸ
sudo systemctl enable certbot.timer
sudo systemctl start certbot.timer
```

---

## ğŸ³ Dockeréƒ¨ç½²

### 1. å®‰è£…Docker

```bash
# Ubuntu/Debian
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# å®‰è£…Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```

### 2. Docker Composeé…ç½®

åˆ›å»º `docker-compose.yml`:

```yaml
version: '3.8'

services:
  # å‰ç«¯æœåŠ¡
  frontend:
    image: nginx:alpine
    ports:
      - "8080:80"
    volumes:
      - ./frontend:/usr/share/nginx/html:ro
    restart: unless-stopped

  # åç«¯æœåŠ¡
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgresql+asyncpg://platform:password@postgres:5432/platform
      - REDIS_URL=redis://redis:6379/0
    depends_on:
      - postgres
      - redis
    restart: unless-stopped

  # PostgreSQLæ•°æ®åº“
  postgres:
    image: postgres:15-alpine
    environment:
      - POSTGRES_DB=platform
      - POSTGRES_USER=platform
      - POSTGRES_PASSWORD=password
    volumes:
      - postgres_data:/var/lib/postgresql/data
    restart: unless-stopped

  # Redisç¼“å­˜
  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data
    restart: unless-stopped

volumes:
  postgres_data:
  redis_data:
```

### 3. åˆ›å»ºDockerfile

åˆ›å»º `backend/Dockerfile`:

```dockerfile
FROM python:3.12-slim

WORKDIR /app

# å®‰è£…ä¾èµ–
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 8000

# å¯åŠ¨åº”ç”¨
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

### 4. å¯åŠ¨æœåŠ¡

```bash
# æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# åœæ­¢æœåŠ¡
docker-compose down
```

---

## âš™ï¸ ç¯å¢ƒé…ç½®

### ç¯å¢ƒå˜é‡è¯´æ˜

#### åº”ç”¨é…ç½®
```bash
APP_NAME=Platform                    # åº”ç”¨åç§°
APP_ENV=production                   # ç¯å¢ƒ: development/production
APP_DEBUG=false                      # è°ƒè¯•æ¨¡å¼
APP_VERSION=1.0.0                    # ç‰ˆæœ¬å·
SECRET_KEY=your-secret-key          # å¯†é’¥
```

#### æ•°æ®åº“é…ç½®
```bash
# PostgreSQL
DATABASE_URL=postgresql+asyncpg://user:pass@host:5432/db

# MongoDB
MONGODB_URL=mongodb://user:pass@host:27017/db

# Redis
REDIS_URL=redis://host:6379/0
```

#### APIé…ç½®
```bash
# OpenAI
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4

# å…¶ä»–AIæœåŠ¡
ANTHROPIC_API_KEY=...
```

#### CORSé…ç½®
```bash
CORS_ORIGINS=["https://yourdomain.com","https://www.yourdomain.com"]
```

---

## ğŸ” å¸¸è§é—®é¢˜

### 1. ç«¯å£è¢«å ç”¨

```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
sudo lsof -i :8000
sudo lsof -i :8080

# ç»ˆæ­¢è¿›ç¨‹
sudo kill -9 <PID>
```

### 2. æ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥PostgreSQLçŠ¶æ€
sudo systemctl status postgresql

# æ£€æŸ¥è¿æ¥
psql -h localhost -U platform_user -d platform_db

# æŸ¥çœ‹æ—¥å¿—
sudo tail -f /var/log/postgresql/postgresql-15-main.log
```

### 3. Nginxé…ç½®é”™è¯¯

```bash
# æµ‹è¯•é…ç½®
sudo nginx -t

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo tail -f /var/log/nginx/error.log

# é‡æ–°åŠ è½½é…ç½®
sudo systemctl reload nginx
```

### 4. Pythonä¾èµ–é—®é¢˜

```bash
# æ¸…ç†pipç¼“å­˜
pip cache purge

# é‡æ–°å®‰è£…ä¾èµ–
pip install --no-cache-dir -r requirements.txt

# ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. æ•°æ®åº“ä¼˜åŒ–

```sql
-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_books_slug ON books(slug);

-- å¯ç”¨æŸ¥è¯¢ç¼“å­˜
ALTER SYSTEM SET shared_buffers = '256MB';
ALTER SYSTEM SET effective_cache_size = '1GB';
```

### 2. Redisé…ç½®

```bash
# /etc/redis/redis.conf
maxmemory 256mb
maxmemory-policy allkeys-lru
```

### 3. Nginxä¼˜åŒ–

```nginx
# å¯ç”¨gzipå‹ç¼©
gzip on;
gzip_vary on;
gzip_types text/plain text/css application/json application/javascript;

# å¯ç”¨ç¼“å­˜
proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=my_cache:10m;
```

---

## ğŸ”’ å®‰å…¨å»ºè®®

### 1. é˜²ç«å¢™é…ç½®

```bash
# å¯ç”¨UFW
sudo ufw enable

# å…è®¸SSH
sudo ufw allow 22/tcp

# å…è®¸HTTP/HTTPS
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# æŸ¥çœ‹çŠ¶æ€
sudo ufw status
```

### 2. å®šæœŸå¤‡ä»½

```bash
# å¤‡ä»½è„šæœ¬
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
pg_dump platform_db > /backup/platform_db_$DATE.sql
tar -czf /backup/platform_files_$DATE.tar.gz /home/platform/app
```

### 3. æ›´æ–°ç³»ç»Ÿ

```bash
# å®šæœŸæ›´æ–°
sudo apt update && sudo apt upgrade -y

# è‡ªåŠ¨å®‰å…¨æ›´æ–°
sudo apt install unattended-upgrades
sudo dpkg-reconfigure --priority=low unattended-upgrades
```

---

## ğŸ“ æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿ

- ğŸ“– æŸ¥çœ‹ [æ•…éšœæ’æŸ¥æŒ‡å—](æ•…éšœæ’æŸ¥æŒ‡å—.md)
- ğŸ“§ è”ç³»æŠ€æœ¯æ”¯æŒ
- ğŸ› æäº¤Issue

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-11-12  
**ç»´æŠ¤å›¢é˜Ÿ**: Platform Team
