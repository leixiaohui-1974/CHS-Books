# æ™ºèƒ½çŸ¥è¯†å¹³å°å¢å¼ºæ–¹æ¡ˆ V2.0

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **é¡¹ç›®åç§°**: å·¥ç¨‹å­¦ä¹ å¹³å° - äº¤äº’å¼ä»£ç æ‰§è¡Œä¸AIè¾…åŠ©ç¼–ç¨‹å¢å¼º
- **ç‰ˆæœ¬**: V2.0
- **åˆ›å»ºæ—¥æœŸ**: 2025-11-03
- **çŠ¶æ€**: è®¾è®¡æ–¹æ¡ˆ
- **ç›®æ ‡**: å°†ç°æœ‰çŸ¥è¯†å¹³å°å‡çº§ä¸ºå…·å¤‡å®Œæ•´ä»£ç æ‰§è¡Œã€åˆ†æã€å­¦ä¹ ã€AIè¾…åŠ©çš„äº‘ç«¯ç¼–ç¨‹ç¯å¢ƒ

---

## ğŸ¯ ä¸€ã€é¡¹ç›®èƒŒæ™¯ä¸ç›®æ ‡

### 1.1 ç°çŠ¶åˆ†æ

#### ç°æœ‰å¹³å°åŠŸèƒ½
- âœ… ç”¨æˆ·ç³»ç»Ÿï¼ˆæ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†ï¼‰
- âœ… è¯¾ç¨‹ç®¡ç†ï¼ˆä¹¦ç±â†’ç« èŠ‚â†’æ¡ˆä¾‹ä¸‰çº§ç»“æ„ï¼‰
- âœ… å­¦ä¹ è¿›åº¦è¿½è¸ª
- âœ… åŸºç¡€å·¥å…·æ‰§è¡Œï¼ˆDockeréš”ç¦»ï¼Œå‚æ•°åŒ–æ‰§è¡Œï¼‰
- â³ AIåŠ©æ‰‹ï¼ˆéƒ¨åˆ†å®ç°ï¼‰

#### ä¹¦ç¨¿èµ„æº
- **10ä¸ªä¸“ä¸šæ•™æ**ï¼Œæ¶µç›–ï¼š
  - æ°´ç¯å¢ƒæ¨¡æ‹Ÿï¼ˆ30ä¸ªæ¡ˆä¾‹ï¼‰
  - æ°´ç³»ç»Ÿæ§åˆ¶ï¼ˆ24ä¸ªæ¡ˆä¾‹ï¼‰
  - æ˜æ¸ æ°´åŠ›å­¦ï¼ˆ20+ä¸ªæ¡ˆä¾‹ï¼‰
  - åˆ†å¸ƒå¼æ°´æ–‡æ¨¡å‹
  - ç”Ÿæ€æ°´åŠ›å­¦
  - åœ°ä¸‹æ°´åŠ¨åŠ›å­¦
  - ç­‰ç­‰...

- **æ¯ä¸ªæ¡ˆä¾‹åŒ…å«**ï¼š
  - ç†è®ºè¯´æ˜ï¼ˆREADME.mdï¼‰
  - ä¸»è®¡ç®—è„šæœ¬ï¼ˆmain.pyï¼‰
  - æ ¸å¿ƒæ¨¡å‹ï¼ˆmodels/ï¼‰
  - å·¥å…·å‡½æ•°ï¼ˆutils/ï¼‰
  - ä¾èµ–åº“ï¼ˆrequirements.txtï¼‰

#### ç°æœ‰é—®é¢˜
1. âŒ è„šæœ¬æ‰§è¡Œä¸å¹³å°åˆ†ç¦»ï¼Œç”¨æˆ·éœ€è¦ä¸‹è½½æœ¬åœ°è¿è¡Œ
2. âŒ ç¼ºä¹äº¤äº’å¼ä»£ç ç¼–è¾‘å’Œå®æ—¶è¿è¡Œç¯å¢ƒ
3. âŒ ç»“æœå±•ç¤ºä¸è§„èŒƒï¼Œç¼ºä¹æ ‡å‡†åŒ–æ¨¡æ¿
4. âŒ æ— ä»£ç å­¦ä¹ è¾…åŠ©ï¼ˆè®²è§£ã€æ³¨é‡Šã€æ•™å­¦ï¼‰
5. âŒ æ— AIè¾…åŠ©ç¼–ç¨‹åŠŸèƒ½
6. âŒ ä¾èµ–åº“ç®¡ç†å¤æ‚ï¼Œç”¨æˆ·é…ç½®é—¨æ§›é«˜

### 1.2 æ ¸å¿ƒç›®æ ‡

**æ‰“é€ ä¸€ä¸ª"é›¶é…ç½®ã€é›¶ç¦»å¼€"çš„äº‘ç«¯æ™ºèƒ½å­¦ä¹ ç¯å¢ƒ**

ç”¨æˆ·åœ¨å¹³å°ä¸Šå¯ä»¥å®Œæˆå…¨éƒ¨å­¦ä¹ æµç¨‹ï¼š
1. ğŸ“š é˜…è¯»çŸ¥è¯†å†…å®¹
2. ğŸ’¬ AIçŸ¥è¯†é—®ç­”
3. ğŸ’» æŸ¥çœ‹æ¡ˆä¾‹ä»£ç 
4. ğŸ¤– AIä»£ç è®²è§£
5. âœï¸ åœ¨çº¿ä¿®æ”¹ä»£ç 
6. â–¶ï¸ ä¸€é”®è¿è¡Œè„šæœ¬
7. ğŸ“Š æŸ¥çœ‹æ ‡å‡†åŒ–ç»“æœï¼ˆå›¾è¡¨ã€æ•°æ®ã€æŠ¥å‘Šï¼‰
8. ğŸ” ç»“æœåˆ†æä¸è§£è¯»
9. ğŸ”„ ä¿®æ”¹å‚æ•°å†æ¬¡è¿è¡Œ
10. ğŸ“ å®Œæˆå­¦ä¹ é—­ç¯

**å…³é”®åŸåˆ™**ï¼š
- âœ… æ‰€æœ‰æ“ä½œåœ¨å¯¹è¯è¿›ç¨‹ä¸­è¿›è¡Œ
- âœ… ä¸ä¿®æ”¹å¹³å°çŸ¥è¯†åº“æ•°æ®
- âœ… ç”¨æˆ·ä¼šè¯éš”ç¦»ï¼ˆå¤šç”¨æˆ·å®‰å…¨ï¼‰
- âœ… ä¾èµ–è‡ªåŠ¨ç®¡ç†
- âœ… ç»“æœæ ‡å‡†åŒ–å±•ç¤º

---

## ğŸ—ï¸ äºŒã€ç³»ç»Ÿæ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯å±•ç¤ºå±‚ (Next.js)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  çŸ¥è¯†é˜…è¯»  â”‚  ä»£ç ç¼–è¾‘  â”‚  æ‰§è¡Œæ§åˆ¶  â”‚  ç»“æœå±•ç¤º  â”‚  AIå¯¹è¯   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ REST API / WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åº”ç”¨æœåŠ¡å±‚ (FastAPI)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¼šè¯ç®¡ç†  â”‚ ä»£ç ç®¡ç†  â”‚  æ‰§è¡Œè°ƒåº¦  â”‚  ç»“æœå¤„ç†  â”‚  AIæœåŠ¡   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ ¸å¿ƒæ‰§è¡Œå±‚ (Code Execution Engine)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å®¹å™¨ç¼–æ’  â”‚  ä¾èµ–ç®¡ç†  â”‚  æ²™ç®±éš”ç¦»  â”‚  èµ„æºæ§åˆ¶  â”‚  ç›‘æ§    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ•°æ®å­˜å‚¨å±‚ (Data Layer)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PostgreSQL â”‚  MongoDB  â”‚   Redis   â”‚  MinIO   â”‚  VectorDB  â”‚
â”‚  (å…ƒæ•°æ®)   â”‚ (ä¼šè¯æ•°æ®) â”‚  (ç¼“å­˜)   â”‚ (ç»“æœ)   â”‚ (çŸ¥è¯†åº“)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒæ¨¡å—åˆ’åˆ†

#### æ¨¡å—1: ä¼šè¯ç®¡ç†æœåŠ¡ (Session Service)
**èŒè´£**: ç®¡ç†ç”¨æˆ·å­¦ä¹ ä¼šè¯çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ

**åŠŸèƒ½**:
- ä¼šè¯åˆ›å»ºä¸é”€æ¯
- ä¼šè¯çŠ¶æ€ç®¡ç†ï¼ˆæ´»è·ƒã€æš‚åœã€è¿‡æœŸï¼‰
- ä¼šè¯æ•°æ®éš”ç¦»
- ä¼šè¯æ¢å¤ä¸æŒä¹…åŒ–
- è¶…æ—¶è‡ªåŠ¨æ¸…ç†

**æ•°æ®ç»“æ„**:
```python
Session {
    session_id: UUID
    user_id: int
    book_slug: str
    case_slug: str
    status: enum(active, paused, expired)
    workspace: {
        code_files: dict         # ä»£ç æ–‡ä»¶å¿«ç…§
        modified_files: dict     # ç”¨æˆ·ä¿®æ”¹çš„æ–‡ä»¶
        execution_history: list  # æ‰§è¡Œå†å²
        results: list            # ç»“æœåˆ—è¡¨
    }
    ai_context: {
        conversation_history: list
        current_topic: str
        knowledge_refs: list
    }
    created_at: datetime
    last_active: datetime
    expires_at: datetime
    resource_quota: {
        max_executions: 100
        max_cpu_time: 3600
        max_memory: "2GB"
    }
}
```

#### æ¨¡å—2: æ™ºèƒ½ä»£ç æœåŠ¡ (Code Intelligence Service)
**èŒè´£**: ä»£ç ç®¡ç†ã€åˆ†æã€è®²è§£ã€ç¼–è¾‘

**åŠŸèƒ½**:
1. **ä»£ç åŠ è½½ä¸ç®¡ç†**
   - ä»ä¹¦ç¨¿åº“åŠ è½½æ¡ˆä¾‹ä»£ç 
   - åˆ›å»ºç”¨æˆ·å·¥ä½œåŒºå‰¯æœ¬
   - ç‰ˆæœ¬æ§åˆ¶ï¼ˆåŸå§‹ç‰ˆæœ¬ vs ä¿®æ”¹ç‰ˆæœ¬ï¼‰
   - ä»£ç å·®å¼‚å¯¹æ¯”

2. **ä»£ç åˆ†æ**
   - ASTè¯­æ³•æ ‘åˆ†æ
   - ä¾èµ–å…³ç³»æå–
   - å‡½æ•°/ç±»ç»“æ„è§£æ
   - å‚æ•°è¯†åˆ«ä¸ç±»å‹æ¨æ–­

3. **ä»£ç è®²è§£ï¼ˆAIå¢å¼ºï¼‰**
   - é€è¡Œæ³¨é‡Šç”Ÿæˆ
   - ç®—æ³•æµç¨‹å›¾ç”Ÿæˆ
   - å…³é”®æ¦‚å¿µæ ‡æ³¨
   - ç›¸å…³ç†è®ºé“¾æ¥
   - å¤šè¯­è¨€è®²è§£ï¼ˆä¸­è‹±æ–‡ï¼‰

4. **ä»£ç ç¼–è¾‘æ”¯æŒ**
   - è¯­æ³•é«˜äº®
   - æ™ºèƒ½è¡¥å…¨
   - é”™è¯¯æ£€æµ‹
   - æ ¼å¼åŒ–
   - ä»£ç ç‰‡æ®µæ¨¡æ¿

**APIè®¾è®¡**:
```python
POST /api/v1/code/load
    # åŠ è½½æ¡ˆä¾‹ä»£ç åˆ°ç”¨æˆ·ä¼šè¯
    
GET /api/v1/code/analyze
    # åˆ†æä»£ç ç»“æ„
    
POST /api/v1/code/explain
    # AIè®²è§£ä»£ç 
    
PUT /api/v1/code/edit
    # ç¼–è¾‘ä»£ç 
    
GET /api/v1/code/diff
    # æŸ¥çœ‹ä¿®æ”¹å¯¹æ¯”
```

#### æ¨¡å—3: æ‰§è¡Œå¼•æ“æœåŠ¡ (Execution Engine Service)
**èŒè´£**: å®‰å…¨ã€éš”ç¦»ã€å¯æ§çš„ä»£ç æ‰§è¡Œ

**æ ¸å¿ƒç‰¹æ€§**:
1. **å®¹å™¨åŒ–æ‰§è¡Œ**
   ```
   æ¯ä¸ªæ‰§è¡Œä»»åŠ¡ = ç‹¬ç«‹Dockerå®¹å™¨
   - é•œåƒ: é¢„æ„å»ºPythonç¯å¢ƒ + å¸¸ç”¨ç§‘å­¦è®¡ç®—åº“
   - ç½‘ç»œ: éš”ç¦»ï¼ˆå¯é€‰æ‹©æ€§å¼€æ”¾ï¼‰
   - æ–‡ä»¶ç³»ç»Ÿ: åªè¯»ä»£ç  + å¯å†™è¾“å‡ºç›®å½•
   - èµ„æºé™åˆ¶: CPUã€å†…å­˜ã€æ—¶é—´
   ```

2. **ä¾èµ–ç®¡ç†**
   - æ¡ˆä¾‹çº§ä¾èµ–æ¸…å•ï¼ˆrequirements.txtï¼‰
   - ä¾èµ–ç¼“å­˜ä¸å¤ç”¨
   - å¿«é€Ÿç¯å¢ƒåˆå§‹åŒ–ï¼ˆ< 3ç§’ï¼‰
   - ä¾èµ–å†²çªæ£€æµ‹

3. **æ™ºèƒ½è°ƒåº¦**
   - ä»»åŠ¡é˜Ÿåˆ—ï¼ˆCelery + Redisï¼‰
   - ä¼˜å…ˆçº§ç®¡ç†
   - å¹¶å‘æ§åˆ¶
   - å¤±è´¥é‡è¯•
   - è¿›åº¦å®æ—¶åé¦ˆ

4. **èµ„æºæ§åˆ¶**
   ```python
   ExecutionConfig {
       max_cpu_cores: 2
       max_memory: "1GB"
       max_disk: "500MB"
       timeout: 300  # ç§’
       priority: "normal"
   }
   ```

5. **å®‰å…¨æ²™ç®±**
   - æ–‡ä»¶ç³»ç»Ÿéš”ç¦»
   - ç½‘ç»œè®¿é—®æ§åˆ¶
   - ç³»ç»Ÿè°ƒç”¨é™åˆ¶
   - æ¶æ„ä»£ç æ£€æµ‹

**æ‰§è¡Œæµç¨‹**:
```
1. ä»£ç å‡†å¤‡
   â”œâ”€ æ”¶é›†ç”¨æˆ·ä¿®æ”¹çš„ä»£ç 
   â”œâ”€ æå–æ¡ˆä¾‹ä¾èµ–
   â””â”€ éªŒè¯ä»£ç å®‰å…¨æ€§

2. ç¯å¢ƒå‡†å¤‡
   â”œâ”€ é€‰æ‹©/åˆ›å»ºå®¹å™¨é•œåƒ
   â”œâ”€ å®‰è£…ä¾èµ–ï¼ˆå¦‚éœ€è¦ï¼‰
   â””â”€ æŒ‚è½½ä»£ç å’Œæ•°æ®

3. æ‰§è¡Œç›‘æ§
   â”œâ”€ å¯åŠ¨å®¹å™¨
   â”œâ”€ å®æ—¶é‡‡é›†è¾“å‡º
   â”œâ”€ ç›‘æ§èµ„æºä½¿ç”¨
   â””â”€ è¶…æ—¶æ§åˆ¶

4. ç»“æœæ”¶é›†
   â”œâ”€ æ”¶é›†æ ‡å‡†è¾“å‡º
   â”œâ”€ æå–ç”Ÿæˆçš„æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€æ•°æ®ã€æŠ¥å‘Šï¼‰
   â”œâ”€ è§£æç»“æœå…ƒæ•°æ®
   â””â”€ æ¸…ç†å®¹å™¨

5. ç»“æœå¤„ç†
   â”œâ”€ ç»“æœæ ‡å‡†åŒ–
   â”œâ”€ ä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨
   â”œâ”€ ç”Ÿæˆç»“æœæ‘˜è¦
   â””â”€ æ›´æ–°ä¼šè¯çŠ¶æ€
```

#### æ¨¡å—4: ç»“æœå±•ç¤ºæœåŠ¡ (Results Presentation Service)
**èŒè´£**: æ ‡å‡†åŒ–ã€ç¾è§‚ã€æ˜“æ‡‚çš„ç»“æœå±•ç¤º

**ç»“æœç±»å‹ä¸æ¨¡æ¿**:

1. **å›¾è¡¨ç±»ç»“æœ**
   - 2Dæ›²çº¿å›¾ï¼ˆmatplotlib/plotlyï¼‰
   - 3Dè¡¨é¢å›¾
   - ç­‰å€¼çº¿å›¾
   - çŸ¢é‡åœºå›¾
   - åŠ¨ç”»æ¼”åŒ–å›¾
   - ç»Ÿè®¡å›¾è¡¨

   **å±•ç¤ºæ¨¡æ¿**:
   ```html
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ“Š [å›¾è¡¨æ ‡é¢˜]                         â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                     â”‚
   â”‚        [äº¤äº’å¼å›¾è¡¨åŒºåŸŸ]                â”‚
   â”‚                                     â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ ğŸ“ è¯´æ˜: [å›¾è¡¨å«ä¹‰è¯´æ˜]               â”‚
   â”‚ ğŸ“ å‚æ•°: [å…³é”®å‚æ•°åˆ—è¡¨]               â”‚
   â”‚ ğŸ’¡ æ´å¯Ÿ: [AIè‡ªåŠ¨ç”Ÿæˆçš„å…³é”®å‘ç°]        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

2. **æ•°æ®è¡¨æ ¼ç±»**
   - è®¡ç®—ç»“æœè¡¨
   - å‚æ•°å¯¹æ¯”è¡¨
   - è¯¯å·®åˆ†æè¡¨
   - æ€§èƒ½ç»Ÿè®¡è¡¨

   **å±•ç¤ºæ¨¡æ¿**:
   ```html
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ“‹ [è¡¨æ ¼æ ‡é¢˜]                         â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ [å¯æ’åºã€å¯ç­›é€‰çš„æ•°æ®è¡¨æ ¼]             â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ ğŸ“Š ç»Ÿè®¡: è¡Œæ•°ã€åˆ—æ•°ã€å…³é”®æŒ‡æ ‡          â”‚
   â”‚ ğŸ’¾ å¯¼å‡º: CSVã€Excel                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

3. **æ•°å€¼ç»“æœç±»**
   - å•ä¸€è®¡ç®—ç»“æœ
   - æ”¶æ•›æ€§æŒ‡æ ‡
   - è¯¯å·®æŒ‡æ ‡
   - æ€§èƒ½æŒ‡æ ‡

   **å±•ç¤ºæ¨¡æ¿**:
   ```html
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ”¢ [è®¡ç®—ç»“æœ]                         â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ [å¤§å·æ•°å€¼ + å•ä½]                     â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ ğŸ¯ é¢„æœŸèŒƒå›´: [min ~ max]             â”‚
   â”‚ âœ… éªŒè¯çŠ¶æ€: [é€šè¿‡/è­¦å‘Š/å¤±è´¥]          â”‚
   â”‚ ğŸ“– ç‰©ç†æ„ä¹‰: [ç»“æœè§£é‡Š]               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

4. **æ–‡æœ¬æŠ¥å‘Šç±»**
   - è®¡ç®—æ—¥å¿—
   - åˆ†ææŠ¥å‘Š
   - æ€»ç»“æ–‡æ¡£
   - æ•™å­¦è¯´æ˜

   **å±•ç¤ºæ¨¡æ¿**:
   ```html
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ“„ [æŠ¥å‘Šæ ‡é¢˜]                         â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ [Markdownæ¸²æŸ“çš„æŠ¥å‘Šå†…å®¹]              â”‚
   â”‚ - æ”¯æŒæ ‡é¢˜å±‚çº§                        â”‚
   â”‚ - æ”¯æŒä»£ç å—                          â”‚
   â”‚ - æ”¯æŒLaTeXå…¬å¼                       â”‚
   â”‚ - æ”¯æŒå¼•ç”¨é“¾æ¥                        â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ ğŸ’¾ å¯¼å‡º: PDFã€Wordã€Markdown         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

5. **å¤šåª’ä½“ç»“æœ**
   - åŠ¨ç”»æ–‡ä»¶ï¼ˆGIFã€MP4ï¼‰
   - äº¤äº’å¼3Dåœºæ™¯
   - éŸ³é¢‘ç»“æœ

**ç»“æœæ ‡å‡†åŒ–åè®®**:
```json
{
  "execution_id": "uuid",
  "status": "success",
  "execution_time": 12.5,
  "results": [
    {
      "type": "plot",
      "title": "æ‰©æ•£è¿‡ç¨‹æ¼”åŒ–",
      "file_path": "s3://results/uuid/plot_1.png",
      "thumbnail": "s3://results/uuid/plot_1_thumb.png",
      "metadata": {
        "plot_type": "2d_line",
        "x_label": "ä½ç½® x (m)",
        "y_label": "æµ“åº¦ C (mg/L)",
        "data_points": 100,
        "description": "æ±¡æŸ“ç‰©æµ“åº¦éšæ—¶é—´çš„ç©ºé—´åˆ†å¸ƒ"
      },
      "insights": [
        "å³°å€¼æµ“åº¦ä» 10.5 mg/L é™è‡³ 2.3 mg/L",
        "æ±¡æŸ“å¸¦å®½åº¦ä» 0.5m æ‰©å±•è‡³ 3.2m",
        "ç¬¦åˆé«˜æ–¯æ‰©æ•£ç†è®º"
      ]
    },
    {
      "type": "table",
      "title": "è¯¯å·®åˆ†æ",
      "columns": ["æ ¼å¼", "L2è¯¯å·®", "Lâˆè¯¯å·®", "è®¡ç®—æ—¶é—´"],
      "data": [
        ["æ˜¾å¼", "1.23e-4", "3.45e-4", "0.05s"],
        ["éšå¼", "2.34e-4", "5.67e-4", "0.12s"],
        ["C-N", "5.67e-5", "1.23e-4", "0.08s"]
      ],
      "insights": [
        "Crank-Nicolsonæ ¼å¼ç²¾åº¦æœ€é«˜",
        "æ˜¾å¼æ ¼å¼é€Ÿåº¦æœ€å¿«"
      ]
    },
    {
      "type": "metric",
      "title": "æœ€ç»ˆæµ“åº¦å³°å€¼",
      "value": 2.34,
      "unit": "mg/L",
      "expected_range": [2.0, 3.0],
      "status": "normal",
      "explanation": "ç¬¦åˆç†è®ºé¢„æœŸï¼Œæ‰©æ•£å……åˆ†"
    },
    {
      "type": "report",
      "title": "è®¡ç®—æ€»ç»“",
      "content_markdown": "## ä¸»è¦ç»“è®º\n\n1. æ•°å€¼æ¨¡æ‹Ÿä¸è§£æè§£å»åˆè‰¯å¥½...",
      "file_path": "s3://results/uuid/report.md"
    }
  ],
  "console_output": "[stdout content]",
  "errors": null,
  "resource_usage": {
    "cpu_time": 10.2,
    "memory_peak": "256MB",
    "disk_usage": "15MB"
  }
}
```

#### æ¨¡å—5: AIåŠ©æ‰‹æœåŠ¡ (AI Assistant Service)
**èŒè´£**: å…¨æ–¹ä½æ™ºèƒ½è¾…åŠ©å­¦ä¹ å’Œç¼–ç¨‹

**AIèƒ½åŠ›çŸ©é˜µ**:

| åœºæ™¯ | åŠŸèƒ½ | è¾“å…¥ | è¾“å‡º | æ¨¡å‹é€‰æ‹© |
|------|------|------|------|---------|
| çŸ¥è¯†é—®ç­” | å›ç­”ç†è®ºé—®é¢˜ | ç”¨æˆ·æé—® + æ•™æä¸Šä¸‹æ–‡ | è¯¦ç»†è§£ç­” | GPT-4 / Claude |
| ä»£ç è®²è§£ | è§£é‡Šä»£ç é€»è¾‘ | ä»£ç ç‰‡æ®µ | é€è¡Œæ³¨é‡Š + æµç¨‹è¯´æ˜ | GPT-4 |
| é”™è¯¯è¯Šæ–­ | åˆ†æä»£ç é”™è¯¯ | ä»£ç  + é”™è¯¯ä¿¡æ¯ | é”™è¯¯åŸå›  + ä¿®å¤å»ºè®® | GPT-4 |
| å‚æ•°å»ºè®® | æ¨èå‚æ•°è®¾ç½® | æ¡ˆä¾‹ç±»å‹ + ç›®æ ‡ | å‚æ•°èŒƒå›´ + ç†ç”± | GPT-3.5 |
| ç»“æœè§£è¯» | åˆ†æè®¡ç®—ç»“æœ | ç»“æœæ•°æ® + å›¾è¡¨ | æ´å¯Ÿ + å»ºè®® | GPT-4-Vision |
| ä»£ç ä¼˜åŒ– | æ”¹è¿›ä»£ç è´¨é‡ | ä»£ç  | ä¼˜åŒ–å»ºè®® + ç¤ºä¾‹ | GPT-4 |
| æ‰©å±•å­¦ä¹  | æ¨èç›¸å…³å†…å®¹ | å½“å‰æ¡ˆä¾‹ + å­¦ä¹ å†å² | æ¨èåˆ—è¡¨ + å­¦ä¹ è·¯å¾„ | RAG + GPT-3.5 |

**RAGçŸ¥è¯†åº“æ„å»º**:
```python
çŸ¥è¯†åº“ç´¢å¼•ç»“æ„:
â”œâ”€ ä¹¦ç±å…ƒæ•°æ®
â”‚  â”œâ”€ ä¹¦åã€ä½œè€…ã€ç›®å½•
â”‚  â””â”€ å­¦ä¹ ç›®æ ‡ã€å‰ç½®çŸ¥è¯†
â”‚
â”œâ”€ ç« èŠ‚å†…å®¹
â”‚  â”œâ”€ ç†è®ºè®²è§£ï¼ˆå‘é‡åŒ–ï¼‰
â”‚  â”œâ”€ å…¬å¼åº“ï¼ˆLaTeX + è¯­ä¹‰ï¼‰
â”‚  â””â”€ æ¦‚å¿µå›¾è°±
â”‚
â”œâ”€ æ¡ˆä¾‹åº“
â”‚  â”œâ”€ æ¡ˆä¾‹èƒŒæ™¯ä¸ç›®æ ‡
â”‚  â”œâ”€ æ ¸å¿ƒç†è®º
â”‚  â”œâ”€ ä»£ç æ³¨é‡Šï¼ˆå¢å¼ºï¼‰
â”‚  â””â”€ å¸¸è§é—®é¢˜ FAQ
â”‚
â””â”€ æ‰§è¡Œå†å²
   â”œâ”€ ç”¨æˆ·é—®é¢˜ + ç­”æ¡ˆ
   â”œâ”€ ä»£ç ä¿®æ”¹è®°å½•
   â””â”€ ç»“æœä¸åé¦ˆ
```

**å¯¹è¯ç®¡ç†**:
```python
ConversationManager {
    # ç»´æŠ¤ä¸Šä¸‹æ–‡çª—å£
    context_window: list[Message]
    max_tokens: 8000
    
    # çŸ¥è¯†æ£€ç´¢
    retrieve_relevant_knowledge(query) -> list[Document]
    
    # å¤šè½®å¯¹è¯
    handle_followup(question, history) -> Answer
    
    # æ„å›¾è¯†åˆ«
    classify_intent(question) -> Intent {
        types: [
            "theory_question",      # ç†è®ºé—®é¢˜
            "code_explanation",     # ä»£ç è®²è§£
            "error_help",          # é”™è¯¯æ±‚åŠ©
            "parameter_advice",    # å‚æ•°å»ºè®®
            "result_analysis",     # ç»“æœåˆ†æ
            "general_chat"         # ä¸€èˆ¬å¯¹è¯
        ]
    }
    
    # å“åº”ç”Ÿæˆ
    generate_response(intent, context, knowledge) -> Response
}
```

**AIç¼–ç¨‹åŠ©æ‰‹åŠŸèƒ½**:
1. **æ™ºèƒ½è¡¥å…¨**
   - åŸºäºä¸Šä¸‹æ–‡çš„ä»£ç è¡¥å…¨
   - APIæ–‡æ¡£å³æ—¶æŸ¥è¯¢
   - ä»£ç ç‰‡æ®µæ¨è

2. **é”™è¯¯ä¿®å¤**
   - è‡ªåŠ¨è¯†åˆ«å¸¸è§é”™è¯¯
   - æä¾›ä¿®å¤å»ºè®®
   - ä¸€é”®åº”ç”¨ä¿®å¤

3. **ä»£ç é‡æ„**
   - å˜é‡é‡å‘½å
   - å‡½æ•°æå–
   - ä»£ç ç®€åŒ–

4. **æµ‹è¯•ç”Ÿæˆ**
   - è‡ªåŠ¨ç”Ÿæˆå•å…ƒæµ‹è¯•
   - è¾¹ç•Œæ¡ä»¶æµ‹è¯•
   - æ€§èƒ½æµ‹è¯•

#### æ¨¡å—6: ä¾èµ–ç®¡ç†æœåŠ¡ (Dependency Management Service)
**èŒè´£**: è‡ªåŠ¨åŒ–ã€æ™ºèƒ½åŒ–çš„ä¾èµ–åº“ç®¡ç†

**æ ¸å¿ƒæœºåˆ¶**:

1. **ä¾èµ–è§£æ**
   ```python
   def analyze_dependencies(case_path):
       """åˆ†ææ¡ˆä¾‹çš„ä¾èµ–å…³ç³»"""
       dependencies = {
           "direct": [],      # ç›´æ¥ä¾èµ–ï¼ˆrequirements.txtï¼‰
           "indirect": [],    # é—´æ¥ä¾èµ–ï¼ˆä¼ é€’ä¾èµ–ï¼‰
           "system": [],      # ç³»ç»Ÿä¾èµ–
           "conflicts": []    # å†²çªæ£€æµ‹
       }
       
       # è§£æ requirements.txt
       # é™æ€åˆ†æ import è¯­å¥
       # æ£€æµ‹ç‰ˆæœ¬å…¼å®¹æ€§
       
       return dependencies
   ```

2. **é•œåƒæ„å»ºç­–ç•¥**
   ```
   åŸºç¡€é•œåƒå±‚æ¬¡:
   
   L1: Python 3.11 åŸºç¡€é•œåƒ (python:3.11-slim)
       â””â”€ 200MB
   
   L2: ç§‘å­¦è®¡ç®—åŸºç¡€å±‚ (é¢„è£…å¸¸ç”¨åº“)
       â”œâ”€ numpy, scipy, matplotlib
       â”œâ”€ pandas, scikit-learn
       â””â”€ +300MB = 500MB total
   
   L3: é¢†åŸŸä¸“ç”¨å±‚ï¼ˆæŒ‰ä¹¦ç±åˆ†ç±»ï¼‰
       â”œâ”€ æ°´åˆ©å·¥ç¨‹: hydraulics-libs
       â”œâ”€ æ§åˆ¶ç†è®º: control-libs
       â””â”€ +100MB = 600MB total
   
   L4: æ¡ˆä¾‹å±‚ï¼ˆä¸´æ—¶ï¼‰
       â”œâ”€ æ¡ˆä¾‹ç‰¹å®šä¾èµ–
       â””â”€ +50MB = 650MB total
   ```

3. **ä¾èµ–ç¼“å­˜**
   ```python
   DependencyCache {
       # åŒ…ç¼“å­˜
       pip_cache: "/cache/pip"
       
       # é•œåƒç¼“å­˜
       image_cache: {
           "base": "engineeringedu/base:latest",
           "scientific": "engineeringedu/scientific:latest",
           "hydraulics": "engineeringedu/hydraulics:latest",
           ...
       }
       
       # ç¼“å­˜ç­–ç•¥
       cache_policy: {
           "hit_rate": 0.85,  # ç¼“å­˜å‘½ä¸­ç‡ç›®æ ‡
           "ttl": 86400,      # ç¼“å­˜æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰
           "max_size": "10GB" # æœ€å¤§ç¼“å­˜å¤§å°
       }
   }
   ```

4. **å¿«é€Ÿç¯å¢ƒåˆå§‹åŒ–**
   ```
   å†·å¯åŠ¨ä¼˜åŒ–ç›®æ ‡: < 5ç§’
   
   ä¼˜åŒ–ç­–ç•¥:
   1. é¢„çƒ­å¸¸ç”¨é•œåƒï¼ˆæ¯å°æ—¶æ„å»ºï¼‰
   2. ä¾èµ–é¢„å®‰è£…ï¼ˆ90%çš„æ¡ˆä¾‹é€šç”¨ä¾èµ–ï¼‰
   3. é•œåƒå±‚å¤ç”¨ï¼ˆDocker layer cachingï¼‰
   4. å¹¶è¡Œåˆå§‹åŒ–ï¼ˆä¾èµ–å®‰è£…å¹¶è¡Œï¼‰
   5. å¢é‡æ›´æ–°ï¼ˆåªå®‰è£…å·®å¼‚ä¾èµ–ï¼‰
   ```

---

## ğŸ’» ä¸‰ã€å‰ç«¯ç•Œé¢è®¾è®¡

### 3.1 æ•´ä½“å¸ƒå±€

**ä¸»ç•Œé¢ - å­¦ä¹ å·¥ä½œå°**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ å·¥ç¨‹å­¦ä¹ å¹³å°                  [é€šçŸ¥] [ç”¨æˆ·] [è®¾ç½®]                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚               â”‚                                                     â”‚
â”‚  ğŸ“š æ•™æç›®å½•   â”‚  ğŸ“– çŸ¥è¯†å†…å®¹åŒº                                       â”‚
â”‚               â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”œâ”€æ°´ç¯å¢ƒæ¨¡æ‹Ÿ  â”‚  â”‚ # æ¡ˆä¾‹1: æ±¡æŸ“ç‰©åœ¨é™æ°´ä¸­çš„æ‰©æ•£                  â”‚  â”‚
â”‚  â”‚ â”œâ”€ç¬¬1ç«    â”‚  â”‚                                                â”‚  â”‚
â”‚  â”‚ â”‚ â”œæ¡ˆä¾‹1  â”‚  â”‚ ## æ¡ˆä¾‹èƒŒæ™¯                                     â”‚  â”‚
â”‚  â”‚ â”‚ â”œæ¡ˆä¾‹2  â”‚  â”‚ æŸå®éªŒå®¤æ°´æ§½ï¼ˆé•¿10m...                          â”‚  â”‚
â”‚  â”‚ â”‚ â””æ¡ˆä¾‹3  â”‚  â”‚                                                â”‚  â”‚
â”‚  â”‚ â”œâ”€ç¬¬2ç«    â”‚  â”‚ ## æ ¸å¿ƒç†è®º                                     â”‚  â”‚
â”‚  â”‚ â””â”€ç¬¬3ç«    â”‚  â”‚ [LaTeXå…¬å¼æ¸²æŸ“]                                 â”‚  â”‚
â”‚  â”‚           â”‚  â”‚                                                â”‚  â”‚
â”‚  â”œâ”€æ°´ç³»ç»Ÿæ§åˆ¶  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”œâ”€æ˜æ¸ æ°´åŠ›å­¦  â”‚                                                     â”‚
â”‚  â””â”€...        â”‚  ğŸ’¬ AIåŠ©æ‰‹é¢æ¿ (å¯å±•å¼€/æ”¶èµ·)                         â”‚
â”‚               â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  ğŸ¯ å­¦ä¹ è¿›åº¦   â”‚  â”‚ ğŸ¤– æœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ                         â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ [å¯¹è¯å†å²...]                                  â”‚  â”‚
â”‚  â”‚ 45%     â”‚  â”‚  â”‚                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ å¿«æ·é—®é¢˜:                                       â”‚  â”‚
â”‚               â”‚  â”‚ â€¢ è§£é‡Šæ‰©æ•£æ–¹ç¨‹                                  â”‚  â”‚
â”‚  ğŸ“Š ç»Ÿè®¡       â”‚  â”‚ â€¢ Crank-Nicolsonæ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ                   â”‚  â”‚
â”‚  å­¦ä¹ æ—¶é•¿: 32h â”‚  â”‚ â€¢ å¦‚ä½•é€‰æ‹©æ—¶é—´æ­¥é•¿ï¼Ÿ                            â”‚  â”‚
â”‚  å®Œæˆæ¡ˆä¾‹: 15  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚               â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ä»£ç æ‰§è¡Œç•Œé¢

**ä»£ç å·¥ä½œå° (Code Workspace)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’» æ¡ˆä¾‹1: æ±¡æŸ“ç‰©æ‰©æ•£ - ä»£ç å·¥ä½œå°                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ“– ç†è®º]  [ğŸ’» ä»£ç ]  [â–¶ï¸ è¿è¡Œ]  [ğŸ“Š ç»“æœ]  [ğŸ’¬ AIåŠ©æ‰‹]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚               â”‚                                     â”‚               â”‚
â”‚  ğŸ“ æ–‡ä»¶æ ‘    â”‚  ğŸ“ ä»£ç ç¼–è¾‘å™¨                        â”‚  ğŸ“‹ æ–‡ä»¶ä¿¡æ¯   â”‚
â”‚               â”‚                                     â”‚               â”‚
â”‚  â”œâ”€ main.py   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  main.py     â”‚
â”‚  â”œâ”€ models/   â”‚  â”‚ 1 """                           â”‚ â”‚  280 è¡Œ       â”‚
â”‚  â”‚  â””â”€diff... â”‚  â”‚ 2 æ¡ˆä¾‹1ï¼šæ±¡æŸ“ç‰©åœ¨é™æ°´ä¸­çš„æ‰©æ•£     â”‚ â”‚  8.5 KB      â”‚
â”‚  â””â”€ utils/    â”‚  â”‚ 3 """                           â”‚ â”‚              â”‚
â”‚     â”œâ”€plot... â”‚  â”‚ 4                               â”‚ â”‚  ğŸ¤– AIè®²è§£    â”‚
â”‚     â””â”€val...  â”‚  â”‚ 5 import numpy as np            â”‚ â”‚  [å¯ç”¨]       â”‚
â”‚               â”‚  â”‚ 6 import matplotlib.pyplot...   â”‚ â”‚              â”‚
â”‚  ğŸ”§ è¿è¡Œé…ç½®   â”‚  â”‚ 7                               â”‚ â”‚  âœï¸ ä¿®æ”¹å†å²  â”‚
â”‚               â”‚  â”‚ 8 def main():                   â”‚ â”‚  [æŸ¥çœ‹diff]   â”‚
â”‚  å‚æ•°è®¾ç½®:     â”‚  â”‚ 9     """ä¸»å‡½æ•°"""               â”‚ â”‚              â”‚
â”‚  â”œâ”€ L: 10.0m  â”‚  â”‚10     print("="*60)            â”‚ â”‚  ğŸ’¡ å¿«æ·æ“ä½œ  â”‚
â”‚  â”œâ”€ T: 100.0s â”‚  â”‚11     print("æ¡ˆä¾‹1: ...")        â”‚ â”‚  â€¢ æ ¼å¼åŒ–ä»£ç  â”‚
â”‚  â”œâ”€ nx: 100   â”‚  â”‚12                               â”‚ â”‚  â€¢ è¿è¡Œé€‰ä¸­è¡Œ â”‚
â”‚  â””â”€ nt: 1000  â”‚  â”‚13     # é—®é¢˜å‚æ•°                 â”‚ â”‚  â€¢ æ’å…¥ç‰‡æ®µ   â”‚
â”‚               â”‚  â”‚14     L = 10.0  # æ°´æ§½é•¿åº¦      â”‚ â”‚              â”‚
â”‚  â–¶ï¸ [è¿è¡Œ]     â”‚  â”‚15     T = 100.0 # æ¨¡æ‹Ÿæ—¶é—´      â”‚ â”‚              â”‚
â”‚  â¸ï¸ [æš‚åœ]     â”‚  â”‚...                              â”‚ â”‚              â”‚
â”‚  â¹ï¸ [åœæ­¢]     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚
â”‚               â”‚                                     â”‚               â”‚
â”‚  â±ï¸ æ‰§è¡Œä¸­...  â”‚  ğŸ’¬ AIä»£ç åŠ©æ‰‹                       â”‚               â”‚
â”‚  è¿›åº¦: 78%    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚
â”‚  è€—æ—¶: 8.2s   â”‚  â”‚ ç¬¬14è¡Œåˆ›å»ºäº†ç©ºé—´ç½‘æ ¼ï¼Œä½¿ç”¨linspace â”‚ â”‚              â”‚
â”‚               â”‚  â”‚ å‡½æ•°ç”Ÿæˆnxä¸ªå‡åŒ€åˆ†å¸ƒçš„ç‚¹ã€‚è¿™æ˜¯æœ‰é™ â”‚ â”‚              â”‚
â”‚               â”‚  â”‚ å·®åˆ†æ³•çš„åŸºç¡€æ­¥éª¤...               â”‚ â”‚              â”‚
â”‚               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚
â”‚               â”‚                                     â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Ÿ æ§åˆ¶å°è¾“å‡º                                       [æ¸…ç©º] [ä¸‹è½½æ—¥å¿—] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [2025-11-03 10:23:45] æ¡ˆä¾‹1ï¼šæ±¡æŸ“ç‰©åœ¨é™æ°´ä¸­çš„æ‰©æ•£                   â”‚
â”‚  [2025-11-03 10:23:45] ============================================  â”‚
â”‚  [2025-11-03 10:23:46] é—®é¢˜å‚æ•°:                                     â”‚
â”‚  [2025-11-03 10:23:46]   æ°´æ§½é•¿åº¦: L = 10.0 m                        â”‚
â”‚  [2025-11-03 10:23:46]   æ¨¡æ‹Ÿæ—¶é—´: T = 100.0 s                       â”‚
â”‚  [2025-11-03 10:23:46]   ç©ºé—´ç½‘æ ¼: nx = 100                          â”‚
â”‚  [2025-11-03 10:23:47] âœ“ æ˜¾å¼æ ¼å¼æ±‚è§£å®Œæˆ                            â”‚
â”‚  [2025-11-03 10:23:48] âœ“ éšå¼æ ¼å¼æ±‚è§£å®Œæˆ                            â”‚
â”‚  [2025-11-03 10:23:49] âœ“ Crank-Nicolsonæ ¼å¼æ±‚è§£å®Œæˆ                 â”‚
â”‚  [2025-11-03 10:23:50] âœ“ å·²ä¿å­˜: diffusion_explicit_evolution.png   â”‚
â”‚  [2025-11-03 10:23:50] âœ“ æ‰§è¡ŒæˆåŠŸ                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 ç»“æœå±•ç¤ºç•Œé¢

**ç»“æœä»ªè¡¨æ¿ (Results Dashboard)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š æ‰§è¡Œç»“æœ - æ¡ˆä¾‹1                        [å¯¼å‡ºæŠ¥å‘Š] [åˆ†äº«] [æ”¶è—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… æ‰§è¡ŒæˆåŠŸ  â”‚  â±ï¸ è€—æ—¶: 12.5s  â”‚  ğŸ’¾ å†…å­˜: 256MB  â”‚  ğŸ”„ ç¬¬3æ¬¡è¿è¡Œ  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ğŸ“ˆ å›¾è¡¨ç»“æœ (3ä¸ª)                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      â”‚                      â”‚                 â”‚  â”‚
â”‚  â”‚   [å›¾1: æ‰©æ•£æ¼”åŒ–]     â”‚   [å›¾2: æ ¼å¼å¯¹æ¯”]     â”‚   [å›¾3: è¯¯å·®]   â”‚  â”‚
â”‚  â”‚                      â”‚                      â”‚                 â”‚  â”‚
â”‚  â”‚  [3D Surface Plot]   â”‚  [Multiple Lines]    â”‚  [Bar Chart]    â”‚  â”‚
â”‚  â”‚                      â”‚                      â”‚                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  [ç‚¹å‡»æŸ¥çœ‹å¤§å›¾] [åˆ‡æ¢äº¤äº’æ¨¡å¼] [ä¸‹è½½ PNG/SVG]                         â”‚
â”‚                                                                     â”‚
â”‚  ğŸ’¡ AIæ™ºèƒ½æ´å¯Ÿ                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ¯ å…³é”®å‘ç°:                                                   â”‚  â”‚
â”‚  â”‚  1. æµ“åº¦å³°å€¼ä» 10.5 mg/L è¡°å‡è‡³ 2.3 mg/Lï¼Œç¬¦åˆç†è®ºé¢„æœŸ         â”‚  â”‚
â”‚  â”‚  2. Crank-Nicolsonæ ¼å¼ç²¾åº¦æœ€é«˜ï¼ŒL2è¯¯å·® 5.67e-5                â”‚  â”‚
â”‚  â”‚  3. æ˜¾å¼æ ¼å¼åœ¨ Fo=0.45 æ—¶ä¿æŒç¨³å®šï¼Œæ¥è¿‘ç¨³å®šæ€§æé™               â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚ ğŸ’¡ å»ºè®®:                                                        â”‚  â”‚
â”‚  â”‚  â€¢ å¯ä»¥å°è¯•å¢åŠ ç½‘æ ¼å¯†åº¦ï¼ˆnx=200ï¼‰è§‚å¯Ÿç²¾åº¦æå‡                   â”‚  â”‚
â”‚  â”‚  â€¢ å»ºè®®å¯¹æ¯”ä¸åŒæ‰©æ•£ç³»æ•°ï¼ˆD=0.005, 0.02ï¼‰çš„å½±å“                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“‹ æ•°æ®è¡¨æ ¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ ¼å¼         â”‚  L2è¯¯å·®    â”‚  Lâˆè¯¯å·®    â”‚  è®¡ç®—æ—¶é—´  â”‚  ç¨³å®šæ€§  â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ æ˜¾å¼ FTCS    â”‚  1.23e-4   â”‚  3.45e-4   â”‚  0.05s    â”‚  æ¡ä»¶   â”‚  â”‚
â”‚  â”‚ éšå¼ BTCS    â”‚  2.34e-4   â”‚  5.67e-4   â”‚  0.12s    â”‚  æ— æ¡ä»¶ â”‚  â”‚
â”‚  â”‚ Crank-Nicolsonâ”‚ 5.67e-5   â”‚  1.23e-4   â”‚  0.08s    â”‚  æ— æ¡ä»¶ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  [æ’åº] [ç­›é€‰] [å¯¼å‡ºCSV]                                             â”‚
â”‚                                                                     â”‚
â”‚  ğŸ”¢ å…³é”®æŒ‡æ ‡                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æœ€ç»ˆå³°å€¼æµ“åº¦  â”‚  æ±¡æŸ“å¸¦å®½åº¦   â”‚  è´¨é‡å®ˆæ’è¯¯å·® â”‚   æ”¶æ•›æ€§       â”‚  â”‚
â”‚  â”‚              â”‚              â”‚              â”‚                â”‚  â”‚
â”‚  â”‚   2.34       â”‚    3.2       â”‚   0.05%      â”‚   âœ… å·²æ”¶æ•›    â”‚  â”‚
â”‚  â”‚   mg/L       â”‚    m         â”‚              â”‚   (8æ¬¡è¿­ä»£)    â”‚  â”‚
â”‚  â”‚              â”‚              â”‚              â”‚                â”‚  â”‚
â”‚  â”‚ [æ­£å¸¸èŒƒå›´]    â”‚  [æ­£å¸¸]       â”‚  [ä¼˜ç§€]       â”‚  [é€šè¿‡]        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“„ è®¡ç®—æŠ¥å‘Š                                          [å±•å¼€æŸ¥çœ‹å…¨æ–‡]  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ## è®¡ç®—æ€»ç»“                                                    â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚ æœ¬æ¬¡æ¨¡æ‹ŸæˆåŠŸå¤ç°äº†æ±¡æŸ“ç‰©åœ¨é™æ°´ä¸­çš„ä¸€ç»´æ‰©æ•£è¿‡ç¨‹...              â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚ ### ä¸»è¦ç»“è®º                                                   â”‚  â”‚
â”‚  â”‚ 1. ä¸‰ç§æ•°å€¼æ ¼å¼å‡èƒ½æœ‰æ•ˆæ±‚è§£æ‰©æ•£æ–¹ç¨‹...                          â”‚  â”‚
â”‚  â”‚ [æŠ˜å å†…å®¹...]                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  ğŸ¬ åŠ¨ä½œé¢æ¿                                                         â”‚
â”‚  [ğŸ”„ ä¿®æ”¹å‚æ•°é‡è·‘] [ğŸ“Š å¯¹æ¯”ä¸Šæ¬¡ç»“æœ] [ğŸ’¬ è¯¢é—®AI] [ğŸ“¤ å¯¼å‡ºå®Œæ•´æŠ¥å‘Š]   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 AIå¯¹è¯ç•Œé¢

**AIå­¦ä¹ åŠ©æ‰‹ç•Œé¢**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– AIå­¦ä¹ åŠ©æ‰‹                                   [æ–°å¯¹è¯] [å†å²è®°å½•]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ğŸ‘¤ ç”¨æˆ·: ä¸ºä»€ä¹ˆCrank-Nicolsonæ ¼å¼æ¯”æ˜¾å¼æ ¼å¼ç²¾åº¦é«˜ï¼Ÿ                  â”‚
â”‚  â° 2025-11-03 10:25:30                                             â”‚
â”‚                                                                     â”‚
â”‚  ğŸ¤– AIåŠ©æ‰‹:                                                          â”‚
â”‚  â° 2025-11-03 10:25:35                                             â”‚
â”‚                                                                     â”‚
â”‚  å¾ˆå¥½çš„é—®é¢˜ï¼è®©æˆ‘ä»å‡ ä¸ªè§’åº¦ä¸ºä½ è§£é‡Šï¼š                                â”‚
â”‚                                                                     â”‚
â”‚  ## 1. æ—¶é—´ç¦»æ•£ç²¾åº¦                                                  â”‚
â”‚                                                                     â”‚
â”‚  **æ˜¾å¼æ ¼å¼ (FTCS)**:                                               â”‚
â”‚  - ä½¿ç”¨å‰å‘å·®åˆ†è¿‘ä¼¼æ—¶é—´å¯¼æ•°ï¼šâˆ‚C/âˆ‚t â‰ˆ (C^(n+1) - C^n) / Î”t          â”‚
â”‚  - æˆªæ–­è¯¯å·®: O(Î”t)  ğŸ‘‰ **ä¸€é˜¶æ—¶é—´ç²¾åº¦**                             â”‚
â”‚                                                                     â”‚
â”‚  **Crank-Nicolsonæ ¼å¼**:                                            â”‚
â”‚  - åœ¨ n å’Œ n+1 æ—¶åˆ»å–å¹³å‡ï¼Œç›¸å½“äºä¸­å¿ƒå·®åˆ†                            â”‚
â”‚  - æˆªæ–­è¯¯å·®: O(Î”tÂ²) ğŸ‘‰ **äºŒé˜¶æ—¶é—´ç²¾åº¦**                             â”‚
â”‚                                                                     â”‚
â”‚  ğŸ’¡ ç®€å•è¯´ï¼šæ—¶é—´æ­¥é•¿å‡åŠæ—¶                                           â”‚
â”‚  - æ˜¾å¼æ ¼å¼è¯¯å·®å‡å°‘ 1/2                                              â”‚
â”‚  - C-Næ ¼å¼è¯¯å·®å‡å°‘ 1/4                                              â”‚
â”‚                                                                     â”‚
â”‚  ## 2. æ•°å€¼è‰²æ•£                                                      â”‚
â”‚                                                                     â”‚
â”‚  [æ’å…¥å›¾è¡¨: ä¸åŒæ ¼å¼çš„æ•°å€¼è§£å¯¹æ¯”]                                     â”‚
â”‚                                                                     â”‚
â”‚  ä½ å¯ä»¥åœ¨åˆšæ‰çš„ç»“æœä¸­çœ‹åˆ°ï¼ŒC-Næ ¼å¼çš„æ›²çº¿æœ€æ¥è¿‘ç†è®ºçš„é«˜æ–¯åˆ†å¸ƒã€‚        â”‚
â”‚                                                                     â”‚
â”‚  ## 3. ç›¸å…³ä»£ç                                                       â”‚
â”‚                                                                     â”‚
â”‚  ```python                                                          â”‚
â”‚  # æ˜¾å¼æ ¼å¼ (ä¸€é˜¶æ—¶é—´)                                               â”‚
â”‚  C_new[i] = C[i] + Fo * (C[i+1] - 2*C[i] + C[i-1])                 â”‚
â”‚                                                                     â”‚
â”‚  # C-Næ ¼å¼ (äºŒé˜¶æ—¶é—´ - æ—¶é—´ä¸Šå–å¹³å‡)                                â”‚
â”‚  # å·¦ç«¯: éšå¼é¡¹  å³ç«¯: æ˜¾å¼é¡¹                                        â”‚
â”‚  A @ C_new = B @ C  # å¹³å‡äº†ä¸¤ä¸ªæ—¶åˆ»                                â”‚
â”‚  ```                                                                â”‚
â”‚                                                                     â”‚
â”‚  ğŸ”— **ç›¸å…³èµ„æº**:                                                    â”‚
â”‚  â€¢ [æ•™æ Â§2.3: æ•°å€¼æ ¼å¼ç²¾åº¦åˆ†æ]                                     â”‚
â”‚  â€¢ [æ¡ˆä¾‹3: æ•°å€¼è‰²æ•£ä¸è€—æ•£]                                           â”‚
â”‚                                                                     â”‚
â”‚  ğŸ’¬ **è¿½é—®å»ºè®®**:                                                    â”‚
â”‚  â€¢ "ä»€ä¹ˆæƒ…å†µä¸‹é€‰æ‹©æ˜¾å¼æ ¼å¼ï¼Ÿ"                                        â”‚
â”‚  â€¢ "å¦‚ä½•åˆ†ææ•°å€¼æ ¼å¼çš„ç¨³å®šæ€§ï¼Ÿ"                                      â”‚
â”‚  â€¢ "èƒ½å¦æ¼”ç¤ºä¿®æ”¹Fourieræ•°çš„å½±å“ï¼Ÿ"                                   â”‚
â”‚                                                                     â”‚
â”‚  [ğŸ‘ æœ‰å¸®åŠ©] [ğŸ‘ éœ€æ”¹è¿›] [ğŸ’¬ ç»§ç»­è¿½é—®]                               â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¬ [è¾“å…¥ä½ çš„é—®é¢˜æˆ–æŒ‡ä»¤...] å¿«æ·æ“ä½œ: [è®²è§£ä»£ç ] [è¯Šæ–­é”™è¯¯] [ä¼˜åŒ–å»ºè®®]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ å››ã€æŠ€æœ¯å®ç°ç»†èŠ‚

### 4.1 ä¼šè¯éš”ç¦»æ–¹æ¡ˆ

**éš”ç¦»çº§åˆ«**:
```python
UserSession {
    # 1. æ•°æ®åº“éš”ç¦»
    mongodb_collection: f"sessions_{user_id}"
    
    # 2. æ–‡ä»¶ç³»ç»Ÿéš”ç¦»
    workspace_dir: f"/workspaces/{session_id}"
    
    # 3. å®¹å™¨éš”ç¦»
    docker_network: f"user_{user_id}_net"
    container_name: f"exec_{session_id}"
    
    # 4. ç¼“å­˜éš”ç¦»
    redis_namespace: f"session:{session_id}"
    
    # 5. èµ„æºé…é¢
    resource_limits: {
        "max_sessions_per_user": 5,
        "max_executions_per_session": 100,
        "max_storage_per_session": "1GB",
        "session_ttl": 86400  # 24å°æ—¶
    }
}
```

**å¹¶å‘æ§åˆ¶**:
```python
class SessionManager:
    async def acquire_execution_slot(self, user_id: int):
        """è·å–æ‰§è¡Œæ§½ä½"""
        key = f"exec_slots:{user_id}"
        current = await redis.incr(key)
        
        if current > MAX_CONCURRENT_EXECUTIONS:
            await redis.decr(key)
            raise TooManyExecutionsError()
        
        await redis.expire(key, 300)  # 5åˆ†é’Ÿ
        return current
    
    async def release_execution_slot(self, user_id: int):
        """é‡Šæ”¾æ‰§è¡Œæ§½ä½"""
        await redis.decr(f"exec_slots:{user_id}")
```

### 4.2 å®æ—¶é€šä¿¡æ–¹æ¡ˆ

**WebSocketæ¶æ„**:
```python
# åç«¯ WebSocket ç®¡ç†å™¨
class WSConnectionManager:
    def __init__(self):
        self.active_connections: Dict[str, WebSocket] = {}
    
    async def connect(self, session_id: str, websocket: WebSocket):
        await websocket.accept()
        self.active_connections[session_id] = websocket
    
    async def send_progress(self, session_id: str, progress: dict):
        """å‘é€æ‰§è¡Œè¿›åº¦"""
        ws = self.active_connections.get(session_id)
        if ws:
            await ws.send_json({
                "type": "progress",
                "data": progress
            })
    
    async def send_output(self, session_id: str, output: str):
        """å‘é€å®æ—¶è¾“å‡º"""
        ws = self.active_connections.get(session_id)
        if ws:
            await ws.send_json({
                "type": "output",
                "data": {"text": output}
            })
    
    async def send_result(self, session_id: str, result: dict):
        """å‘é€æœ€ç»ˆç»“æœ"""
        ws = self.active_connections.get(session_id)
        if ws:
            await ws.send_json({
                "type": "result",
                "data": result
            })

# FastAPI ç«¯ç‚¹
@app.websocket("/ws/execution/{session_id}")
async def websocket_execution(websocket: WebSocket, session_id: str):
    await manager.connect(session_id, websocket)
    try:
        while True:
            data = await websocket.receive_text()
            # å¤„ç†å®¢æˆ·ç«¯æ¶ˆæ¯ï¼ˆæš‚åœã€åœæ­¢ç­‰ï¼‰
            await handle_ws_command(session_id, data)
    except WebSocketDisconnect:
        manager.disconnect(session_id)
```

**å‰ç«¯è®¢é˜…**:
```typescript
// React Hook for WebSocket
function useExecutionStream(sessionId: string) {
    const [progress, setProgress] = useState(0);
    const [output, setOutput] = useState<string[]>([]);
    const [result, setResult] = useState(null);
    
    useEffect(() => {
        const ws = new WebSocket(`ws://api/ws/execution/${sessionId}`);
        
        ws.onmessage = (event) => {
            const msg = JSON.parse(event.data);
            
            switch(msg.type) {
                case 'progress':
                    setProgress(msg.data.percentage);
                    break;
                case 'output':
                    setOutput(prev => [...prev, msg.data.text]);
                    break;
                case 'result':
                    setResult(msg.data);
                    break;
            }
        };
        
        return () => ws.close();
    }, [sessionId]);
    
    return { progress, output, result };
}
```

### 4.3 ç»“æœæ ‡å‡†åŒ–æµç¨‹

**ç»“æœè§£æå™¨**:
```python
class ResultParser:
    """è§£æè„šæœ¬è¾“å‡ºå¹¶æ ‡å‡†åŒ–"""
    
    async def parse(self, execution_result: dict) -> StandardizedResult:
        """
        è§£ææ‰§è¡Œç»“æœ
        
        è¾“å…¥: Dockeræ‰§è¡ŒåŸå§‹è¾“å‡º
        è¾“å‡º: æ ‡å‡†åŒ–ç»“æœå¯¹è±¡
        """
        result = StandardizedResult(
            execution_id=execution_result['task_id'],
            status=execution_result['status'],
            execution_time=execution_result['execution_time']
        )
        
        # 1. æ‰«æè¾“å‡ºç›®å½•
        output_files = self._scan_output_dir(execution_result['output_dir'])
        
        # 2. åˆ†ç±»æ–‡ä»¶
        for file_path in output_files:
            file_type = self._detect_file_type(file_path)
            
            if file_type == 'image':
                result.add_plot(await self._process_image(file_path))
            elif file_type == 'csv':
                result.add_table(await self._process_csv(file_path))
            elif file_type == 'json':
                result.add_data(await self._process_json(file_path))
            elif file_type == 'markdown':
                result.add_report(await self._process_markdown(file_path))
        
        # 3. è§£ææ§åˆ¶å°è¾“å‡º
        console_metrics = self._extract_metrics(
            execution_result['console_output']
        )
        result.add_metrics(console_metrics)
        
        # 4. AIå¢å¼º - ç”Ÿæˆæ´å¯Ÿ
        insights = await self.ai_service.generate_insights(result)
        result.insights = insights
        
        # 5. ä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨
        await self._upload_results(result)
        
        return result
    
    def _detect_file_type(self, file_path: str) -> str:
        """æ£€æµ‹æ–‡ä»¶ç±»å‹"""
        ext = os.path.splitext(file_path)[1].lower()
        
        type_map = {
            '.png': 'image', '.jpg': 'image', '.svg': 'image',
            '.csv': 'csv', '.xlsx': 'excel',
            '.json': 'json',
            '.md': 'markdown', '.txt': 'text',
            '.mp4': 'video', '.gif': 'animation'
        }
        
        return type_map.get(ext, 'unknown')
    
    async def _process_image(self, file_path: str) -> PlotResult:
        """å¤„ç†å›¾åƒæ–‡ä»¶"""
        # ç”Ÿæˆç¼©ç•¥å›¾
        thumbnail = await self._generate_thumbnail(file_path)
        
        # æå–å›¾åƒå…ƒæ•°æ®
        metadata = await self._extract_image_metadata(file_path)
        
        # AIè¯†åˆ«å›¾è¡¨ç±»å‹å’Œå†…å®¹
        description = await self.ai_service.describe_plot(file_path)
        
        return PlotResult(
            title=metadata.get('title', 'æœªå‘½åå›¾è¡¨'),
            file_path=file_path,
            thumbnail=thumbnail,
            metadata=metadata,
            description=description
        )
    
    async def _process_csv(self, file_path: str) -> TableResult:
        """å¤„ç†CSVè¡¨æ ¼"""
        import pandas as pd
        
        df = pd.read_csv(file_path)
        
        # åŸºç¡€ç»Ÿè®¡
        stats = {
            'rows': len(df),
            'columns': len(df.columns),
            'summary': df.describe().to_dict()
        }
        
        # AIç”Ÿæˆè¡¨æ ¼è¯´æ˜
        description = await self.ai_service.describe_table(df)
        
        return TableResult(
            title=os.path.basename(file_path),
            columns=list(df.columns),
            data=df.to_dict('records'),
            statistics=stats,
            description=description
        )
```

**AIæ´å¯Ÿç”Ÿæˆå™¨**:
```python
class InsightGenerator:
    """åŸºäºAIçš„ç»“æœæ´å¯Ÿç”Ÿæˆ"""
    
    async def generate_insights(self, result: StandardizedResult) -> List[Insight]:
        """ç”Ÿæˆæ™ºèƒ½æ´å¯Ÿ"""
        insights = []
        
        # 1. æ•°å€¼åˆ†æ
        if result.metrics:
            insights.extend(
                await self._analyze_metrics(result.metrics)
            )
        
        # 2. å›¾è¡¨åˆ†æ
        if result.plots:
            for plot in result.plots:
                insights.extend(
                    await self._analyze_plot(plot)
                )
        
        # 3. è¶‹åŠ¿è¯†åˆ«
        if result.has_time_series():
            insights.extend(
                await self._analyze_trends(result)
            )
        
        # 4. å¼‚å¸¸æ£€æµ‹
        anomalies = await self._detect_anomalies(result)
        if anomalies:
            insights.extend(anomalies)
        
        # 5. å¯¹æ¯”åˆ†æï¼ˆå¦‚æœæœ‰å†å²æ•°æ®ï¼‰
        if result.has_comparison_data():
            insights.extend(
                await self._compare_with_history(result)
            )
        
        return insights
    
    async def _analyze_metrics(self, metrics: Dict) -> List[Insight]:
        """åˆ†ææ•°å€¼æŒ‡æ ‡"""
        prompt = f"""
        åˆ†æä»¥ä¸‹è®¡ç®—ç»“æœï¼Œæä¾›å…³é”®æ´å¯Ÿï¼š
        
        {json.dumps(metrics, indent=2)}
        
        è¯·è¯†åˆ«ï¼š
        1. å…³é”®å‘ç°ï¼ˆæ•°å€¼æ„ä¹‰ï¼‰
        2. æ˜¯å¦ç¬¦åˆé¢„æœŸ
        3. å¼‚å¸¸å€¼æˆ–è­¦å‘Š
        4. æ”¹è¿›å»ºè®®
        
        ä»¥ç®€æ´çš„è¦ç‚¹å½¢å¼å›ç­”ï¼Œæ¯æ¡ä¸è¶…è¿‡30å­—ã€‚
        """
        
        response = await self.llm.generate(prompt)
        
        return self._parse_insights(response)
```

### 4.4 Dockeræ‰§è¡Œä¼˜åŒ–

**å®¹å™¨æ± ç®¡ç†**:
```python
class ContainerPool:
    """å®¹å™¨æ±  - å¤ç”¨å®¹å™¨æå‡æ€§èƒ½"""
    
    def __init__(self, pool_size: int = 10):
        self.pool_size = pool_size
        self.available: asyncio.Queue = asyncio.Queue(maxsize=pool_size)
        self.in_use: Set[str] = set()
        
        # é¢„çƒ­å®¹å™¨æ± 
        asyncio.create_task(self._warm_up_pool())
    
    async def _warm_up_pool(self):
        """é¢„çƒ­å®¹å™¨æ± """
        for i in range(self.pool_size):
            container = await self._create_container(f"pool_container_{i}")
            await self.available.put(container)
    
    async def acquire(self, timeout: float = 30.0) -> Container:
        """è·å–å®¹å™¨"""
        try:
            container = await asyncio.wait_for(
                self.available.get(),
                timeout=timeout
            )
            self.in_use.add(container.id)
            
            # é‡ç½®å®¹å™¨çŠ¶æ€
            await self._reset_container(container)
            
            return container
            
        except asyncio.TimeoutError:
            # æ± æ»¡ï¼Œåˆ›å»ºä¸´æ—¶å®¹å™¨
            return await self._create_container(f"temp_{uuid.uuid4()}")
    
    async def release(self, container: Container):
        """é‡Šæ”¾å®¹å™¨"""
        if container.id in self.in_use:
            self.in_use.remove(container.id)
            
            # æ¸…ç†å®¹å™¨
            await self._cleanup_container(container)
            
            # æ”¾å›æ± ä¸­
            if self.available.qsize() < self.pool_size:
                await self.available.put(container)
            else:
                # æ± å·²æ»¡ï¼Œé”€æ¯å®¹å™¨
                await container.remove(force=True)
    
    async def _reset_container(self, container: Container):
        """é‡ç½®å®¹å™¨çŠ¶æ€"""
        # æ¸…ç©ºå·¥ä½œç›®å½•
        await container.exec_run("rm -rf /workspace/*")
        
        # é‡ç½®ç¯å¢ƒå˜é‡
        # ...
    
    async def _cleanup_container(self, container: Container):
        """æ¸…ç†å®¹å™¨"""
        # åœæ­¢æ‰€æœ‰è¿›ç¨‹
        await container.exec_run("pkill -9 python")
        
        # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
        await container.exec_run("rm -rf /tmp/*")
```

**åˆ†å±‚é•œåƒæ„å»º**:
```dockerfile
# ============================================
# Layer 1: åŸºç¡€é•œåƒ
# ============================================
FROM python:3.11-slim AS base

RUN apt-get update && apt-get install -y \
    gcc g++ gfortran \
    libblas-dev liblapack-dev \
    && rm -rf /var/lib/apt/lists/*

# ============================================
# Layer 2: ç§‘å­¦è®¡ç®—åŸºç¡€
# ============================================
FROM base AS scientific

COPY requirements_scientific.txt /tmp/
RUN pip install --no-cache-dir -r /tmp/requirements_scientific.txt

# numpy, scipy, matplotlib, pandas, scikit-learn

# ============================================
# Layer 3: é¢†åŸŸä¸“ç”¨åº“
# ============================================
FROM scientific AS hydraulics

COPY requirements_hydraulics.txt /tmp/
RUN pip install --no-cache-dir -r /tmp/requirements_hydraulics.txt

# æ°´åˆ©å·¥ç¨‹ç‰¹å®šåº“

# ============================================
# Layer 4: å·¥ä½œç¯å¢ƒ
# ============================================
FROM hydraulics AS runtime

WORKDIR /workspace
ENV PYTHONPATH=/workspace

# å¤åˆ¶æ‰§è¡Œè„šæœ¬
COPY executor/run_script.py /usr/local/bin/
RUN chmod +x /usr/local/bin/run_script.py

ENTRYPOINT ["python", "/usr/local/bin/run_script.py"]
```

### 4.5 ç¼“å­˜ç­–ç•¥

**å¤šçº§ç¼“å­˜**:
```python
class CacheManager:
    """å¤šçº§ç¼“å­˜ç®¡ç†"""
    
    def __init__(self):
        # L1: å†…å­˜ç¼“å­˜ï¼ˆæœ€çƒ­æ•°æ®ï¼‰
        self.memory_cache = LRUCache(maxsize=1000)
        
        # L2: Redisç¼“å­˜ï¼ˆå¸¸ç”¨æ•°æ®ï¼‰
        self.redis_cache = Redis()
        
        # L3: MongoDBç¼“å­˜ï¼ˆå®Œæ•´æ•°æ®ï¼‰
        self.mongo_cache = MongoDB()
    
    async def get_execution_result(self, execution_id: str):
        """è·å–æ‰§è¡Œç»“æœï¼ˆä¸‰çº§ç¼“å­˜ï¼‰"""
        
        # L1: å†…å­˜
        result = self.memory_cache.get(execution_id)
        if result:
            return result
        
        # L2: Redis
        result = await self.redis_cache.get(f"exec:{execution_id}")
        if result:
            result = json.loads(result)
            self.memory_cache[execution_id] = result
            return result
        
        # L3: MongoDB
        result = await self.mongo_cache.find_one({"execution_id": execution_id})
        if result:
            # å†™å›ä¸Šå±‚ç¼“å­˜
            await self.redis_cache.setex(
                f"exec:{execution_id}",
                3600,  # 1å°æ—¶
                json.dumps(result)
            )
            self.memory_cache[execution_id] = result
            return result
        
        return None
    
    async def cache_execution_result(self, result: dict):
        """ç¼“å­˜æ‰§è¡Œç»“æœ"""
        execution_id = result['execution_id']
        
        # å†™å…¥æ‰€æœ‰å±‚çº§
        self.memory_cache[execution_id] = result
        
        await self.redis_cache.setex(
            f"exec:{execution_id}",
            3600,
            json.dumps(result)
        )
        
        await self.mongo_cache.insert_one(result)
```

---

## ğŸ“Š äº”ã€æ€§èƒ½ä¸æ‰©å±•æ€§

### 5.1 æ€§èƒ½ç›®æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | å½“å‰åŸºçº¿ | ä¼˜åŒ–æ–¹æ¡ˆ |
|------|------|---------|---------|
| ä»£ç åŠ è½½ | < 500ms | 2s | é¢„åŠ è½½ + ç¼“å­˜ |
| ç¯å¢ƒåˆå§‹åŒ– | < 3s | 15s | é•œåƒåˆ†å±‚ + å®¹å™¨æ±  |
| è„šæœ¬æ‰§è¡Œ | å–å†³äºç®—æ³• | N/A | èµ„æºç›‘æ§ |
| ç»“æœå±•ç¤º | < 1s | N/A | CDN + é¢„æ¸²æŸ“ |
| AIå“åº” | < 3s | 5s | æµå¼è¾“å‡º + ç¼“å­˜ |
| å¹¶å‘ç”¨æˆ· | 1000+ | 100 | æ¨ªå‘æ‰©å±• |
| ä¼šè¯å®¹é‡ | 10000+ | 1000 | åˆ†ç‰‡ + è‡ªåŠ¨æ¸…ç† |

### 5.2 æ‰©å±•æ€§è®¾è®¡

**æ°´å¹³æ‰©å±•**:
```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ LoadBalancer â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                â”‚                â”‚
     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
     â”‚ API-1   â”‚      â”‚ API-2   â”‚     â”‚ API-N   â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
          â”‚                â”‚                â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                â”‚                â”‚
     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
     â”‚Executor1â”‚      â”‚Executor2â”‚     â”‚ExecutorNâ”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä»»åŠ¡è°ƒåº¦**:
```python
# Celeryé…ç½®
CELERY_CONFIG = {
    'broker_url': 'redis://redis:6379/0',
    'result_backend': 'redis://redis:6379/1',
    
    # ä»»åŠ¡è·¯ç”±
    'task_routes': {
        'execute_script': {'queue': 'execution'},
        'generate_insights': {'queue': 'ai'},
        'process_results': {'queue': 'processing'},
    },
    
    # å·¥ä½œè¿›ç¨‹
    'worker_concurrency': 10,
    'worker_max_tasks_per_child': 100,
    
    # ä»»åŠ¡é™åˆ¶
    'task_time_limit': 600,  # 10åˆ†é’Ÿ
    'task_soft_time_limit': 540,
    
    # ä¼˜å…ˆçº§
    'task_priority': {
        'high': 9,
        'normal': 5,
        'low': 1
    }
}
```

### 5.3 ç›‘æ§ä¸å‘Šè­¦

**ç›‘æ§æŒ‡æ ‡**:
```python
# Prometheus metrics
from prometheus_client import Counter, Histogram, Gauge

# æ‰§è¡Œç»Ÿè®¡
execution_total = Counter(
    'executions_total',
    'Total number of executions',
    ['status', 'book', 'case']
)

execution_duration = Histogram(
    'execution_duration_seconds',
    'Execution duration',
    buckets=[1, 5, 10, 30, 60, 300, 600]
)

# ç³»ç»Ÿè´Ÿè½½
active_sessions = Gauge(
    'active_sessions',
    'Number of active user sessions'
)

container_pool_size = Gauge(
    'container_pool_available',
    'Available containers in pool'
)

# AIæœåŠ¡
ai_request_total = Counter(
    'ai_requests_total',
    'Total AI requests',
    ['type', 'model']
)

ai_response_time = Histogram(
    'ai_response_time_seconds',
    'AI response time'
)
```

---

## ğŸ›¡ï¸ å…­ã€å®‰å…¨ä¸åˆè§„

### 6.1 ä»£ç æ‰§è¡Œå®‰å…¨

**å¤šå±‚é˜²æŠ¤**:
```python
# 1. ä»£ç é™æ€åˆ†æ
async def validate_code_safety(code: str) -> Tuple[bool, List[str]]:
    """éªŒè¯ä»£ç å®‰å…¨æ€§"""
    issues = []
    
    # ç¦æ­¢çš„æ¨¡å—
    forbidden_modules = [
        'os.system', 'subprocess.Popen', 'eval', 'exec',
        'open', '__import__', 'compile', 'input'
    ]
    
    # ASTåˆ†æ
    try:
        tree = ast.parse(code)
        
        for node in ast.walk(tree):
            # æ£€æŸ¥å¯¼å…¥
            if isinstance(node, ast.Import):
                for alias in node.names:
                    if alias.name in ['os', 'subprocess', 'sys']:
                        issues.append(f"ç¦æ­¢å¯¼å…¥å±é™©æ¨¡å—: {alias.name}")
            
            # æ£€æŸ¥å‡½æ•°è°ƒç”¨
            if isinstance(node, ast.Call):
                if isinstance(node.func, ast.Name):
                    if node.func.id in ['eval', 'exec', '__import__']:
                        issues.append(f"ç¦æ­¢ä½¿ç”¨å±é™©å‡½æ•°: {node.func.id}")
    
    except SyntaxError as e:
        issues.append(f"è¯­æ³•é”™è¯¯: {e}")
    
    return len(issues) == 0, issues


# 2. èµ„æºé™åˆ¶
CONTAINER_LIMITS = {
    'cpus': '2.0',
    'memory': '1g',
    'pids_limit': 100,
    'ulimits': [
        docker.types.Ulimit(name='nofile', soft=1024, hard=2048),
        docker.types.Ulimit(name='nproc', soft=512, hard=1024),
    ]
}


# 3. ç½‘ç»œéš”ç¦»
NETWORK_CONFIG = {
    'network_mode': 'none',  # é»˜è®¤æ— ç½‘ç»œ
    'dns': [],
    'extra_hosts': {}
}


# 4. æ–‡ä»¶ç³»ç»Ÿæƒé™
VOLUME_CONFIG = {
    '/workspace/code': {'bind': '/code', 'mode': 'ro'},  # åªè¯»
    '/workspace/output': {'bind': '/output', 'mode': 'rw'},  # å¯å†™
    '/tmp': {'bind': '/tmp', 'mode': 'rw', 'size': '100m'}  # ä¸´æ—¶ï¼Œé™åˆ¶å¤§å°
}
```

### 6.2 æ•°æ®éš”ç¦»

**ç”¨æˆ·æ•°æ®éš”ç¦»**:
```python
class DataIsolation:
    """ç¡®ä¿ç”¨æˆ·æ•°æ®å®Œå…¨éš”ç¦»"""
    
    @staticmethod
    def get_user_workspace(user_id: int, session_id: str) -> Path:
        """è·å–ç”¨æˆ·å·¥ä½œåŒºè·¯å¾„"""
        base = Path("/workspaces")
        user_dir = base / f"user_{user_id}"
        session_dir = user_dir / f"session_{session_id}"
        
        # ç¡®ä¿ç›®å½•å­˜åœ¨ä¸”æƒé™æ­£ç¡®
        session_dir.mkdir(parents=True, exist_ok=True)
        os.chmod(session_dir, 0o700)  # ä»…æ‰€æœ‰è€…å¯è®¿é—®
        
        return session_dir
    
    @staticmethod
    async def cleanup_session(session_id: str):
        """æ¸…ç†ä¼šè¯æ•°æ®"""
        session_path = Path(f"/workspaces/*/session_{session_id}")
        
        for path in glob.glob(str(session_path)):
            shutil.rmtree(path, ignore_errors=True)
        
        # æ¸…ç†æ•°æ®åº“è®°å½•
        await mongo.sessions.delete_many({"session_id": session_id})
        
        # æ¸…ç†ç¼“å­˜
        await redis.delete(f"session:{session_id}:*")
```

### 6.3 æƒé™æ§åˆ¶

**ç»†ç²’åº¦æƒé™**:
```python
class PermissionChecker:
    """æƒé™æ£€æŸ¥"""
    
    @staticmethod
    async def can_execute_code(user: User, book_slug: str) -> bool:
        """æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æƒé™æ‰§è¡Œä»£ç """
        
        # 1. æ£€æŸ¥ä¹¦ç±è®¿é—®æƒé™
        book = await Book.get(slug=book_slug)
        
        if book.is_free:
            return True
        
        # 2. æ£€æŸ¥è´­ä¹°è®°å½•
        has_purchased = await Purchase.exists(
            user_id=user.id,
            book_id=book.id,
            status="completed"
        )
        
        if has_purchased:
            return True
        
        # 3. æ£€æŸ¥ä¼šå‘˜æƒé™
        if user.membership and user.membership.is_active:
            return True
        
        # 4. æ£€æŸ¥è¯•ç”¨é¢åº¦
        trial_count = await ExecutionLog.count(
            user_id=user.id,
            book_id=book.id,
            is_trial=True
        )
        
        if trial_count < book.trial_limit:
            return True
        
        return False
    
    @staticmethod
    async def check_rate_limit(user: User) -> bool:
        """æ£€æŸ¥é€Ÿç‡é™åˆ¶"""
        key = f"rate_limit:execution:{user.id}"
        
        # æ»‘åŠ¨çª—å£è®¡æ•°
        now = time.time()
        window = 3600  # 1å°æ—¶
        
        await redis.zadd(key, {str(now): now})
        await redis.zremrangebyscore(key, 0, now - window)
        
        count = await redis.zcard(key)
        
        # æ ¹æ®ç”¨æˆ·ç­‰çº§è®¾ç½®ä¸åŒé™åˆ¶
        limit = {
            'free': 10,
            'basic': 50,
            'premium': 200,
            'unlimited': float('inf')
        }.get(user.membership_level, 10)
        
        return count < limit
```

---

## ğŸ“ˆ ä¸ƒã€å®æ–½è·¯çº¿å›¾

### Phase 1: åŸºç¡€æ¶æ„æ­å»ºï¼ˆ2å‘¨ï¼‰

**Week 1: ä¼šè¯ä¸æ‰§è¡Œå¼•æ“**
- [ ] ä¼šè¯ç®¡ç†æœåŠ¡
  - ä¼šè¯CRUD API
  - ä¼šè¯çŠ¶æ€æœº
  - è¶…æ—¶è‡ªåŠ¨æ¸…ç†
- [ ] æ‰§è¡Œå¼•æ“å‡çº§
  - å®¹å™¨æ± å®ç°
  - ä¾èµ–ç®¡ç†ä¼˜åŒ–
  - WebSocketå®æ—¶é€šä¿¡

**Week 2: ä»£ç ç®¡ç†ä¸ç»“æœå±•ç¤º**
- [ ] ä»£ç æ™ºèƒ½æœåŠ¡
  - ä»£ç åŠ è½½ä¸ç‰ˆæœ¬æ§åˆ¶
  - ASTåˆ†æä¸ç»“æ„è§£æ
  - ä»£ç ç¼–è¾‘API
- [ ] ç»“æœæ ‡å‡†åŒ–
  - ç»“æœè§£æå™¨
  - å¤šæ ¼å¼æ”¯æŒï¼ˆå›¾è¡¨ã€è¡¨æ ¼ã€æ•°å€¼ã€æŠ¥å‘Šï¼‰
  - å¯¹è±¡å­˜å‚¨é›†æˆ

### Phase 2: AIå¢å¼ºåŠŸèƒ½ï¼ˆ2å‘¨ï¼‰

**Week 3: RAGçŸ¥è¯†åº“**
- [ ] çŸ¥è¯†å‘é‡åŒ–
  - æ•™æå†…å®¹å‘é‡åŒ–
  - æ¡ˆä¾‹ä»£ç å‘é‡åŒ–
  - å‘é‡æ•°æ®åº“æ„å»ºï¼ˆWeaviate/Pineconeï¼‰
- [ ] æ£€ç´¢æœåŠ¡
  - ç›¸ä¼¼åº¦æœç´¢
  - æ··åˆæ£€ç´¢ï¼ˆå‘é‡+å…³é”®è¯ï¼‰
  - ä¸Šä¸‹æ–‡æ’åº

**Week 4: AIæœåŠ¡é›†æˆ**
- [ ] AIå¯¹è¯æœåŠ¡
  - å¤šè½®å¯¹è¯ç®¡ç†
  - æ„å›¾è¯†åˆ«
  - æµå¼å“åº”
- [ ] AIå¢å¼ºåŠŸèƒ½
  - ä»£ç è®²è§£
  - é”™è¯¯è¯Šæ–­
  - ç»“æœæ´å¯Ÿç”Ÿæˆ

### Phase 3: å‰ç«¯å¼€å‘ï¼ˆ2-3å‘¨ï¼‰

**Week 5: æ ¸å¿ƒé¡µé¢**
- [ ] ä»£ç å·¥ä½œå°
  - Monaco Editoré›†æˆ
  - æ–‡ä»¶æ ‘ç»„ä»¶
  - å‚æ•°é…ç½®é¢æ¿
- [ ] æ‰§è¡Œæ§åˆ¶
  - è¿è¡Œ/æš‚åœ/åœæ­¢
  - å®æ—¶è¿›åº¦æ˜¾ç¤º
  - æ§åˆ¶å°è¾“å‡ºæµ

**Week 6: ç»“æœå±•ç¤º**
- [ ] ç»“æœä»ªè¡¨æ¿
  - å›¾è¡¨å±•ç¤ºï¼ˆChart.js/Plotlyï¼‰
  - è¡¨æ ¼ç»„ä»¶
  - æ•°å€¼å¡ç‰‡
- [ ] æŠ¥å‘Šæ¸²æŸ“
  - Markdownæ¸²æŸ“
  - LaTeXå…¬å¼æ”¯æŒ
  - å¯¼å‡ºåŠŸèƒ½

**Week 7: AIç•Œé¢**
- [ ] AIå¯¹è¯ç•Œé¢
  - èŠå¤©ç»„ä»¶
  - ä»£ç é«˜äº®
  - å¿«æ·æ“ä½œ
- [ ] AIè¾…åŠ©ç¼–ç¨‹
  - æ™ºèƒ½è¡¥å…¨
  - é”™è¯¯æç¤º
  - é‡æ„å»ºè®®

### Phase 4: æµ‹è¯•ä¸ä¼˜åŒ–ï¼ˆ1-2å‘¨ï¼‰

**Week 8: å…¨é¢æµ‹è¯•**
- [ ] åŠŸèƒ½æµ‹è¯•
  - ç«¯åˆ°ç«¯æµ‹è¯•
  - ç”¨æˆ·åœºæ™¯æµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•
  - è´Ÿè½½æµ‹è¯•
  - å‹åŠ›æµ‹è¯•
  - æ€§èƒ½ä¼˜åŒ–
- [ ] å®‰å…¨æµ‹è¯•
  - æ¸—é€æµ‹è¯•
  - ä»£ç æ³¨å…¥æµ‹è¯•
  - æƒé™æµ‹è¯•

**Week 9: ä¸Šçº¿å‡†å¤‡**
- [ ] æ–‡æ¡£å®Œå–„
  - APIæ–‡æ¡£
  - ç”¨æˆ·æ‰‹å†Œ
  - å¼€å‘è€…æŒ‡å—
- [ ] ç›‘æ§éƒ¨ç½²
  - Prometheusé…ç½®
  - Grafanaä»ªè¡¨æ¿
  - å‘Šè­¦è§„åˆ™
- [ ] ç°åº¦å‘å¸ƒ
  - å°èŒƒå›´å†…æµ‹
  - æ”¶é›†åé¦ˆ
  - è¿­ä»£ä¼˜åŒ–

---

## ğŸ’° å…«ã€èµ„æºé¢„ç®—

### 8.1 å¼€å‘èµ„æº

| è§’è‰² | äººæ•° | æ—¶é—´ | æˆæœ¬ï¼ˆä¼°ç®—ï¼‰ |
|------|------|------|-------------|
| å…¨æ ˆå·¥ç¨‹å¸ˆ | 2 | 9å‘¨ | Â¥180,000 |
| AIå·¥ç¨‹å¸ˆ | 1 | 4å‘¨ | Â¥80,000 |
| å‰ç«¯å·¥ç¨‹å¸ˆ | 1 | 6å‘¨ | Â¥60,000 |
| æµ‹è¯•å·¥ç¨‹å¸ˆ | 1 | 2å‘¨ | Â¥20,000 |
| **æ€»è®¡** | **5** | **-** | **Â¥340,000** |

### 8.2 åŸºç¡€è®¾æ–½æˆæœ¬

**æœˆåº¦è¿è¥æˆæœ¬ï¼ˆ1000å¹¶å‘ç”¨æˆ·ï¼‰**:

| é¡¹ç›® | è§„æ ¼ | æ•°é‡ | æœˆæˆæœ¬ |
|------|------|------|--------|
| APIæœåŠ¡å™¨ | 8C16G | 3 | Â¥3,600 |
| æ‰§è¡ŒæœåŠ¡å™¨ | 16C32G | 5 | Â¥10,000 |
| PostgreSQL | 4C8G | 1 | Â¥800 |
| MongoDB | 4C8G | 1 | Â¥800 |
| Redis | 2C4G | 1 | Â¥400 |
| MinIO | 8C16G 1TB | 1 | Â¥1,500 |
| Vector DB | 4C8G | 1 | Â¥1,200 |
| CDN | 10TB | - | Â¥2,000 |
| GPU (AI) | T4 | 1 | Â¥3,000 |
| ç›‘æ§å‘Šè­¦ | - | - | Â¥500 |
| **æ€»è®¡** | - | - | **Â¥23,800/æœˆ** |

**é¦–å¹´æ€»æˆæœ¬**: å¼€å‘Â¥340,000 + è¿è¥Â¥285,600 = **Â¥625,600**

### 8.3 AIæœåŠ¡æˆæœ¬

**OpenAI APIè´¹ç”¨ä¼°ç®—**ï¼ˆ1000æ´»è·ƒç”¨æˆ·ï¼‰:

| åŠŸèƒ½ | æ¨¡å‹ | æœˆè°ƒç”¨æ¬¡æ•° | æˆæœ¬ |
|------|------|-----------|------|
| çŸ¥è¯†é—®ç­” | GPT-4 | 50,000 | Â¥3,000 |
| ä»£ç è®²è§£ | GPT-4 | 30,000 | Â¥2,000 |
| ç»“æœæ´å¯Ÿ | GPT-3.5 | 100,000 | Â¥1,000 |
| å‘é‡åŒ– | text-embedding-3 | 1,000,000 | Â¥500 |
| **æ€»è®¡** | - | - | **Â¥6,500/æœˆ** |

---

## ğŸ¯ ä¹ã€æˆåŠŸæŒ‡æ ‡

### 9.1 æŠ€æœ¯æŒ‡æ ‡

- âœ… ä»£ç æ‰§è¡ŒæˆåŠŸç‡ > 99%
- âœ… å¹³å‡æ‰§è¡Œå»¶è¿Ÿ < 5ç§’ï¼ˆä¸å«è„šæœ¬è¿è¡Œæ—¶é—´ï¼‰
- âœ… ç³»ç»Ÿå¯ç”¨æ€§ > 99.5%
- âœ… å¹¶å‘æ”¯æŒ > 1000ç”¨æˆ·
- âœ… AIå“åº”æ—¶é—´ < 3ç§’

### 9.2 ç”¨æˆ·ä½“éªŒæŒ‡æ ‡

- âœ… ç”¨æˆ·ç•™å­˜ç‡ï¼ˆ30å¤©ï¼‰> 60%
- âœ… æ¡ˆä¾‹å®Œæˆç‡ > 70%
- âœ… AIæ»¡æ„åº¦è¯„åˆ† > 4.0/5.0
- âœ… å¹³å°æ¨èæ„æ„¿ï¼ˆNPSï¼‰> 50
- âœ… å¹³å‡å­¦ä¹ æ—¶é•¿/ä¼šè¯ > 30åˆ†é’Ÿ

### 9.3 ä¸šåŠ¡æŒ‡æ ‡

- âœ… æœˆæ´»è·ƒç”¨æˆ·å¢é•¿ç‡ > 20%
- âœ… ä»˜è´¹è½¬åŒ–ç‡ > 5%
- âœ… å®¢å•ä»· > Â¥500
- âœ… ç»­è´¹ç‡ï¼ˆå¹´åº¦ï¼‰> 60%

---

## ğŸ”® åã€æœªæ¥å±•æœ›

### 10.1 V3.0 è®¡åˆ’åŠŸèƒ½

1. **åä½œå­¦ä¹ **
   - å¤šäººå®æ—¶åä½œç¼–ç¨‹
   - ä»£ç ReviewåŠŸèƒ½
   - å­¦ä¹ å°ç»„

2. **è‡ªé€‚åº”å­¦ä¹ è·¯å¾„**
   - åŸºäºå­¦ä¹ æ•°æ®çš„ä¸ªæ€§åŒ–æ¨è
   - éš¾åº¦è‡ªåŠ¨è°ƒèŠ‚
   - çŸ¥è¯†å›¾è°±å¯¼èˆª

3. **ç§»åŠ¨ç«¯æ”¯æŒ**
   - å“åº”å¼è®¾è®¡
   - è½»é‡çº§ä»£ç ç¼–è¾‘
   - ç¦»çº¿å­¦ä¹ 

4. **æ›´å¤šè¯­è¨€æ”¯æŒ**
   - MATLAB/Octave
   - Rè¯­è¨€
   - Julia

5. **å¼€æ”¾å¹³å°**
   - æ•™å¸ˆä¸Šä¼ æ¡ˆä¾‹
   - ç”¨æˆ·è´¡çŒ®ä»£ç 
   - ç¤¾åŒºè¯„ä»·ä½“ç³»

### 10.2 æŠ€æœ¯æ¼”è¿›

1. **WebAssembly**
   - æµè§ˆå™¨ç«¯ä»£ç æ‰§è¡Œ
   - æ›´å¿«çš„å“åº”é€Ÿåº¦
   - é™ä½æœåŠ¡å™¨æˆæœ¬

2. **è¾¹ç¼˜è®¡ç®—**
   - CDNèŠ‚ç‚¹éƒ¨ç½²æ‰§è¡Œå¼•æ“
   - å°±è¿‘æ‰§è¡Œï¼Œé™ä½å»¶è¿Ÿ

3. **è”é‚¦å­¦ä¹ **
   - ç”¨æˆ·éšç§ä¿æŠ¤
   - åˆ†å¸ƒå¼æ¨¡å‹è®­ç»ƒ

---

## ğŸ“š åä¸€ã€é™„å½•

### 11.1 æŠ€æœ¯æ ˆæ¸…å•

**åç«¯**:
- FastAPI 0.104+
- SQLAlchemy 2.0 (å¼‚æ­¥ORM)
- PostgreSQL 15
- MongoDB 6
- Redis 7
- Celery 5.3
- Docker SDK for Python
- OpenAI / Anthropic API
- Weaviate (å‘é‡æ•°æ®åº“)
- MinIO (å¯¹è±¡å­˜å‚¨)

**å‰ç«¯**:
- Next.js 14
- React 18
- TypeScript 5
- Ant Design 5
- Monaco Editor
- Chart.js / Plotly.js
- Socket.IO Client
- React Query
- Zustand (çŠ¶æ€ç®¡ç†)

**åŸºç¡€è®¾æ–½**:
- Docker & Docker Compose
- Nginx
- Prometheus & Grafana
- Sentry
- ELK Stack (æ—¥å¿—)

### 11.2 å…³é”®æ–‡ä»¶ç»“æ„

```
platform/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚   â”‚       â”œâ”€â”€ sessions.py        # ä¼šè¯ç®¡ç†API
â”‚   â”‚   â”‚       â”œâ”€â”€ code.py            # ä»£ç ç®¡ç†API
â”‚   â”‚   â”‚       â”œâ”€â”€ execution.py       # æ‰§è¡Œæ§åˆ¶API
â”‚   â”‚   â”‚       â”œâ”€â”€ results.py         # ç»“æœAPI
â”‚   â”‚   â”‚       â””â”€â”€ ai.py              # AIæœåŠ¡API
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ session_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ code_intelligence.py   # ä»£ç æ™ºèƒ½æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ execution_engine.py    # æ‰§è¡Œå¼•æ“
â”‚   â”‚   â”‚   â”œâ”€â”€ result_parser.py       # ç»“æœè§£æ
â”‚   â”‚   â”‚   â”œâ”€â”€ ai_assistant.py        # AIåŠ©æ‰‹
â”‚   â”‚   â”‚   â””â”€â”€ dependency_manager.py  # ä¾èµ–ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ session.py
â”‚   â”‚   â”‚   â”œâ”€â”€ execution.py
â”‚   â”‚   â”‚   â””â”€â”€ result.py
â”‚   â”‚   â””â”€â”€ executor/
â”‚   â”‚       â”œâ”€â”€ container_pool.py      # å®¹å™¨æ± 
â”‚   â”‚       â”œâ”€â”€ docker_runner.py       # Dockeræ‰§è¡Œå™¨
â”‚   â”‚       â””â”€â”€ security.py            # å®‰å…¨æ£€æŸ¥
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ app/
â”‚       â”‚   â”œâ”€â”€ workspace/
â”‚       â”‚   â”‚   â””â”€â”€ [sessionId]/
â”‚       â”‚   â”‚       â””â”€â”€ page.tsx       # ä»£ç å·¥ä½œå°
â”‚       â”‚   â”œâ”€â”€ results/
â”‚       â”‚   â”‚   â””â”€â”€ [executionId]/
â”‚       â”‚   â”‚       â””â”€â”€ page.tsx       # ç»“æœå±•ç¤º
â”‚       â”‚   â””â”€â”€ ai/
â”‚       â”‚       â””â”€â”€ page.tsx           # AIå¯¹è¯
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ CodeEditor/
â”‚       â”‚   â”‚   â”œâ”€â”€ Editor.tsx
â”‚       â”‚   â”‚   â”œâ”€â”€ FileTree.tsx
â”‚       â”‚   â”‚   â””â”€â”€ ConfigPanel.tsx
â”‚       â”‚   â”œâ”€â”€ ResultDisplay/
â”‚       â”‚   â”‚   â”œâ”€â”€ PlotViewer.tsx
â”‚       â”‚   â”‚   â”œâ”€â”€ TableViewer.tsx
â”‚       â”‚   â”‚   â”œâ”€â”€ MetricCard.tsx
â”‚       â”‚   â”‚   â””â”€â”€ ReportViewer.tsx
â”‚       â”‚   â””â”€â”€ AIAssistant/
â”‚       â”‚       â”œâ”€â”€ ChatInterface.tsx
â”‚       â”‚       â””â”€â”€ CodeExplainer.tsx
â”‚       â””â”€â”€ hooks/
â”‚           â”œâ”€â”€ useExecution.ts
â”‚           â”œâ”€â”€ useSession.ts
â”‚           â””â”€â”€ useAI.ts
â”‚
â””â”€â”€ docker/
    â”œâ”€â”€ base.Dockerfile
    â”œâ”€â”€ scientific.Dockerfile
    â”œâ”€â”€ hydraulics.Dockerfile
    â””â”€â”€ docker-compose.enhanced.yml
```

### 11.3 APIæ¥å£æ–‡æ¡£ï¼ˆæ¦‚è¦ï¼‰

#### ä¼šè¯ç®¡ç†

```
POST   /api/v1/sessions/create
GET    /api/v1/sessions/{session_id}
PUT    /api/v1/sessions/{session_id}/state
DELETE /api/v1/sessions/{session_id}
```

#### ä»£ç ç®¡ç†

```
POST   /api/v1/code/load
GET    /api/v1/code/{session_id}/files
PUT    /api/v1/code/{session_id}/edit
GET    /api/v1/code/{session_id}/diff
POST   /api/v1/code/analyze
POST   /api/v1/code/explain
```

#### æ‰§è¡Œæ§åˆ¶

```
POST   /api/v1/execution/start
POST   /api/v1/execution/{execution_id}/pause
POST   /api/v1/execution/{execution_id}/stop
GET    /api/v1/execution/{execution_id}/status
WS     /ws/execution/{session_id}
```

#### ç»“æœæŸ¥è¯¢

```
GET    /api/v1/results/{execution_id}
GET    /api/v1/results/{execution_id}/plot/{plot_id}
GET    /api/v1/results/{execution_id}/table/{table_id}
GET    /api/v1/results/{execution_id}/export
```

#### AIæœåŠ¡

```
POST   /api/v1/ai/chat
POST   /api/v1/ai/explain-code
POST   /api/v1/ai/diagnose-error
POST   /api/v1/ai/generate-insights
WS     /ws/ai/{session_id}
```

---

## âœ… æ€»ç»“

æœ¬æ–¹æ¡ˆè¯¦ç»†è®¾è®¡äº†ä¸€ä¸ª**é›¶é…ç½®ã€é›¶ç¦»å¼€ã€AIå¢å¼º**çš„äº‘ç«¯æ™ºèƒ½å­¦ä¹ å¹³å°ï¼Œæ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼š

1. **å®Œæ•´çš„ä»£ç æ‰§è¡Œç¯å¢ƒ**: Dockeréš”ç¦»ã€ä¾èµ–è‡ªåŠ¨ç®¡ç†ã€å®æ—¶è¾“å‡º
2. **æ ‡å‡†åŒ–ç»“æœå±•ç¤º**: å¤šæ ¼å¼æ”¯æŒã€AIæ´å¯Ÿã€äº¤äº’å¼å¯è§†åŒ–
3. **å…¨æ–¹ä½AIè¾…åŠ©**: çŸ¥è¯†é—®ç­”ã€ä»£ç è®²è§£ã€é”™è¯¯è¯Šæ–­ã€æ™ºèƒ½ç¼–ç¨‹
4. **ä¼šè¯åŒ–å­¦ä¹ æµç¨‹**: æ‰€æœ‰æ“ä½œåœ¨å¯¹è¯è¿›ç¨‹ä¸­å®Œæˆï¼Œä¸ä¿®æ”¹å¹³å°æ•°æ®
5. **ä¼ä¸šçº§æ¶æ„**: é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€å¯æ‰©å±•ã€å®‰å…¨å¯æ§

**é¢„æœŸæ•ˆæœ**:
- ç”¨æˆ·æ— éœ€ç¦»å¼€å¹³å°å³å¯å®Œæˆå®Œæ•´å­¦ä¹ é—­ç¯
- å¤§å¹…é™ä½å­¦ä¹ é—¨æ§›ï¼ˆæ— éœ€é…ç½®ç¯å¢ƒï¼‰
- æå‡å­¦ä¹ æ•ˆç‡ï¼ˆAIå®æ—¶è¾…å¯¼ï¼‰
- æé«˜å¹³å°ç²˜æ€§å’Œå•†ä¸šä»·å€¼

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**:
1. è¯„å®¡æ–¹æ¡ˆï¼Œç¡®è®¤æŠ€æœ¯è·¯çº¿
2. ç»„å»ºå¼€å‘å›¢é˜Ÿ
3. æ­å»ºå¼€å‘ç¯å¢ƒ
4. å¯åŠ¨Phase 1å¼€å‘

---

**æ–‡æ¡£ç‰ˆæœ¬**: V2.0  
**æœ€åæ›´æ–°**: 2025-11-03  
**ç»´æŠ¤è€…**: Platform Team  
**çŠ¶æ€**: å¾…è¯„å®¡
