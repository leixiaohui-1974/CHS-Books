# ========================================
# Engineering Learning Platform - 环境配置
# ========================================

# ----------------------------------------
# 应用基本配置
# ----------------------------------------
APP_NAME="Engineering Learning Platform"
APP_ENV=development  # development | production | staging
APP_DEBUG=true
APP_VERSION=1.0.0
APP_URL=http://localhost:3000
API_URL=http://localhost:8000
SECRET_KEY=your-secret-key-change-in-production-min-32-chars

# ----------------------------------------
# 数据库配置
# ----------------------------------------
# PostgreSQL (主数据库)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=elp_db
POSTGRES_USER=elp_user
POSTGRES_PASSWORD=elp_password

# MongoDB (文档存储)
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_DB=elp_content
MONGODB_USER=elp_mongo_user
MONGODB_PASSWORD=elp_mongo_password

# Redis (缓存 & 任务队列)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=elp_redis_password

# ----------------------------------------
# JWT认证配置
# ----------------------------------------
JWT_SECRET_KEY=jwt-secret-key-change-in-production-min-32-chars
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ----------------------------------------
# OAuth配置 (社交登录)
# ----------------------------------------
# 微信登录
WECHAT_APP_ID=your_wechat_app_id
WECHAT_APP_SECRET=your_wechat_app_secret

# GitHub登录
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret

# ----------------------------------------
# 支付配置
# ----------------------------------------
# 微信支付
WECHAT_PAY_MCHID=your_merchant_id
WECHAT_PAY_API_KEY=your_api_key
WECHAT_PAY_CERT_PATH=/path/to/cert.pem
WECHAT_PAY_KEY_PATH=/path/to/key.pem

# 支付宝
ALIPAY_APP_ID=your_alipay_app_id
ALIPAY_PRIVATE_KEY=your_private_key
ALIPAY_PUBLIC_KEY=alipay_public_key

# Stripe (国际支付)
STRIPE_PUBLIC_KEY=pk_test_xxx
STRIPE_SECRET_KEY=sk_test_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx

# ----------------------------------------
# AI服务配置
# ----------------------------------------
# OpenAI
OPENAI_API_KEY=sk-xxx
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Anthropic Claude
ANTHROPIC_API_KEY=sk-ant-xxx
ANTHROPIC_MODEL=claude-3-sonnet-20240229

# 文心一言
BAIDU_API_KEY=your_baidu_api_key
BAIDU_SECRET_KEY=your_baidu_secret_key

# 向量数据库
WEAVIATE_URL=http://localhost:8080
WEAVIATE_API_KEY=your_weaviate_api_key

# Pinecone
PINECONE_API_KEY=your_pinecone_api_key
PINECONE_ENVIRONMENT=us-east-1-aws
PINECONE_INDEX_NAME=elp-embeddings

# ----------------------------------------
# 对象存储配置 (MinIO / S3)
# ----------------------------------------
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET_NAME=elp-storage
S3_REGION=us-east-1
S3_USE_SSL=false

# AWS S3 (生产环境)
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=elp-production

# ----------------------------------------
# 邮件服务配置
# ----------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_email_password
SMTP_FROM=noreply@example.com
SMTP_FROM_NAME="Engineering Learning Platform"

# ----------------------------------------
# 短信服务配置 (阿里云/腾讯云)
# ----------------------------------------
SMS_PROVIDER=aliyun  # aliyun | tencent
ALIYUN_ACCESS_KEY=your_aliyun_access_key
ALIYUN_ACCESS_SECRET=your_aliyun_access_secret
SMS_SIGN_NAME=工程学习平台
SMS_TEMPLATE_CODE=SMS_123456789

# ----------------------------------------
# CDN配置
# ----------------------------------------
CDN_DOMAIN=https://cdn.example.com
CDN_ENABLED=false

# ----------------------------------------
# 脚本执行引擎配置
# ----------------------------------------
EXECUTOR_TYPE=docker  # docker | kubernetes | lambda
DOCKER_IMAGE=elp-python-runner:latest
EXECUTOR_TIMEOUT=30  # 秒
EXECUTOR_MAX_MEMORY=512m
EXECUTOR_MAX_CPU=1

# ----------------------------------------
# 内容扫描器配置
# ----------------------------------------
BOOKS_PATH=/workspace/books
SCANNER_INTERVAL=300  # 秒 (5分钟)
AUTO_SCAN_ENABLED=true

# ----------------------------------------
# Celery任务队列配置
# ----------------------------------------
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# ----------------------------------------
# 监控与日志配置
# ----------------------------------------
# Sentry (错误追踪)
SENTRY_DSN=https://xxx@sentry.io/xxx
SENTRY_ENVIRONMENT=development

# 日志级别
LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR | CRITICAL

# Prometheus
PROMETHEUS_PORT=9090

# ----------------------------------------
# 速率限制配置
# ----------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ----------------------------------------
# CORS配置
# ----------------------------------------
CORS_ORIGINS=http://localhost:3000,https://www.example.com
CORS_ALLOW_CREDENTIALS=true

# ----------------------------------------
# 前端配置
# ----------------------------------------
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX  # Google Analytics
NEXT_PUBLIC_SENTRY_DSN=https://xxx@sentry.io/xxx

# ----------------------------------------
# 功能开关
# ----------------------------------------
FEATURE_AI_ASSISTANT=true
FEATURE_SOCIAL_LOGIN=true
FEATURE_PAYMENT=true
FEATURE_COMMUNITY=true
FEATURE_CERTIFICATE=false
FEATURE_LIVE_CLASS=false

# ----------------------------------------
# 商业配置
# ----------------------------------------
FREE_TRIAL_DAYS=7
SUBSCRIPTION_PRICE_MONTHLY=99
SUBSCRIPTION_PRICE_YEARLY=899
BOOK_PRICE_DEFAULT=299

# ----------------------------------------
# 测试配置
# ----------------------------------------
TEST_DATABASE_URL=postgresql://test_user:test_password@localhost:5432/test_db
TEST_REDIS_URL=redis://localhost:6379/15
