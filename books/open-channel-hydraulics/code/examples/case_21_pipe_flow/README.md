# 案例21：城市供水管道水力计算

## 案例背景

某城市新建住宅小区需要设计供水管道系统。已知设计流量Q=50 L/s，管道长度L=500 m，管道材质为钢管（粗糙度ε=0.05 mm）。需要计算管道沿程水头损失，并选择合理的管径。

管道参数：
- 设计流量 Q = 50 L/s = 0.05 m³/s
- 管道长度 L = 500 m
- 管道粗糙度 ε = 0.05 mm（钢管）
- 水温 T = 20°C（运动粘度 ν = 1.0×10⁻⁶ m²/s）
- 候选管径 D = 200, 250, 300, 350, 400 mm

分析目标：
1. 不同管径下的流速和雷诺数
2. 摩阻系数的计算（Colebrook-White方程）
3. 沿程水头损失计算（达西-魏斯巴赫公式）
4. 经济管径的选择

## 学习目标

1. 掌握达西-魏斯巴赫公式
2. 理解雷诺数的物理意义
3. 学会使用Colebrook-White方程计算摩阻系数
4. 了解Moody图的应用
5. 掌握管道水力计算的基本流程

## 核心理论

### 1. 达西-魏斯巴赫公式（Darcy-Weisbach Formula）

**沿程水头损失：**
```
h_f = λ * (L/D) * (v²/2g)
```

其中：
- h_f：沿程水头损失 (m)
- λ：摩阻系数（达西摩阻系数，无量纲）
- L：管道长度 (m)
- D：管道内径 (m)
- v：平均流速 (m/s)
- g：重力加速度 (m/s²)

**物理意义：**
- 沿程损失与管长成正比
- 沿程损失与流速平方成正比
- 沿程损失与管径成反比

### 2. 雷诺数（Reynolds Number）

**定义：**
```
Re = v*D/ν = ρ*v*D/μ
```

其中：
- v：平均流速 (m/s)
- D：管道内径 (m)
- ν：运动粘度 (m²/s)
- ρ：密度 (kg/m³)
- μ：动力粘度 (Pa·s)

**流态判别：**
- Re < 2320：层流（Laminar Flow）
- 2320 < Re < 4000：过渡区（Transition）
- Re > 4000：紊流（Turbulent Flow）

**层流摩阻系数：**
```
λ = 64/Re
```

### 3. Colebrook-White方程

**紊流区摩阻系数（隐式方程）：**
```
1/√λ = -2.0 * log₁₀(ε/(3.7*D) + 2.51/(Re*√λ))
```

其中：
- ε：管壁绝对粗糙度 (m)
- ε/D：相对粗糙度（无量纲）

**求解方法：**
1. 迭代法（Newton-Raphson）
2. 显式近似公式（Swamee-Jain）

**Swamee-Jain显式近似公式：**
```
λ = 0.25 / [log₁₀(ε/(3.7*D) + 5.74/Re^0.9)]²
```

误差范围：-1% ~ +3%（4000 < Re < 10⁸，10⁻⁶ < ε/D < 10⁻²）

### 4. Moody图

Moody图是展示摩阻系数λ与雷诺数Re、相对粗糙度ε/D关系的经典图表。

**图表分区：**
- 层流区：λ = 64/Re（直线）
- 过渡区：λ复杂变化
- 完全紊流区（粗糙管区）：λ仅与ε/D有关

### 5. 连续性方程

**流量-流速关系：**
```
Q = A * v = (π*D²/4) * v
```

**管径-流速关系：**
```
v = 4*Q/(π*D²)
```

### 6. 常见管材粗糙度

| 管材 | 绝对粗糙度 ε (mm) |
|-----|------------------|
| 拉制铜管、铅管、玻璃管 | 0.0015 ~ 0.01 |
| 拔制钢管 | 0.05 |
| 镀锌钢管 | 0.15 |
| 铸铁管（新） | 0.25 |
| 铸铁管（旧） | 1.5 ~ 3.0 |
| 混凝土管 | 0.3 ~ 3.0 |
| 塑料管（PVC, PE） | 0.0015 ~ 0.007 |

## 计算任务

### 任务1：不同管径的水力计算

计算D = 200, 250, 300, 350, 400 mm时的：
- 流速v
- 雷诺数Re
- 摩阻系数λ
- 沿程水头损失h_f

### 任务2：经济管径选择

综合考虑：
- 流速限制（一般0.5~3.0 m/s，推荐1.0~2.0 m/s）
- 水头损失（影响泵的扬程）
- 管材造价（管径越大，造价越高）

### 任务3：粗糙度影响分析

对比新管（ε=0.05 mm）和旧管（ε=1.5 mm）的水头损失差异。

### 任务4：流量变化分析

分析流量变化（Q = 30, 40, 50, 60, 70 L/s）对水头损失的影响。

## 使用方法

```python
# 运行主程序
python main.py

# 运行实验
python experiments.py
```

## 预期结果

- 掌握管道水力计算基本流程
- 理解摩阻系数的物理意义
- 学会使用Colebrook-White方程
- 能够进行管径选择和优化

## 工程意义

本案例展示了：
1. 城市供水管道设计的基本方法
2. 达西-魏斯巴赫公式的实际应用
3. 摩阻系数计算的重要性
4. 管径选择的经济性考虑
5. 为管网平衡计算打基础

## 设计要点

1. **流速控制**: 0.5~3.0 m/s，避免过低（沉积）或过高（冲刷）
2. **压力要求**: 住宅用户最低供水压力28 m（0.28 MPa）
3. **管材选择**: 根据水质、压力、经济性综合考虑
4. **水头损失**: 影响泵站扬程和运行费用
5. **安全系数**: 考虑管道老化、结垢等因素

## 扩展阅读

- 《给水排水管网系统》
- 《城市供水工程》
- ISO 4179: 水力学光滑管流摩阻系数
- 《建筑给水排水设计规范》GB 50015
