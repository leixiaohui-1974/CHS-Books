# 案例6：跌水消能设计

## 案例背景

某山区灌溉渠道，地形陡峭，需要设置跌水建筑物消除多余能量，防止下游渠道冲刷。

工程参数：
- 上游流量 Q = 5.0 m³/s
- 渠道宽度 b = 2.5 m
- 跌水落差 Δz = 2.0 m
- 上游水深 h1 = 1.2 m
- 渠道糙率 n = 0.020

设计要求：
1. 计算跌水后的水深和流速
2. 判断是否发生水跃
3. 设计消力池尺寸
4. 计算能量消减率
5. 优化消能工设计

## 学习目标

1. 理解跌水的水力特性
2. 掌握水跃计算方法
3. 学会消力池设计
4. 了解能量消散原理
5. 掌握消能工优化方法

## 核心理论

### 1. 跌水水力学

**跌水的作用：**
- 衔接不同高程的渠段
- 消除多余能量
- 防止冲刷破坏
- 稳定下游水流

**跌水类型：**
- 陡坡跌水（坡度大）
- 垂直跌水（跌落）
- 阶梯跌水（多级）
- 消力戽跌水（带消能池）

### 2. 水跃基本理论

**水跃的定义：**
水流从急流（Fr > 1）突然转变为缓流（Fr < 1）的局部水力现象。

**共轭水深公式（矩形断面）：**
```
h2 = h1/2 * (sqrt(1 + 8*Fr1²) - 1)

其中：
h1 - 跃前水深（急流）(m)
h2 - 跃后水深（缓流）(m)
Fr1 - 跃前弗劳德数
```

**弗劳德数：**
```
Fr = v / sqrt(g * h)

v - 流速 (m/s)
h - 水深 (m)
g - 重力加速度 (9.81 m/s²)
```

### 3. 水跃类型

根据跃前弗劳德数Fr1分类：

```
Fr1 = 1.0-1.7：   波状水跃（能量消散小）
Fr1 = 1.7-2.5：   弱水跃（表面波动）
Fr1 = 2.5-4.5：   稳定水跃（理想消能）
Fr1 = 4.5-9.0：   强水跃（消能效果好）
Fr1 > 9.0：       猛烈水跃（强烈翻滚）
```

**最佳水跃范围：** Fr1 = 4.5-9.0，能量消散率高，跃长较短

### 4. 水跃能量损失

**能量损失公式：**
```
ΔE = E1 - E2 = (h2 - h1)³ / (4 * h1 * h2)

E1 = h1 + v1²/(2g)  - 跃前比能
E2 = h2 + v2²/(2g)  - 跃后比能
```

**能量消散率：**
```
η = ΔE / E1 * 100%
```

**相对能量损失：**
```
ΔE/E1 = (Fr1² - 1)³ / (8 * Fr1² * (1 + Fr1²/2))
```

### 5. 水跃长度

**经验公式：**
```
Lj = K * (h2 - h1)

K - 长度系数，取5-7
一般取 Lj = 6 * (h2 - h1)
```

**更精确的公式（Smetana）：**
```
Lj = 6.9 * (h2 - h1) * (Fr1 - 1)^0.27
```

### 6. 消力池设计

**消力池的作用：**
- 强迫水跃发生在指定位置
- 保护下游渠底不被冲刷
- 稳定水流，恢复均匀流

**消力池尺寸：**
```
长度 L：L ≥ Lj + 0.5 * h2
深度 d：d = h0 - h1
宽度 B：B = 渠道宽度

h0 - 池底高程
h1 - 跃前水深
```

**辅助消能设施：**
- 消力墩（增加紊动）
- 尾坎（强制水跃）
- 导流墙（约束水流）
- 护坦（防冲刷）

### 7. 跌水下游水深

**自由出流：**
跌水后形成急流，水深 h = hc（临界水深）

**淹没出流：**
下游水深较高，约束跌水出流

**临界水深（矩形断面）：**
```
hc = (q² / g)^(1/3)

q = Q / b  - 单宽流量 (m²/s)
```

## 计算任务

### 任务1：跌水后水深计算

根据能量方程，计算跌水后的水深和流速。

### 任务2：水跃判别与计算

判断是否发生水跃，计算共轭水深。

### 任务3：能量损失计算

计算水跃的能量损失和消散率。

### 任务4：消力池设计

设计消力池的长度和深度。

### 任务5：消能优化

分析不同跌水高度对消能效果的影响。

## 使用方法

```python
# 运行主程序
python main.py

# 运行实验
python experiments.py
```

## 预期结果

- 跌水后形成急流（Fr > 1）
- 发生稳定水跃（Fr1 = 4-9）
- 能量消散率 50-70%
- 消力池长度 5-10 m

## 工程意义

本案例展示了：
1. 跌水水力计算方法
2. 水跃理论的应用
3. 消力池设计原理
4. 能量消散机制
5. 防冲刷工程措施

## 设计要点

1. **跌水高度选择**：
   - 单级跌水：Δz < 3 m
   - 多级跌水：Δz > 3 m
   - 考虑地形、地质条件

2. **消力池设计**：
   - 池长：L = 6-8倍跃高
   - 池深：保证跃前水深
   - 尾坎：强制水跃发生

3. **防冲刷措施**：
   - 池底混凝土衬砌
   - 消力墩增强紊动
   - 下游海漫过渡
   - 两侧护坡防冲

4. **水跃控制**：
   - 确保Fr1 = 4-9（最佳消能）
   - 调节池深控制跃前水深
   - 尾坎高度控制跃后水深

5. **运行管理**：
   - 清除淤积物
   - 检查衬砌完整性
   - 监测冲刷情况
   - 及时修复破损
