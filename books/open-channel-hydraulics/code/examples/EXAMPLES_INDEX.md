# 案例示例程序索引

完整的26个可执行示例程序目录。每个示例都包含完整的代码实现、可视化输出和详细的工程说明。

**总计**: 26个完整示例
**可视化**: 25+ PNG图表
**批量运行**: 使用 `run_all_examples.py` 一键运行所有示例

---

## 目录

- [第一部分：明渠恒定流（案例1-12）](#第一部分明渠恒定流案例1-12)
- [第二部分：明渠非恒定流（案例13-20）](#第二部分明渠非恒定流案例13-20)
- [第三部分：有压管流（案例21-28）](#第三部分有压管流案例21-28)
- [批量运行工具](#批量运行工具)

---

## 第一部分：明渠恒定流（案例1-12）

### 案例1：农村灌溉渠流量计算
**文件**: `case_01_irrigation/main.py`
**难度**: ⭐
**核心理论**: 均匀流、曼宁公式
**功能**:
- 梯形断面水力要素计算
- Manning公式流速计算
- 正常水深迭代求解
- Froude数水流状态判别

**运行方式**:
```bash
python case_01_irrigation/main.py
```

**输出**: 控制台输出计算结果

---

### 案例2：城市雨水排水渠设计
**文件**: `case_02_drainage/main.py`
**难度**: ⭐
**核心理论**: 矩形断面、临界流
**功能**:
- 矩形断面水力计算
- 临界水深求解
- 流速控制验证
- 排水能力校核

**运行方式**:
```bash
python case_02_drainage/main.py
```

**输出**: 控制台输出计算结果

---

### 案例3：景观水渠水流状态分析
**文件**: `case_03_landscape/main.py`
**难度**: ⭐⭐
**核心理论**: Froude数、比能曲线
**功能**:
- 比能曲线计算
- 临界水深分析
- 水流状态判断
- 跃前跃后水深计算

**运行方式**:
```bash
python case_03_landscape/main.py
```

**输出**: 控制台输出计算结果

---

### 案例4：灌区量水堰流量测量
**文件**: `case_04_weir/main.py`
**难度**: ⭐⭐
**核心理论**: 堰流公式、流量系数
**功能**:
- 薄壁堰流量计算
- 宽顶堰流量计算
- 流量系数选取
- 淹没出流修正

**运行方式**:
```bash
python case_04_weir/main.py
```

**输出**: 控制台输出计算结果

---

### 案例5：水闸泄流能力计算
**文件**: `case_05_gate/main.py`
**难度**: ⭐⭐
**核心理论**: 闸孔出流、自由与淹没出流
**功能**:
- 闸门自由出流计算
- 闸门淹没出流计算
- 流量系数确定
- 闸门特性曲线

**运行方式**:
```bash
python case_05_gate/main.py
```

**输出**: 控制台输出计算结果

---

### 案例6：跌水消能工设计
**文件**: `case_06_drop/main.py`
**难度**: ⭐⭐
**核心理论**: 能量方程、水跃
**功能**:
- 水跃共轭水深计算
- 消能率计算
- 水跃长度估算
- 比能损失分析

**运行方式**:
```bash
python case_06_drop/main.py
```

**输出**: 控制台输出计算结果

---

### 案例7：陡坡急流段设计
**文件**: `case_07_profile/main.py`
**难度**: ⭐⭐⭐
**核心理论**: 水面线计算
**功能**:
- 水面线分段求和法
- 壅水曲线计算（M1、M2）
- 降水曲线计算（M3）
- 回水长度计算

**运行方式**:
```bash
python case_07_profile/main.py
```

**输出**: 控制台输出计算结果

---

### 案例8：桥涵过流能力分析
**文件**: `case_08_bridge/main.py`
**难度**: ⭐⭐⭐
**核心理论**: 局部水头损失
**功能**:
- 收缩断面壅水计算
- 局部损失系数
- 过流能力验算
- 安全水位校核

**运行方式**:
```bash
python case_08_bridge/main.py
```

**输出**: 控制台输出计算结果

---

### 案例9：渠道糙率影响分析
**文件**: `case_09_roughness/main.py`
**难度**: ⭐⭐
**核心理论**: Manning糙率系数
**功能**:
- 不同材料糙率对比
- 流量-糙率关系
- 糙率敏感性分析
- 设计糙率选取

**运行方式**:
```bash
python case_09_roughness/main.py
```

**输出**: 控制台输出计算结果

---

### 案例10：复式断面渠道设计
**文件**: `case_10_compound/main.py`
**难度**: ⭐⭐⭐
**核心理论**: 复式断面分块计算
**功能**:
- 主槽+滩地分块计算
- 综合糙率确定
- 流量分配计算
- 滩地过流比例

**运行方式**:
```bash
python case_10_compound/main.py
```

**输出**: 控制台输出计算结果

---

### 案例11：渠道断面渐变段设计
**文件**: `case_11_transition/main.py`
**难度**: ⭐⭐⭐
**核心理论**: 断面过渡、动量方程
**功能**:
- 收缩段水位计算
- 扩散段水位计算
- 能量损失分析
- 过渡段长度设计

**运行方式**:
```bash
python case_11_transition/main.py
```

**输出**: 控制台输出计算结果

---

### 案例12：涵洞水力计算
**文件**: `case_12_culvert/main.py`
**难度**: ⭐⭐⭐
**核心理论**: 涵洞出流形式
**功能**:
- 无压流计算
- 半压流计算
- 压力流计算
- 出流形式判别

**运行方式**:
```bash
python case_12_culvert/main.py
```

**输出**: 控制台输出计算结果

---

## 第二部分：明渠非恒定流（案例13-20）

### 案例13：渠道非恒定流模拟
**文件**: `case_13_unsteady/main.py`
**难度**: ⭐⭐⭐⭐
**核心理论**: 圣维南方程、显式差分法
**功能**:
- 圣维南方程数值求解
- Lax格式差分法
- 波的传播模拟
- 时空网格可视化

**运行方式**:
```bash
python case_13_unsteady/main.py
```

**输出**:
- `unsteady_flow.png` - 非恒定流时空演变图

---

### 案例14：洪水波演进计算
**文件**: `case_14_flood_routing/main.py`
**难度**: ⭐⭐⭐⭐
**核心理论**: 马斯京根法、洪水演算
**功能**:
- 洪水波传播模拟
- 流量衰减分析
- 洪峰滞后计算
- 马斯京根参数标定

**运行方式**:
```bash
python case_14_flood_routing/main.py
```

**输出**:
- `flood_routing.png` - 洪水演进过程线

---

### 案例15：溃坝波传播模拟
**文件**: `case_15_dam_break/main.py`
**难度**: ⭐⭐⭐⭐⭐
**核心理论**: 激波、Riemann问题
**功能**:
- 溃坝波数值模拟
- 激波捕捉算法
- Ritter理论解对比
- 干湿边界处理

**运行方式**:
```bash
python case_15_dam_break/main.py
```

**输出**:
- `dam_break.png` - 溃坝波演变图

---

### 案例16：渠系动态调度优化
**文件**: `case_16_canal_operation/main.py`
**难度**: ⭐⭐⭐⭐⭐
**核心理论**: 动态优化、PID控制
**功能**:
- 多闸门协同控制
- 水位动态调节
- 流量分配优化
- 控制策略设计

**运行方式**:
```bash
python case_16_canal_operation/main.py
```

**输出**:
- `canal_operation.png` - 渠系调度曲线

---

### 案例17：感潮河段水位预报
**文件**: `case_17_tidal_river/main.py`
**难度**: ⭐⭐⭐⭐
**核心理论**: 潮汐边界、隐式差分
**功能**:
- 潮汐影响模拟
- 河道-潮汐耦合
- 水位预报计算
- Preissmann格式

**运行方式**:
```bash
python case_17_tidal_river/main.py
```

**输出**:
- `tidal_river.png` - 感潮河段水位变化

---

### 案例18：渠道波浪反射分析
**文件**: `case_18_wave_reflection/main.py`
**难度**: ⭐⭐⭐⭐
**核心理论**: 波动方程、边界反射
**功能**:
- 波浪传播模拟
- 边界反射计算
- 驻波形成分析
- 特征线法应用

**运行方式**:
```bash
python case_18_wave_reflection/main.py
```

**输出**:
- `wave_reflection.png` - 波浪反射图

---

### 案例19：灌区智能调度系统
**文件**: `case_19_dynamic_scheduling/main.py`
**难度**: ⭐⭐⭐⭐⭐
**核心理论**: 遗传算法、优化调度
**功能**:
- 多目标优化
- 遗传算法求解
- 实时调度策略
- Pareto最优解

**运行方式**:
```bash
python case_19_dynamic_scheduling/main.py
```

**输出**:
- `dynamic_scheduling.png` - 智能调度方案

---

### 案例20：二维明渠流场模拟
**文件**: `case_20_2d_flow/main.py`
**难度**: ⭐⭐⭐⭐⭐
**核心理论**: 二维浅水波方程、有限体积法
**功能**:
- 二维流场计算
- 漫滩模拟
- 流速矢量场
- 三维可视化

**运行方式**:
```bash
python case_20_2d_flow/main.py
```

**输出**:
- `2d_flow.png` - 二维流场分布图

---

## 第三部分：有压管流（案例21-28）

### 案例21：城市供水管道计算 ✨
**文件**: `case_21_pipe_flow/main.py`
**难度**: ⭐⭐
**核心理论**: Darcy-Weisbach公式、Reynolds数
**功能**:
- 管道水头损失计算
- Colebrook-White迭代
- Reynolds数计算
- Moody图应用

**运行方式**:
```bash
python case_21_pipe_flow/main.py
```

**输出**:
- `pipe_flow_analysis.png` - 管道水力特性图
- `friction_factor_chart.png` - 摩阻系数图表

---

### 案例22：管网平衡计算 ✨
**文件**: `case_22_pipe_network/main.py`
**难度**: ⭐⭐⭐
**核心理论**: Hardy-Cross法、管网平衡
**功能**:
- Hardy-Cross迭代法
- 管网流量分配
- 水力坡度线计算
- 节点水压分析

**运行方式**:
```bash
python case_22_pipe_network/main.py
```

**输出**:
- `network_topology.png` - 管网拓扑结构
- `hardy_cross_convergence.png` - Hardy-Cross收敛曲线
- `hydraulic_grade_line.png` - 水力坡度线

**关键结果**:
- 收敛迭代次数: 4次
- 最大流量校正: 0.0001 m³/s
- 计算精度: 1e-4

---

### 案例23：长距离输水管道经济优化 ✨
**文件**: `case_23_long_distance/main.py`
**难度**: ⭐⭐⭐
**核心理论**: 经济管径、NPV最小化
**功能**:
- 管径优化计算
- 建设费用估算
- 运行费用计算
- 净现值NPV分析
- 敏感性分析

**运行方式**:
```bash
python case_23_long_distance/main.py
```

**输出**:
- `cost_vs_diameter.png` - 费用-管径关系曲线
- `sensitivity_analysis.png` - 敏感性分析图
- `velocity_power_analysis.png` - 流速-功率分析

**关键结果**:
- 最优管径: 0.8 m
- 总NPV: 694,742 万元
- 建设费用: 48,000 万元
- 年运行费用: 5,434 万元

---

### 案例25：水锤基本理论 ✨
**文件**: `case_25_water_hammer/main.py`
**难度**: ⭐⭐⭐⭐
**核心理论**: Joukowsky公式、压力波速
**功能**:
- 水锤波速计算
- Joukowsky压力上升
- 压力波传播模拟
- 关阀时间分析
- 管道弹性影响

**运行方式**:
```bash
python case_25_water_hammer/main.py
```

**输出**:
- `water_hammer_propagation.png` - 水锤波传播过程
- `water_hammer_time_history.png` - 压力时程曲线
- `closure_time_comparison.png` - 关阀时间对比

**关键结果**:
- 波速（刚性管）: 1449.1 m/s
- 波速（弹性管）: 1173.5 m/s
- 压力上升: 183.5 m
- 弹性影响: 19% 波速降低

---

### 案例26：管道水锤MOC数值模拟 ✨
**文件**: `case_26_moc/main.py`
**难度**: ⭐⭐⭐⭐⭐
**核心理论**: 特征线法（MOC）、特征方程
**功能**:
- MOC特征网格生成
- C+ / C- 特征方程求解
- 上下游边界条件
- 瞬态压力分布
- Courant条件验证

**运行方式**:
```bash
python case_26_moc/main.py
```

**输出**:
- `moc_grid.png` - MOC特征线网格
- `pressure_time_space.png` - 压力时空分布
- `velocity_profiles.png` - 流速分布剖面

**关键结果**:
- 网格数: 20段 × 200时间步
- Courant数: 1.0（严格满足）
- 最大水头: 242.3 m
- 最小水头: -121.1 m
- 数值误差: 0.6%（vs Joukowsky理论解）

---

### 案例28：调压井设计 ✨
**文件**: `case_28_surge_tank/main.py`
**难度**: ⭐⭐⭐⭐⭐
**核心理论**: Thoma理论、波动分析
**功能**:
- Thoma临界面积计算
- 调压井涌波模拟
- 振荡周期分析
- 安全系数设计
- 阻抗孔优化

**运行方式**:
```bash
python case_28_surge_tank/main.py
```

**输出**:
- `surge_oscillation.png` - 调压井水位振荡曲线
- `surge_tank_area_comparison.png` - 不同面积对比
- `surge_tank_schematic.png` - 调压井系统示意图

**关键结果**:
- Thoma临界面积: 150 m²
- 设计面积（含安全系数1.5）: 225 m²
- 振荡周期: 约60秒
- 最大涌波高度: 10 m

---

## 批量运行工具

### 运行所有示例
**文件**: `run_all_examples.py`
**功能**:
- 自动发现所有示例程序
- 顺序执行并计时
- 捕获错误和输出
- 生成统计报告
- 验证PNG文件生成

**运行方式**:
```bash
python run_all_examples.py
```

**输出**:
- 控制台实时进度
- `run_all_examples_report.txt` - 详细运行报告

**示例报告**:
```
================================================================================
明渠水力学案例示例程序批量运行报告
================================================================================

运行时间: 2025-10-30 03:29:35
总案例数: 26
成功: 26
失败: 0
成功率: 100.0%
总耗时: 44.67秒

================================================================================
可视化文件统计
================================================================================

总计: 25 个PNG文件
```

---

## 使用建议

### 学习路径

1. **初学者**:
   - 从案例1-3开始（明渠基础）
   - 逐步学习案例4-12（水工建筑物）
   - 理解基本概念后再学习高级案例

2. **有基础学习者**:
   - 直接学习感兴趣的案例
   - 重点关注数值方法（案例13-20）
   - 深入研究管道系统（案例21-28）

3. **工程技术人员**:
   - 根据工程需求选择相关案例
   - 参考代码实现解决实际问题
   - 修改参数适配具体工程条件

### 代码复用

所有示例程序都是自包含的，可以：
- 复制函数到自己的项目
- 修改参数适配实际工程
- 扩展功能满足特定需求
- 集成到更大的系统中

### 可视化定制

大多数示例包含可视化代码，可以：
- 调整图表样式和颜色
- 修改坐标轴范围
- 添加更多曲线或数据
- 导出为不同格式（PNG、PDF、SVG）

---

## 技术支持

### 常见问题

**Q: 如何运行单个示例？**
A: 进入示例目录，直接运行 `python main.py`

**Q: 为什么没有生成PNG文件？**
A: 检查matplotlib是否正确安装，确保运行目录有写权限

**Q: 如何修改计算参数？**
A: 编辑 `main.py` 中的参数定义部分，通常在文件开头

**Q: 性能优化建议？**
A: 对于大规模计算，考虑使用NumPy向量化操作，减少循环次数

### 依赖项

所有示例都需要：
- Python 3.8+
- NumPy
- Matplotlib（仅可视化示例需要）

安装命令：
```bash
pip install numpy matplotlib
```

---

**最后更新**: 2025-10-30
**索引版本**: v1.0
**总示例数**: 26个
**文档状态**: ✅ 完整
