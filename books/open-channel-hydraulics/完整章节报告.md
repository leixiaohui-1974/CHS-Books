# 明渠水力学计算 - 完整章节报告

**版本：** v3.0
**日期：** 2025-10-29
**状态：** 框架已建立，案例1已验证

---

## 目录

- [教材总体规划](#教材总体规划)
- [第一部分 明渠恒定流基础（案例1-12）](#第一部分-明渠恒定流基础案例1-12)
  - [第一章 均匀流计算 - 农村灌溉渠](#第一章-均匀流计算---农村灌溉渠)
- [第二部分 明渠非恒定流（案例13-20）](#第二部分-明渠非恒定流案例13-20)
- [第三部分 有压系统（案例21-28）](#第三部分-有压系统案例21-28)
- [第四部分 混合系统（案例29-30）](#第四部分-混合系统案例29-30)
- [附录 完整案例体系](#附录-完整案例体系)

---

# 教材总体规划

## 教材概述

本教材通过 **30个经典水力工程案例** 系统讲解完整的水力学计算方法，从明渠流到有压流，从恒定流到非恒定流，从基础算法到高级数值方法，从单一系统到混合系统，循序渐进地建立完整的水力计算知识体系。

### 教材三大特色

1. **完整性**：覆盖明渠、有压流、混合系统
2. **工程性**：基于30个真实工程案例
3. **系统性**：从基础到高级的渐进式学习路径

### 教学目标

完成本教材后，学生能够：
- 掌握明渠水力学的基本理论
- 进行各类水力工程计算
- 使用数值方法求解复杂问题
- 独立完成工程设计任务

---

## 教材结构

### 第一部分：明渠恒定流基础（案例1-12）

**学时：48学时（理论24 + 实验24）**

#### 第一阶段：基础概念（案例1-3）
- 均匀流、临界流
- 梯形与矩形断面
- 流动状态判别

#### 第二阶段：水工建筑物（案例4-7）
- 堰流计算
- 闸门泄流
- 跌水消能
- 水面线计算

#### 第三阶段：非均匀流（案例8-9）
- 回水曲线
- 壅水分析
- 桥涵水力计算

#### 第四阶段：复杂系统（案例10-12）
- 泵站设计
- 串联渠道
- 渠系网络

### 第二部分：明渠非恒定流（案例13-20）

**学时：64学时（理论32 + 实验32）**

#### 基础理论（案例13-15）
- 圣维南方程
- 闸门启闭
- 洪水演进
- 泵启停分析

#### 数值算法（案例16-17）
- 特征线法（MOC）
- 有限体积法（FVM）
- 算法对比分析

#### 高级应用（案例18-20）
- 溃坝波
- 动态调度
- 二维流动

### 第三部分：有压系统（案例21-28）

**学时：32学时（理论16 + 实验16）**

#### 稳态有压流（案例21-24）
- 管道阻力计算
- 管网平衡
- 长距离输水
- 虹吸管设计

#### 瞬态有压流（案例25-28）
- 水锤效应
- 特征线法
- 泵瞬变
- 调压井设计

### 第四部分：混合系统（案例29-30）

**学时：24学时（理论12 + 实验12）**

- 管渠联合系统
- 泵-渠-管综合调度

---

# 第一部分 明渠恒定流基础（案例1-12）

# 第一章 均匀流计算 - 农村灌溉渠

## 1.1 案例背景

### 1.1.1 工程场景

某农村灌区需要设计一条灌溉渠道，为1000亩农田供水。根据农业用水定额，设计流量为0.5 m³/s。

**工程要求：**
- 设计流量：Q = 0.5 m³/s
- 渠道类型：梯形断面土质渠道
- 地形条件：相对平缓
- 经济性：成本控制，施工便利

**设计参数：**
- 渠底宽度：b = 1.0 m
- 边坡系数：m = 1.5（即1.5:1，水平:垂直）
- 渠底坡度：S0 = 0.0002（0.02%）
- 曼宁糙率：n = 0.025（土质渠道）

### 1.1.2 技术目标

1. **计算正常水深** h0（均匀流水深）
2. **验证流动状态**（缓流/急流）
3. **校核流速**（防止冲刷或淤积）
4. **确定渠道尺寸**（包括安全超高）

---

## 1.2 理论基础

### 1.2.1 均匀流概念

**定义：**
均匀流是指水流沿程保持不变的流动状态：
- 水深不变：∂h/∂x = 0
- 流速不变：∂v/∂x = 0
- 水面线平行于渠底
- 能量坡度 J = 渠底坡度 S0

**产生条件：**
1. 渠道顺直、断面均匀
2. 糙率沿程不变
3. 坡度恒定
4. 远离边界影响（进出口）

### 1.2.2 曼宁公式

**公式形式：**

```
v = (1/n) × R^(2/3) × S0^(1/2)
Q = A × v
```

**参数说明：**
- v：断面平均流速（m/s）
- n：曼宁糙率系数（s/m^(1/3)）
- R：水力半径 = A/χ（m）
- S0：渠底坡度（无量纲）
- Q：流量（m³/s）
- A：过水断面面积（m²）
- χ：湿周（m）

**糙率系数参考值：**

| 渠道材料 | 糙率 n | 典型应用 |
|---------|-------|---------|
| 玻璃、塑料 | 0.009-0.011 | 实验渠道 |
| 混凝土衬砌 | 0.012-0.018 | 城市渠道 |
| 水泥砂浆抹面 | 0.016-0.020 | 引水渠 |
| 干砌石 | 0.020-0.025 | 山区渠道 |
| 土质渠道 | 0.020-0.030 | 农村灌溉 |
| 杂草较多 | 0.030-0.040 | 天然渠道 |

### 1.2.3 梯形断面水力要素

**几何关系：**

```
过水断面积：A = (b + m×h) × h
湿周：χ = b + 2×h×√(1 + m²)
水力半径：R = A / χ
水面宽度：B = b + 2×m×h
水力深度：hm = A / B
```

**边坡系数选择：**

| 渠道材料 | 边坡系数 m | 边坡比例 |
|---------|-----------|---------|
| 岩石 | 0.25-0.50 | 1:4 - 1:2 |
| 混凝土 | 0.50-1.00 | 1:2 - 1:1 |
| 砂质土 | 1.00-1.50 | 1:1 - 3:2 |
| 粘土 | 1.50-2.00 | 3:2 - 2:1 |
| 松散土 | 2.00-3.00 | 2:1 - 3:1 |

### 1.2.4 流动状态判别

**弗劳德数：**

```
Fr = v / √(g × hm)

其中：
- Fr < 1：缓流（亚临界流）
- Fr = 1：临界流
- Fr > 1：急流（超临界流）
```

**临界水深：**

```
对于梯形断面，需求解：
Q² / g = A³ / B
```

**物理意义：**
- 缓流：重力作用占优，扰动可上溯
- 急流：惯性作用占优，扰动只能下传
- 临界流：重力与惯性平衡，能量最小

---

## 1.3 计算方法

### 1.3.1 正常水深求解

**问题描述：**
已知Q、b、m、n、S0，求正常水深h0。

**方程：**

```
Q = A(h) × (1/n) × R(h)^(2/3) × S0^(1/2)
```

这是关于h的非线性方程，需要数值求解。

**求解方法：牛顿迭代法**

```
算法步骤：
1. 初始猜测：h0_guess = (Q × n / (b × S0^0.5))^0.6
2. 迭代公式：h_new = h_old - f(h_old) / f'(h_old)
3. 收敛判据：|h_new - h_old| < ε（如10^-6）

其中：
f(h) = A × (1/n) × R^(2/3) × S0^(1/2) - Q
f'(h) = 导数（通过数值差分或解析推导）
```

### 1.3.2 算法实现框架

```python
class UniformFlowSolver:
    def __init__(self, channel):
        self.channel = channel

    def solve_normal_depth(self, Q, tol=1e-6, max_iter=100):
        """
        求解正常水深

        参数：
        - Q: 流量 (m³/s)
        - tol: 收敛容差
        - max_iter: 最大迭代次数

        返回：
        - h0: 正常水深 (m)
        """
        # 初始猜测
        h = self._initial_guess(Q)

        # 牛顿迭代
        for i in range(max_iter):
            # 计算水力要素
            A = self.channel.area(h)
            R = self.channel.hydraulic_radius(h)

            # 计算函数值
            f = A * (1/self.channel.n) * R**(2/3) * \
                self.channel.S0**0.5 - Q

            # 计算导数（数值差分）
            dh = 1e-6
            A_dh = self.channel.area(h + dh)
            R_dh = self.channel.hydraulic_radius(h + dh)
            f_dh = A_dh * (1/self.channel.n) * R_dh**(2/3) * \
                   self.channel.S0**0.5 - Q
            df = (f_dh - f) / dh

            # 更新水深
            h_new = h - f / df

            # 检查收敛
            if abs(h_new - h) < tol:
                return h_new

            h = h_new

        raise ValueError("牛顿迭代未收敛")

    def _initial_guess(self, Q):
        """初始猜测值"""
        b = self.channel.b
        n = self.channel.n
        S0 = self.channel.S0
        return (Q * n / (b * S0**0.5))**0.6
```

---

## 1.4 程序实现

### 1.4.1 完整代码结构

**文件位置：** `code/examples/case_01_irrigation/main.py`

**主要类和函数：**

1. **TrapezoidalChannel** - 梯形渠道类
2. **UniformFlowSolver** - 均匀流求解器
3. **main()** - 主计算流程

### 1.4.2 核心代码展示

```python
# 1. 定义渠道参数
channel = TrapezoidalChannel(
    b=1.0,      # 渠底宽度 (m)
    m=1.5,      # 边坡系数
    n=0.025,    # 曼宁糙率
    S0=0.0002   # 渠底坡度
)

# 2. 创建求解器
solver = UniformFlowSolver(channel)

# 3. 求解正常水深
Q = 0.5  # 设计流量 (m³/s)
h0 = solver.solve_normal_depth(Q)

# 4. 计算水力要素
state = channel.flow_state(h0, Q)

# 5. 输出结果
print(f"正常水深 h0 = {h0:.4f} m")
print(f"流速 v = {state.v:.4f} m/s")
print(f"弗劳德数 Fr = {state.Fr:.4f}")
print(f"流态：{'缓流' if state.Fr < 1 else '急流'}")
```

---

## 1.5 实验结果

### 1.5.1 主程序运行结果

```
================================================================================
                                 案例1：农村灌溉渠流量计算
================================================================================

【步骤1】问题参数
--------------------------------------------------------------------------------
渠道类型：梯形断面
渠底宽度 b = 1.0 m
边坡系数 m = 1.5 (边坡为1.5:1)
曼宁糙率 n = 0.025 (土质渠道)
渠底坡度 S0 = 0.0002 (0.02%)
设计流量 Q = 0.5 m³/s

【步骤4】计算正常水深
--------------------------------------------------------------------------------
求解方程：Q = A * (1/n) * R^(2/3) * S0^(1/2) = 0.5 m³/s
使用牛顿迭代法求解...

================================================================================
                                    正常水深计算结果
================================================================================
水深_h                : 0.7401 m
面积_A                : 1.5618 m²
湿周_χ               : 3.6686 m
水力半径_R            : 0.4257 m
水面宽_B              : 3.2204 m
水力深_hm             : 0.4850 m
流速_v                : 0.3201 m/s
流量_Q                : 0.5000 m³/s
弗劳德数_Fr           : 0.1468
流态                  : 缓流
正常水深_h0            : 0.7401 m
类型                  : 均匀流
================================================================================

【步骤5】流动状态分析
--------------------------------------------------------------------------------
流量_Q                : 0.5000 m³/s
正常水深_h0            : 0.7401 m
临界水深_hc            : 0.2570 m
正常流弗劳德数_Fr0     : 0.1468
临界流弗劳德数_Frc     : 0.1307
渠道类型              : 缓坡渠道 (S0 < Sc)
流动状态              : 缓流 (Fr < 1)
说明                  : 正常水深大于临界水深，渠道坡度较缓，水流为缓流状态

【步骤6】验证计算
--------------------------------------------------------------------------------
计算流量：Q_calc = 0.500000 m³/s
设计流量：Q_design = 0.500000 m³/s
相对误差：0.00004099%
✓ 验证通过！计算结果准确。

【步骤7】工程建议
--------------------------------------------------------------------------------
1. 渠道设计水深：h = 0.740 m
2. 建议加高 20% 作为安全超高，实际开挖深度：0.888 m
3. 水面宽度：B = 3.220 m
4. 渠道顶部宽度应至少为：3.720 m（考虑边坡和维护通道）
5. 流速 v = 0.320 m/s，在合理范围内（0.3-1.0 m/s），不会引起冲刷或淤积
6. 流态为缓流，水流稳定，适合灌溉
================================================================================
```

### 1.5.2 参数敏感性分析

**实验1：糙率系数影响**

```
================================================================================
                             实验1.1：糙率系数 n 对正常水深的影响
================================================================================

不同渠道材料的糙率系数对比：
----------------------------------------------------------------------------------------------------
  糙率n    |     材料描述     |    正常水深h0(m)    |   流速v(m/s)   |    弗劳德数Fr
----------------------------------------------------------------------------------------------------
 0.015   |    混凝土衬砌     |     0.5750      |    0.4669    |    0.2378
 0.020   |     砂浆抹面     |     0.6636      |    0.3776    |    0.1812
 0.025   |     土质渠道     |     0.7401      |    0.3201    |    0.1468
 0.030   |     杂草较多     |     0.8082      |    0.2796    |    0.1236
 0.035   |     灌木丛生     |     0.8700      |    0.2493    |    0.1068
----------------------------------------------------------------------------------------------------

【实验结论】
1. 糙率系数越大，正常水深越大（阻力增加，水深加深）
2. 糙率系数越大，流速越小（同流量下，断面增大，流速减小）
3. 弗劳德数随糙率增大而减小（流速减小效应）
4. 工程建议：选择合适的渠道材料，保持渠道清洁，减小糙率，降低水头损失
```

**实验2：渠底坡度影响**

```
================================================================================
                             实验1.2：渠底坡度 S0 对正常水深的影响
================================================================================

不同渠底坡度对比：
----------------------------------------------------------------------------------------------------
   坡度S0    |   坡度(%)    |    正常水深h0(m)    |   流速v(m/s)   |    弗劳德数Fr
----------------------------------------------------------------------------------------------------
  0.0001   |   0.010    |     0.8742      |    0.2475    |    0.1058
  0.0002   |   0.020    |     0.7401      |    0.3201    |    0.1468
  0.0005   |   0.050    |     0.5904      |    0.4491    |    0.2262
  0.0010   |   0.100    |     0.4953      |    0.5792    |    0.3138
  0.0020   |   0.200    |     0.4138      |    0.7456    |    0.4352
----------------------------------------------------------------------------------------------------

【实验结论】
1. 坡度越大，正常水深越小（重力分量增大，水流加速，水深减小）
2. 坡度越大，流速越大（同流量下，坡度增大促进水流加速）
3. 弗劳德数随坡度增大而增大，可能从缓流转为急流
4. 工程建议：平原地区坡度较缓，需要较大断面；山区坡度较陡，断面可以较小
```

**实验3：边坡系数影响**

```
================================================================================
                             实验1.3：边坡系数 m 对水力要素的影响
================================================================================

不同边坡系数对比：
--------------------------------------------------------------------------------------------------------------
  边坡m    |         边坡描述         |   正常水深(m)    |   断面积(m²)    |   水力半径(m)    |  流速(m/s)
--------------------------------------------------------------------------------------------------------------
  0.0    |       矩形（垂直边墙）       |    1.6706    |    1.6706    |    0.3848    |   0.2993
  0.5    |      很陡（0.5:1）       |    0.9908    |    1.4816    |    0.4608    |   0.3375
  1.0    |       较陡（1:1）        |    0.8238    |    1.5025    |    0.4512    |   0.3328
  1.5    |      中等（1.5:1）       |    0.7401    |    1.5618    |    0.4257    |   0.3201
  2.0    |       较缓（2:1）        |    0.6862    |    1.6279    |    0.4001    |   0.3072
  2.5    |      很缓（2.5:1）       |    0.6467    |    1.6922    |    0.3775    |   0.2955
--------------------------------------------------------------------------------------------------------------

【实验结论】
1. 边坡系数越大，同流量下正常水深越小（断面更宽，水深减小）
2. 边坡系数增大，过水断面积增大（相同水深下）
3. 存在最优边坡系数，使水力半径最大，输水效率最高
4. 工程建议：
   - 岩石渠道：m=0.25-0.5（边坡较陡）
   - 混凝土渠道：m=0.5-1.0
   - 土质渠道：m=1.5-2.5（边坡较缓，防止坍塌）
```

**实验4：流量影响**

```
================================================================================
                              实验1.4：流量 Q 对正常水深的影响
================================================================================

流量-水深关系：
--------------------------------------------------------------------------------
   流量Q(m³/s)    |    正常水深h0(m)    |    流速v(m/s)     |       流态
--------------------------------------------------------------------------------
     0.10       |     0.3242      |     0.2075      |       缓流
     0.30       |     0.5750      |     0.2801      |       缓流
     0.50       |     0.7401      |     0.3201      |       缓流
     0.70       |     0.8700      |     0.3491      |       缓流
     0.90       |     0.9794      |     0.3722      |       缓流
     1.10       |     1.0751      |     0.3916      |       缓流
--------------------------------------------------------------------------------

【实验结论】
1. 流量越大，正常水深越大（非线性关系）
2. 流量增加，流速也增加，但增速小于流量增速（断面增大）
3. 在本渠道参数下，流动始终保持缓流状态
4. Q-h关系可用于渠道设计：给定流量，查表得水深
```

---

## 1.6 讨论与分析

### 1.6.1 计算结果分析

**正常水深：h0 = 0.740 m**
- 在合理范围内（通常0.5-2.0m）
- 需加20%安全超高 → 实际开挖 0.888 m
- 水面宽度 3.22 m，顶宽建议 3.72 m

**流速：v = 0.320 m/s**
- 在防冲刷范围内（0.3-1.0 m/s）
- 不会产生淤积（>0.3 m/s）
- 不会产生冲刷（<1.0 m/s，土质渠道）
- 适合灌溉用水

**弗劳德数：Fr = 0.147 < 1**
- 缓流状态，水流稳定
- 扰动可以上溯
- 适合控制和调节

### 1.6.2 工程设计要点

1. **断面选择**
   - 梯形断面优势：稳定性好，施工方便
   - 边坡1.5:1适合土质渠道
   - 矩形断面适合衬砌渠道，但成本高

2. **材料选择**
   - 土质渠道：成本低，但需维护
   - 混凝土衬砌：防渗好，但成本高
   - 浆砌石：折中方案

3. **坡度选择**
   - 本案例S0=0.0002（平原地区）
   - 坡度太小：断面过大，工程量大
   - 坡度太大：流速过快，冲刷严重

4. **安全超高**
   - 一般取20-30%正常水深
   - 考虑波浪、风浪、水位波动
   - 小渠道：0.2-0.3 m
   - 大渠道：0.5-1.0 m

### 1.6.3 常见问题

**Q1: 为什么要用梯形断面而不是矩形？**

答：
- 梯形断面边坡缓，不易坍塌
- 土质渠道必须用梯形（垂直墙不稳定）
- 施工方便，机械开挖
- 水力效率相近

**Q2: 如何选择边坡系数m？**

答：根据土质确定：
- 岩石：m=0.25-0.5
- 混凝土衬砌：m=0.5-1.0
- 砂质土：m=1.0-1.5
- 粘土：m=1.5-2.0
- 松散土：m=2.0-3.0

**Q3: 流速过大或过小怎么办？**

答：
- 流速过大（>1.0 m/s）：
  - 减小坡度
  - 增大断面
  - 采用衬砌

- 流速过小（<0.3 m/s）：
  - 增大坡度
  - 减小断面
  - 定期清淤

**Q4: 为什么会产生缓流或急流？**

答：
- 缓坡渠道（S0 < Sc）→ 缓流
- 陡坡渠道（S0 > Sc）→ 急流
- 临界坡度 Sc 取决于Q、n、断面形状

### 1.6.4 工程应用拓展

**灌溉系统设计流程：**

```
1. 确定灌溉面积和作物类型
   ↓
2. 计算设计流量 Q
   ↓
3. 选择渠道断面形式
   ↓
4. 确定渠道材料和糙率
   ↓
5. 根据地形确定坡度
   ↓
6. 计算正常水深
   ↓
7. 校核流速（防冲刷、防淤积）
   ↓
8. 确定安全超高
   ↓
9. 绘制渠道断面图
   ↓
10. 估算工程量和成本
```

---

## 1.7 本章小结

### 1.7.1 核心知识点

✅ **均匀流理论**
- 定义和产生条件
- 曼宁公式
- 正常水深概念

✅ **梯形断面水力要素**
- 面积、湿周、水力半径
- 边坡系数选择
- 断面优化

✅ **流动状态判别**
- 弗劳德数
- 临界水深
- 缓流与急流

✅ **数值计算方法**
- 牛顿迭代法
- 收敛判据
- 初值选择

### 1.7.2 计算能力

完成本章后，你应该能够：
1. 建立均匀流计算模型
2. 编写正常水深求解程序
3. 进行参数敏感性分析
4. 完成灌溉渠道设计

### 1.7.3 工程应用

本章内容可直接应用于：
- 农村灌溉渠道设计
- 城市排水渠道计算
- 渠道改造方案比选
- 工程经济分析

### 1.7.4 下一步学习

**第二章：排水渠设计**
- 学习矩形断面计算
- 掌握临界流理论
- 了解城市排水规范
- 进行防冲刷设计

---

# 第二部分 明渠非恒定流（案例13-20）

## 第二部分概述

**学习目标：**
- 理解圣维南方程
- 掌握数值求解方法
- 分析非恒定流现象
- 进行工程应用计算

**主要内容：**

### 案例13：闸门启闭非恒定流
- 圣维南方程组
- 有限差分法（显式）
- 初边值条件处理

### 案例14：洪水演进计算
- 四点隐式差分格式
- Preissmann格式
- 数值稳定性分析

### 案例15：溃坝波模拟
- 间断解处理
- 激波捕捉
- 守恒型差分格式

### 案例16：特征线法
- 特征线理论
- MOC算法实现
- 边界条件处理

### 案例17：有限体积法
- FVM基本原理
- Godunov格式
- 黎曼求解器

### 案例18：波的反射与传播
- 波动方程分析
- 反射系数计算
- 共振现象

### 案例19：多闸门动态调度
- 多变量优化
- 实时调控算法
- 优化目标设定

### 案例20：二维明渠流动
- 二维圣维南方程
- 有限差分/有限元
- 地形数据处理

（详细内容待案例开发完成后补充）

---

# 第三部分 有压系统（案例21-28）

## 第三部分概述

**学习目标：**
- 掌握管流基本理论
- 学习管网平衡计算
- 理解水锤现象
- 进行瞬态分析

**主要内容：**

### 稳态有压流（案例21-24）

**案例21：管道阻力计算**
- 达西-魏斯巴赫公式
- 摩阻系数确定
- 局部阻力损失

**案例22：管网平衡**
- Hardy-Cross法
- 节点法、环路法
- 管网优化设计

**案例23：长距离输水**
- 分段水头损失
- 泵站选址
- 经济管径

**案例24：虹吸管设计**
- 虹吸原理
- 汽蚀校核
- 启动过程分析

### 瞬态有压流（案例25-28）

**案例25：水锤效应**
- 水锤基本方程
- Joukowsky公式
- 防护措施

**案例26：特征线法求解水锤**
- MOC离散格式
- 边界条件处理
- 数值解与理论解对比

**案例27：泵瞬变过程**
- 泵特性曲线
- 四象限运行
- 停泵水锤

**案例28：调压井设计**
- 调压井作用原理
- 断面尺寸确定
- 稳定性分析

（详细内容待案例开发完成后补充）

---

# 第四部分 混合系统（案例29-30）

## 第四部分概述

**学习目标：**
- 理解混合系统特性
- 掌握耦合求解方法
- 进行综合优化设计

**主要内容：**

### 案例29：管渠联合系统
- 有压流与明渠流耦合
- 交界面条件处理
- 雨洪调蓄系统设计

### 案例30：泵-渠-管综合调度
- 多子系统协调控制
- 优化调度模型
- 实时仿真与决策

（详细内容待案例开发完成后补充）

---

# 附录 完整案例体系

## A.1 全部30个案例列表

### 第一部分：明渠恒定流（案例1-12）

| 序号 | 案例名称 | 核心理论 | 难度 | 状态 |
|------|---------|---------|------|------|
| 1 | 农村灌溉渠流量计算 | 均匀流、曼宁公式 | ⭐ | ✅ 已实现 |
| 2 | 城市雨水排水渠设计 | 矩形断面、临界流 | ⭐ | ⏳ 框架 |
| 3 | 景观水渠状态分析 | 弗劳德数、比能曲线 | ⭐⭐ | ⏳ 框架 |
| 4 | 灌区量水堰测量 | 堰流公式 | ⭐⭐ | ⏳ 框架 |
| 5 | 水闸泄流计算 | 闸孔出流 | ⭐⭐ | ⏳ 框架 |
| 6 | 跌水消能工设计 | 水跃、能量方程 | ⭐⭐⭐ | ⏳ 框架 |
| 7 | 陡坡急流段设计 | 水面线计算 | ⭐⭐⭐ | ⏳ 框架 |
| 8 | 水库回水曲线 | 非均匀流 | ⭐⭐⭐ | ⏳ 框架 |
| 9 | 渠道壅水分析 | 局部水头损失 | ⭐⭐⭐ | ⏳ 框架 |
| 10 | 泵站设计 | 泵特性曲线 | ⭐⭐⭐⭐ | ⏳ 框架 |
| 11 | 串联渠道 | 边界条件 | ⭐⭐⭐⭐ | ⏳ 框架 |
| 12 | 渠系网络 | 节点平衡 | ⭐⭐⭐⭐ | ⏳ 框架 |

### 第二部分：明渠非恒定流（案例13-20）

| 序号 | 案例名称 | 核心方法 | 难度 | 状态 |
|------|---------|---------|------|------|
| 13 | 闸门启闭 | 圣维南方程、显式差分 | ⭐⭐⭐ | ⏳ 框架 |
| 14 | 洪水演进 | 隐式差分、Preissmann | ⭐⭐⭐⭐ | ⏳ 框架 |
| 15 | 溃坝波 | 激波捕捉、守恒格式 | ⭐⭐⭐⭐ | ⏳ 框架 |
| 16 | 泵启停 | 动态边界条件 | ⭐⭐⭐ | ⏳ 框架 |
| 17 | 特征线法 | MOC算法 | ⭐⭐⭐⭐ | ⏳ 框架 |
| 18 | 有限体积法 | FVM、Godunov | ⭐⭐⭐⭐⭐ | ⏳ 框架 |
| 19 | 动态调度 | 优化算法 | ⭐⭐⭐⭐⭐ | ⏳ 框架 |
| 20 | 二维流动 | 2D圣维南方程 | ⭐⭐⭐⭐⭐ | ⏳ 框架 |

### 第三部分：有压系统（案例21-28）

| 序号 | 案例名称 | 核心理论 | 难度 | 状态 |
|------|---------|---------|------|------|
| 21 | 管道阻力 | 达西公式、摩阻系数 | ⭐⭐ | ⏳ 规划 |
| 22 | 管网平衡 | Hardy-Cross法 | ⭐⭐⭐ | ⏳ 规划 |
| 23 | 长距离输水 | 分段计算、泵站 | ⭐⭐⭐ | ⏳ 规划 |
| 24 | 虹吸管 | 汽蚀、启动过程 | ⭐⭐⭐ | ⏳ 规划 |
| 25 | 水锤效应 | Joukowsky公式 | ⭐⭐⭐⭐ | ⏳ 规划 |
| 26 | 水锤MOC | 特征线法 | ⭐⭐⭐⭐ | ⏳ 规划 |
| 27 | 泵瞬变 | 四象限运行 | ⭐⭐⭐⭐ | ⏳ 规划 |
| 28 | 调压井 | 稳定性分析 | ⭐⭐⭐⭐⭐ | ⏳ 规划 |

### 第四部分：混合系统（案例29-30）

| 序号 | 案例名称 | 核心方法 | 难度 | 状态 |
|------|---------|---------|------|------|
| 29 | 管渠联合 | 耦合求解 | ⭐⭐⭐⭐⭐ | ⏳ 规划 |
| 30 | 综合调度 | 多系统优化 | ⭐⭐⭐⭐⭐ | ⏳ 规划 |

---

## A.2 项目统计

```
案例总数：30 个
已实现：1 个（案例1）
框架搭建：19 个（案例2-20）
规划中：10 个（案例21-30）

完成进度：3.3%（1/30）
框架进度：66.7%（20/30）
```

---

## A.3 代码结构

```
open-channel-hydraulics/
├── code/
│   ├── models/
│   │   ├── channel.py           # 渠道基类
│   │   └── structures.py        # 水工建筑物
│   │
│   ├── solvers/
│   │   ├── steady/
│   │   │   ├── uniform_flow.py  # 均匀流求解器
│   │   │   └── profile.py       # 水面线计算
│   │   │
│   │   └── unsteady/
│   │       ├── saint_venant.py  # 圣维南方程求解器
│   │       ├── moc.py            # 特征线法
│   │       └── fvm.py            # 有限体积法
│   │
│   ├── utils/
│   │   └── hydraulics.py        # 水力计算工具
│   │
│   └── examples/
│       ├── case_01_irrigation/  # ✅ 已完成
│       │   ├── main.py
│       │   ├── experiments.py
│       │   └── README.md
│       │
│       ├── case_02_drainage/    # ⏳ 框架
│       ├── case_03_landscape/   # ⏳ 框架
│       └── ... (case_04-case_30)
│
├── tests/
│   └── test_channel.py
│
├── docs/zh/
│   ├── 明渠水力学案例驱动教学体系.md
│   ├── 扩展教学体系-非恒定流与算法.md
│   ├── 完整教学体系-含有压系统.md
│   └── 数值算法详解.md
│
├── README.md
├── START_HERE.md
└── 完整章节报告.md               # 本文档
```

---

## A.4 学习路径建议

### 初学者路径（6-8周）

```
Week 1-2: 案例1-3  （均匀流基础）
Week 3-4: 案例4-6  （水工建筑物）
Week 5-6: 案例7-9  （非均匀流）
Week 7-8: 案例10-12（复杂系统）
```

### 进阶路径（12-16周）

```
Week 1-8:  案例1-12 （恒定流完整体系）
Week 9-12: 案例13-16（非恒定流基础）
Week 13-16:案例17-20（高级数值方法）
```

### 完整路径（20-24周）

```
Week 1-8:  案例1-12 （明渠恒定流）
Week 9-16: 案例13-20（明渠非恒定流）
Week 17-20:案例21-28（有压系统）
Week 21-24:案例29-30（混合系统）
```

---

## A.5 运行环境

**Python版本：** 3.8+

**依赖库：**
```bash
pip install numpy scipy matplotlib
```

**运行案例1：**
```bash
cd /home/user/CHS-Books/books/open-channel-hydraulics
python3 code/examples/case_01_irrigation/main.py
python3 code/examples/case_01_irrigation/experiments.py
```

---

# 总结

## 教材特色

✅ **完整性**
- 30个案例覆盖明渠+有压流+混合系统
- 从基础到高级的完整知识体系
- 理论与实践相结合

✅ **工程性**
- 每个案例基于真实工程问题
- 提供详细的计算过程和结果
- 直接应用于工程设计

✅ **系统性**
- 循序渐进的学习路径
- 前后案例相互关联
- 知识点递进式展开

✅ **实践性**
- 完整的Python代码实现
- 参数敏感性分析
- 工程应用指导

## 当前状态

**已完成：**
- ✅ 案例1（农村灌溉渠）完整实现并验证
- ✅ 案例2-20框架搭建完成
- ✅ 核心求解器开发完成
- ✅ 文档体系建立完整

**进行中：**
- ⏳ 案例2-20详细实现
- ⏳ 案例21-30规划开发
- ⏳ 图表可视化完善
- ⏳ 单元测试补充

## 使用建议

1. **初学者**：从案例1开始，逐步学习均匀流理论
2. **进阶学习**：完成案例1-12后，学习非恒定流
3. **工程应用**：可直接查阅相关案例，作为设计参考
4. **教学使用**：按学习路径组织课程，理论+实验结合

---

**版本信息：**
- 文档版本：v3.0
- 日期：2025-10-29
- 状态：案例1已验证，其他案例框架已建立
- 许可：MIT License

---

**本报告完毕！**
