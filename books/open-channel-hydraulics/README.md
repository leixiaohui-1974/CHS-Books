# 明渠水力学计算教材
## 基于工程案例的水力计算入门课程

**适用对象**: 高中毕业生及以上
**教学方法**: 案例驱动学习（Case-Based Learning）
**完成度**: 规划阶段（0/20个案例）
**版本**: v2.0-extended（含非恒定流与数值算法）

---

## 快速开始

**新手请先阅读**: [START_HERE.md](./START_HERE.md)（待创建）

## 教材概述

本教材通过 **20个经典明渠工程案例** 系统讲解明渠水力学计算方法，从最简单的农村灌溉渠到复杂的渠系网络，从恒定流到非恒定流，从基础算法到高级数值方法，循序渐进地建立完整的水力计算知识体系。

### 教材两大部分

**第一部分（案例1-12）：恒定流基础**
- 均匀流、临界流、非均匀流
- 水工建筑物（堰、闸、跌水）
- 泵站设计、渠系网络

**第二部分（案例13-20）：非恒定流与数值算法** 🆕
- 圣维南方程求解
- 显式/隐式差分法、特征线法、有限体积法
- 洪水演进、溃坝波、动态调度、二维流动

### 为什么学习明渠水力学？

1. **广泛应用**: 灌溉、排水、供水、河道等工程
2. **基础重要**: 水利工程设计的核心计算
3. **实用性强**: 直接应用于工程实践
4. **计算简洁**: 基于经典公式，易于掌握
5. **可视化强**: 水流现象直观，易于理解

### 教学特色

- **案例驱动**: 每个理论知识点都有对应的工程案例
- **Python实现**: 提供完整的计算代码和可视化
- **渐进式学习**: 从均匀流到非均匀流，从简单到复杂
- **工程导向**: 培养实际工程计算能力
- **理论扎实**: 严格的水力学理论基础

## 12个经典案例

### 第一阶段：基础概念（规划中 0/3）

1. ⏳ **案例1: 农村灌溉渠流量计算**
   - 核心理论: 均匀流、曼宁公式
   - 学习目标: 梯形断面水力要素、正常水深计算

2. ⏳ **案例2: 城市雨水排水渠设计**
   - 核心理论: 矩形断面、临界流
   - 学习目标: 流速控制、水流类型判别

3. ⏳ **案例3: 景观水渠水流状态分析**
   - 核心理论: 弗劳德数、比能曲线
   - 学习目标: 临界水深、水流状态判断

### 第二阶段：水工建筑物（规划中 0/4）

4. ⏳ **案例4: 灌区量水堰流量测量**
   - 核心理论: 堰流公式、流量系数
   - 学习目标: 薄壁堰、宽顶堰计算

5. ⏳ **案例5: 水闸泄流能力计算**
   - 核心理论: 闸孔出流、自由与淹没出流
   - 学习目标: 闸门特性曲线、流量计算

6. ⏳ **案例6: 跌水消能工设计**
   - 核心理论: 能量方程、水跃
   - 学习目标: 消能率、共轭水深计算

7. ⏳ **案例7: 陡坡急流段设计**
   - 核心理论: 急流特性、水面线
   - 学习目标: 水跃位置、水面线计算

### 第三阶段：非均匀流（规划中 0/2）

8. ⏳ **案例8: 水库回水曲线计算**
   - 核心理论: 非均匀流基本方程
   - 学习目标: 水面线数值计算、回水长度

9. ⏳ **案例9: 渠道收缩段壅水分析**
   - 核心理论: 局部水头损失
   - 学习目标: 桥涵水力计算、壅水高度

### 第四阶段：复杂系统（规划中 0/3）

10. ⏳ **案例10: 泵站提水工程设计**
    - 核心理论: 水泵特性、管道损失
    - 学习目标: 水泵选型、工况点计算

11. ⏳ **案例11: 串联渠系水力计算**
    - 核心理论: 多级系统、水位衔接
    - 学习目标: 反推法、系统优化

12. ⏳ **案例12: 复杂渠系网络计算**
    - 核心理论: 网络方程、流量分配
    - 学习目标: 数值求解、优化调度

---

## 第二部分：非恒定流与数值算法 🆕

### 第五阶段：非恒定流基础（规划中 0/3）

13. ⏳ **案例13: 渠道闸门启闭过程模拟** ⭐⭐⭐
    - 核心理论: 圣维南方程、波的传播
    - 学习目标: 非恒定流计算、初边值条件
    - 数值方法: 显式差分法（Lax、MacCormack）

14. ⏳ **案例14: 渠道洪水演进计算** ⭐⭐⭐
    - 核心理论: 洪水波传播、衰减与滞后
    - 学习目标: 洪水预报、马斯京根法
    - 数值方法: 运动波、扩散波、动力波

15. ⏳ **案例15: 泵站启停水位波动分析** ⭐⭐⭐⭐
    - 核心理论: 快速变化过程、水锤理论
    - 学习目标: 泵站边界条件、安全水位验算
    - 数值方法: 隐式差分法、Preissmann格式

### 第六阶段：数值算法深入（规划中 0/2）

16. ⏳ **案例16: 特征线法求解圣维南方程** ⭐⭐⭐⭐
    - 核心理论: 特征线理论、相容方程
    - 学习目标: 特征线法编程实现
    - 数值方法: MOC（Method of Characteristics）
    - 对比: 与有限差分法对比分析

17. ⏳ **案例17: 有限体积法与通量限制器** ⭐⭐⭐⭐⭐
    - 核心理论: 守恒律、Riemann问题
    - 学习目标: 激波捕捉、高阶精度
    - 数值方法: FVM、HLL/HLLC求解器、MUSCL重构、TVD限制器
    - 高级: 二阶精度格式实现

### 第七阶段：高级应用（规划中 0/3）

18. ⏳ **案例18: 溃坝波传播模拟** ⭐⭐⭐⭐⭐
    - 核心理论: 激波、稀疏波、Ritter解
    - 学习目标: 干湿边界处理、风险评估
    - 数值方法: FVM + 激波捕捉
    - 验证: 与理论解对比

19. ⏳ **案例19: 多闸门渠系动态调度优化** ⭐⭐⭐⭐⭐
    - 核心理论: 系统动力学、优化算法
    - 学习目标: 智能调度、控制策略
    - 优化方法: 遗传算法（GA）、粒子群算法（PSO）
    - 应用: 为《明渠控制》课程打基础

20. ⏳ **案例20: 二维明渠水流模拟** ⭐⭐⭐⭐⭐
    - 核心理论: 二维浅水波方程
    - 学习目标: 漫滩模拟、流场分析
    - 数值方法: 2D FVM、非结构网格
    - 可视化: 三维流场展示

## 目录结构

```
open-channel-hydraulics/
├── README.md                    # 本文件
├── START_HERE.md               # 快速入门指南（待创建）
│
├── chapters/                   # 教材章节
│   ├── chapter-01-basics/      # 第1章：基础知识
│   ├── chapter-02-uniform/     # 第2章：均匀流
│   ├── chapter-03-structures/  # 第3章：水工建筑物
│   ├── chapter-04-gvf/         # 第4章：非均匀流
│   ├── chapter-05-systems/     # 第5章：复杂系统
│   ├── chapter-06-unsteady-theory/    # 第6章：非恒定流理论 🆕
│   ├── chapter-07-numerical-methods/  # 第7章：数值算法详解 🆕
│   └── chapter-08-advanced-applications/ # 第8章：高级应用 🆕
│
├── code/                       # 代码实现
│   ├── models/                 # 计算模型
│   │   ├── channel.py         # 明渠类
│   │   ├── steady_flow.py     # 恒定流模型
│   │   ├── unsteady_flow.py   # 非恒定流模型 🆕
│   │   ├── structures.py      # 建筑物类
│   │   └── network.py         # 网络类
│   │
│   ├── solvers/                # 求解器 🆕
│   │   ├── steady/            # 恒定流求解器
│   │   │   ├── uniform_flow.py
│   │   │   └── gradually_varied.py
│   │   └── unsteady/          # 非恒定流求解器 🆕
│   │       ├── explicit_fdm.py    # 显式差分
│   │       ├── implicit_fdm.py    # 隐式差分
│   │       ├── moc.py             # 特征线法
│   │       ├── fvm.py             # 有限体积法
│   │       └── riemann_solvers.py # Riemann求解器
│   │
│   ├── examples/               # 案例代码
│   │   ├── case_01_to_12/     # 恒定流案例
│   │   └── case_13_to_20/     # 非恒定流案例 🆕
│   │
│   └── utils/                  # 工具函数
│       ├── hydraulics.py      # 水力计算
│       ├── numerical.py       # 数值方法工具 🆕
│       ├── plotting.py        # 绘图工具
│       ├── validation.py      # 验证工具
│       └── optimization.py    # 优化算法 🆕
│
├── docs/                       # 文档
│   └── zh/                     # 中文文档
│       ├── 明渠水力学案例驱动教学体系.md
│       ├── 扩展教学体系-非恒定流与算法.md  🆕
│       ├── 数值算法详解.md              🆕
│       ├── 章节规划.md
│       ├── 公式推导手册.md（待创建）
│       ├── 计算方法指南.md（待创建）
│       └── 工程应用指南.md（待创建）
│
├── tests/                      # 测试代码
│   ├── test_models/           # 模型测试
│   ├── test_cases/            # 案例测试
│   └── test_validation/       # 验证测试
│
└── resources/                  # 资源文件
    ├── images/                # 图片
    │   ├── channel_types/     # 渠道类型
    │   ├── structures/        # 建筑物
    │   └── examples/          # 案例图片
    └── data/                  # 数据文件
        ├── roughness.csv      # 糙率表
        ├── pump_curves.csv    # 水泵特性
        └── validation_data/   # 验证数据
```

## 核心知识点

### 基础理论

- ✅ 连续性方程：Q = A·v
- ✅ 能量方程：z + h + v²/(2g) = const
- ✅ 动量方程：Σ F = ρQ(v₂ - v₁)
- ✅ 曼宁公式：v = (1/n)·R^(2/3)·i^(1/2)
- ✅ 谢才公式：v = C·√(R·i)

### 水力要素

- 梯形断面：A, χ, R, B
- 矩形断面：A, χ, R
- 圆形断面：A, χ, R
- 复合断面：分块计算

### 水流状态

- 均匀流：i = J，水深不变
- 非均匀流：渐变流、急变流
- 临界流：Fr = 1
- 缓流：Fr < 1
- 急流：Fr > 1

### 水工建筑物

- 堰：薄壁堰、宽顶堰、实用堰
- 闸：自由出流、淹没出流
- 跌水：水跃、消能
- 桥涵：壅水、过流能力

### 计算方法

- 试算法：正常水深、临界水深
- 迭代法：非线性方程求解
- 分段求和法：水面线计算
- 矩阵法：网络计算

## 环境要求

### 软件要求

- Python 3.8 或更高版本
- NumPy (数值计算)
- SciPy (科学计算)
- Matplotlib (绘图)
- pandas (数据处理)
- pytest (测试)

### 安装步骤

```bash
# 1. 进入项目目录
cd books/open-channel-hydraulics

# 2. 创建虚拟环境（推荐）
python -m venv venv
source venv/bin/activate  # Linux/Mac
# 或 venv\Scripts\activate  # Windows

# 3. 安装依赖
pip install numpy scipy matplotlib pandas pytest

# 4. 验证安装
python -c "import numpy, scipy, matplotlib; print('安装成功！')"
```

## 学习路径

### 零基础学习者

1. 学习前置知识（高等数学基础）
2. 按顺序学习案例1-12
3. 完成每个案例的计算实验
4. 独立完成综合设计任务

### 有水力学基础

1. 快速浏览前3个案例
2. 重点学习案例4-12
3. 深入研究代码实现
4. 尝试扩展新案例

### 工程技术人员

1. 直接学习感兴趣的案例
2. 使用计算工具解决实际问题
3. 参考验证方法确保计算准确
4. 根据需要定制代码

## 与其他课程的关系

### 与《水系统控制论》的关系

```
水系统控制论（已完成）
    ↓
    提供控制理论和方法
    ↓
明渠水力学计算（本课程）
    ↓
    提供水力学计算基础
    ↓
明渠控制（未来课程）
    ↓
    = 水力学 + 控制论
    ↓
实际工程应用
```

### 知识互补

- **控制论**：告诉你如何控制（控制器设计）
- **水力学**：告诉你被控对象的特性（明渠水流规律）
- **明渠控制**：将两者结合应用于实际工程

## 参考资料

### 主要参考书

1. 《明渠水力学》- 武汉水利电力大学
2. 《水力学》- 高等教育出版社
3. 《渠道与渠系建筑物》
4. 《灌溉排水工程学》

### 技术手册

1. 《水力计算手册》
2. 《渠道糙率手册》
3. 《水工建筑物设计规范》

### 在线资源

1. HEC-RAS 用户手册（美国陆军工程兵团）
2. SWMM 文档（EPA）
3. 开放教育资源

## 开发计划

### 第一阶段（已完成）
- ✅ 确定教材大纲
- ✅ 设计12个案例体系
- ✅ 创建目录结构

### 第二阶段（进行中）
- 🔄 开发基础模型代码
- 🔄 实现案例1-3
- 🔄 编写教材第1-2章

### 第三阶段（计划中）
- ⏳ 实现案例4-7
- ⏳ 开发水工建筑物模型
- ⏳ 编写教材第3章

### 第四阶段（计划中）
- ⏳ 实现案例8-9
- ⏳ 开发非均匀流计算
- ⏳ 编写教材第4章

### 第五阶段（计划中）
- ⏳ 实现案例10-12
- ⏳ 开发网络计算模型
- ⏳ 编写教材第5章

## 贡献

欢迎贡献新的案例、改进计算方法或报告问题！

### 如何贡献

1. 报告错误或建议
2. 提供工程案例数据
3. 改进计算代码
4. 完善文档说明
5. 添加验证数据

## 版本历史

- **v1.0-outline** (2025-10-29)
  - 完成教材大纲设计
  - 确定12个案例体系
  - 创建基础目录结构

## 许可证

请参考项目根目录的 LICENSE 文件。

## 联系方式

如有问题或建议，请通过 GitHub Issues 反馈。

---

**最后更新**: 2025-10-29
**开发状态**: 规划阶段
**预计完成**: 待定
