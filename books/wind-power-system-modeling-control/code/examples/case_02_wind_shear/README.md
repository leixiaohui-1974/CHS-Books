# 案例2: 风切变与湍流

**难度**: ⭐⭐  
**类型**: 风资源评估进阶

---

## 📋 案例说明

### 工程背景

风速随高度变化（风切变）和随时间波动（湍流）是风力发电的两个关键特性：

- **风切变**：决定风力机的轮毂高度选择
- **湍流**：影响风力机的疲劳载荷和发电功率波动

本案例演示如何建模和分析这两种现象。

### 学习目标

1. **掌握风切变模型**：指数律和对数律
2. **理解湍流强度**：定义、计算和IEC标准
3. **学会风廓线分析**：风速垂直分布
4. **工程应用**：风力机轮毂高度优化

---

## 🎯 核心知识点

### 1. 风切变模型

#### (1) 指数律（Power Law）

最常用的风切变模型：

```
v(h) = v_ref * (h / h_ref)^α
```

**参数**：
- `v_ref`: 参考高度风速 (m/s)
- `h_ref`: 参考高度 (m)
- `h`: 目标高度 (m)
- `α`: **风切变指数**，典型值：
  - 平坦地形：0.10-0.14
  - 粗糙地形：0.20-0.25
  - 城市：0.30-0.40

**特点**：
- 简单实用
- 广泛应用于风电工程
- 参数α需要实测确定

**参数估算**：

如果已知两个高度的风速，可反算α：

```
α = ln(v2/v1) / ln(h2/h1)
```

#### (2) 对数律（Logarithmic Law）

基于空气动力学边界层理论：

```
v(h) = v_ref * ln(h/z0) / ln(h_ref/z0)
```

**参数**：
- `z0`: **粗糙度长度** (m)，典型值：
  - 平静水面：0.0001-0.001
  - 草地：0.01-0.04
  - 农田：0.05-0.15
  - 森林：0.5-1.0
  - 城市：1.0-3.0

**特点**：
- 物理意义明确
- 适用于大气边界层
- 需要粗糙度参数

#### (3) 两种模型对比

| 特性 | 指数律 | 对数律 |
|------|--------|--------|
| 复杂度 | 简单 | 中等 |
| 参数 | α | z₀ |
| 适用性 | 通用 | 边界层 |
| 工程应用 | 常用 | 特殊场合 |

在典型风电场条件下，两种模型差异<5%。

---

### 2. 湍流强度

#### (1) 定义

湍流强度（Turbulence Intensity, TI）定义为：

```
TI = σ_v / v_mean
```

其中：
- `σ_v`: 风速标准差 (m/s)
- `v_mean`: 平均风速 (m/s)

TI反映风速的波动程度，典型值0.10-0.25。

#### (2) IEC 61400-1标准

IEC标准定义了三个湍流等级：

| 等级 | I_ref | 湍流描述 | 典型地形 |
|------|-------|----------|----------|
| A | 0.16 | 高湍流 | 复杂地形、沿海 |
| B | 0.14 | 中等湍流 | 一般地形 |
| C | 0.12 | 低湍流 | 平坦地形、海上 |

标准湍流模型：

```
TI = I_ref * (0.75 * v_mean + 5.6) / (v_mean + 5.6)
```

**说明**：
- TI随风速增加而降低
- 低风速时湍流强度较高

#### (3) 湍流对风力机的影响

**疲劳载荷**：
- 高湍流 → 载荷波动大 → 寿命缩短
- 设计时需考虑极端湍流事件

**功率波动**：
- 湍流 → 风速波动 → 功率波动
- 影响电网稳定性

**控制难度**：
- 湍流增加控制系统响应难度
- 需要更快的控制器

---

### 3. Kaimal湍流谱

描述湍流能量在频率域的分布：

```
S(f) = 4 * σ_v² * L / v_mean / (1 + 6*f*L/v_mean)^(5/3)
```

其中：
- `f`: 频率 (Hz)
- `L`: 积分尺度 (m)，典型值340.2m
- `σ_v`: 风速标准差

**特点**：
- 低频能量高（大尺度涡旋）
- 高频能量低（小尺度涡旋）
- 符合 -5/3 幂律

---

## 💻 代码结构

### 核心类

#### 1. `WindShear` - 风切变模型

```python
class WindShear:
    def __init__(self, model="power_law"):
        """model: 'power_law' 或 'log_law'"""
    
    def power_law(self, v_ref, h_ref, h, alpha=0.14):
        """指数律"""
    
    def log_law(self, v_ref, h_ref, h, z0=0.1):
        """对数律"""
    
    @staticmethod
    def estimate_alpha(v1, h1, v2, h2):
        """估算风切变指数"""
```

#### 2. `TurbulenceIntensity` - 湍流模型

```python
class TurbulenceIntensity:
    def calculate(self, wind_speeds):
        """计算湍流强度"""
    
    def iec_category(self, v_mean, category="A"):
        """IEC标准湍流强度"""
    
    def kaimal_spectrum(self, f, v_mean, sigma_v):
        """Kaimal功率谱"""
    
    def generate_turbulent_wind(self, v_mean, TI, duration, dt):
        """生成湍流风速时间序列"""
    
    def classify_terrain(self, TI):
        """根据TI估计地形类型"""
```

#### 3. `WindProfile` - 风廓线模型

```python
class WindProfile:
    def __init__(self, v_ref, h_ref, shear_model="power_law"):
        """整合风切变和湍流"""
    
    def get_profile(self, heights, **kwargs):
        """获取风速廓线"""
    
    def hub_height_wind(self, h_hub, **kwargs):
        """计算轮毂高度风速"""
    
    def rotor_equivalent_wind(self, h_hub, rotor_diameter, **kwargs):
        """计算风轮等效风速（考虑风切变）"""
```

---

## 🚀 运行案例

### 安装依赖
```bash
pip install numpy scipy matplotlib
```

### 运行
```bash
cd code/examples/case_02_wind_shear
python main.py
```

### 输出

**1. 风切变模型**
- 不同地形的指数律
- 不同粗糙度的对数律

**2. 模型对比**
- 指数律 vs 对数律
- 相对差异分析

**3. 湍流强度**
- IEC标准湍流等级
- 湍流风速时间序列
- Kaimal功率谱
- 不同TI对比

**4. 工程应用**
- 风廓线与风力机尺寸
- 风切变对不同机组的影响

---

## 📊 实验结果

### 典型输出

```
演示1: 风切变模型
==================================================

参考条件: v_ref = 8.0 m/s @ h_ref = 10 m

平坦地形 (α=0.14):
  80m:  11.01 m/s (+37.6%)
  120m: 12.20 m/s (+52.5%)

粗糙地形 (α=0.20):
  80m:  11.89 m/s (+48.6%)
  120m: 13.68 m/s (+71.0%)

城市 (α=0.30):
  80m:  13.70 m/s (+71.3%)
  120m: 16.85 m/s (+110.6%)
```

**关键发现**：
- 从10m到120m，平坦地形风速增加52.5%
- 城市地形风速增加110.6%
- **轮毂越高，发电量越大**

```
演示3: 湍流强度
==================================================

IEC标准湍流强度 (v=10 m/s):
  类别 A: TI = 0.145 - 高湍流地形（丘陵、沿海）
  类别 B: TI = 0.127 - 中等湍流地形（农田、草地）
  类别 C: TI = 0.109 - 低湍流地形（平坦海面、开阔平原）

生成的湍流风速:
  设定TI: 0.150
  实际TI: 0.148
  平均值: 10.02 m/s
  标准差: 1.48 m/s
```

---

## 🔬 进阶实验

### 实验1：风切变对发电量的影响

**任务**：计算不同轮毂高度的年发电量差异

**提示**：
- 使用案例1的Weibull分布
- 应用风切变将10m风速外推到轮毂高度
- 计算功率并积分

```python
# 参考代码框架
from models.wind_resource import WeibullDistribution, WindShear

# 10m风速分布
weibull_10m = WeibullDistribution(k=2.0, c=7.0)

# 风切变模型
shear = WindShear(model="power_law")

# 计算80m风速
v_10m_samples = weibull_10m.sample(8760)
v_80m_samples = shear.power_law(v_10m_samples, 10, 80, alpha=0.14)

# 对比平均风速
print(f"10m平均: {np.mean(v_10m_samples):.2f} m/s")
print(f"80m平均: {np.mean(v_80m_samples):.2f} m/s")
```

### 实验2：湍流对控制系统的影响

**任务**：分析湍流风速下的MPPT控制性能

```python
# 生成湍流风速
turb = TurbulenceIntensity()
v_turb = turb.generate_turbulent_wind(v_mean=10, TI=0.15, 
                                      duration=600, dt=0.1)

# 分析功率波动（需要风轮功率曲线，后续案例）
# P = 0.5 * rho * A * Cp * v^3
```

### 实验3：风廓线实测数据拟合

**任务**：从多高度实测数据拟合α或z₀

```python
# 实测数据
heights = np.array([10, 30, 50, 80])
wind_speeds = np.array([6.5, 7.8, 8.6, 9.5])

# 拟合α（使用最小二乘）
from scipy.optimize import curve_fit

def power_law_fit(h, alpha):
    return wind_speeds[0] * (h / heights[0])**alpha

alpha_fit, _ = curve_fit(power_law_fit, heights, wind_speeds)
print(f"拟合的α: {alpha_fit[0]:.3f}")
```

---

## 📝 作业练习

### 练习1：基础计算

已知10m高度风速为6 m/s，地形α=0.18：

1. 计算50m、80m、120m的风速
2. 如果参考高度改为50m，重新计算α值
3. 对比指数律和对数律的结果（z₀=0.1m）

### 练习2：湍流分析

某风电场实测数据（10分钟平均）：
- 平均风速：8.5 m/s
- 标准差：1.3 m/s

问题：
1. 计算湍流强度
2. 判断IEC等级（A/B/C）
3. 估计地形类型
4. 计算Kaimal谱（选定频率）

### 练习3：风力机选型

已知条件：
- 10m风速：7.2 m/s (Weibull, k=2.0, c=8.0)
- 地形α=0.16
- 湍流：IEC Class A

候选机型：
- 机型1：h_hub=80m, D=90m
- 机型2：h_hub=100m, D=110m
- 机型3：h_hub=120m, D=130m

任务：
1. 计算各机型轮毂高度风速
2. 计算风轮等效风速
3. 考虑风切变对功率的影响
4. 推荐最优机型

**提示**：
- 功率 ∝ v³
- 需考虑投资成本

---

## 🌟 工程意义

### 1. 轮毂高度优化

**收益**：
- 每增加10m，风速提升2-4%
- 功率提升6-12%

**成本**：
- 塔架成本增加
- 基础成本增加
- 运维难度增加

**优化目标**：
```
max [年发电量收益 - 额外投资成本]
```

典型结论：
- 平坦地形：80-100m
- 山地：100-120m
- 低风速区：120-140m

### 2. 湍流等级选择

风力机设计需匹配场址湍流：

| 场址湍流 | 选择等级 | 影响 |
|----------|----------|------|
| 低 | Class C | 成本低，寿命长 |
| 中 | Class B | 标准设计 |
| 高 | Class A | 加强设计，成本高 |

**错误选择后果**：
- 选低了 → 载荷超设计 → 提前失效
- 选高了 → 过设计 → 成本浪费

### 3. 微观选址

利用风切变和湍流信息：

1. **避开高湍流区**：
   - 山脊背风侧
   - 森林下风向
   - 建筑物附近

2. **选择平坦区域**：
   - 湍流低
   - 风切变小
   - 风速高

3. **机位布置**：
   - 考虑尾流湍流
   - 保持足够间距

---

## 📚 参考资料

### 标准规范
- IEC 61400-1: 风力发电机组设计要求
- IEC 61400-12-1: 功率特性测试
- GB/T 18451.1: 风力发电机组安全要求

### 参考书籍
1. 《风能资源评估理论与方法》，申彦波
2. "Wind Energy Handbook", T. Burton
3. "Turbulence in the Atmosphere", J.C. Kaimal

### 在线资源
- [Wind Resource Assessment](https://www.nrel.gov/)
- [IEC Wind Standards](https://www.iec.ch/)

---

## 🔗 相关案例

- **案例1**: 风速统计分析 - Weibull分布基础
- **案例3**: 叶片气动力 - 风速输入
- **案例4**: 风轮功率特性 - 使用风廓线
- **案例9**: 传动系统建模 - 湍流载荷

---

**更新日期**: 2025-11-04  
**作者**: CHS-BOOKS  
**难度**: ⭐⭐ 基础

🌬️ **理解风的垂直和时间特性！**
