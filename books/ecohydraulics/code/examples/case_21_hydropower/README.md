# 案例21:水电站生态调度多目标优化

## 案例简介

本案例研究水电站运行中发电效益与生态需求的平衡问题。通过建立多目标优化模型,在满足发电任务的同时兼顾下游河流的生态流量需求,寻求发电量与生态效益的Pareto最优解集,为水电站生态调度提供决策支持。该方法可应用于梯级水电站联合调度、生态流量保障等实际问题。

## 理论背景

传统水电站调度以发电量最大化为唯一目标,往往导致下游河流水文情势改变,影响水生态系统健康。生态调度需要在以下目标间寻求平衡:

**1. 发电效益最大化**
P = η * ρ * g * Q * H
其中η为效率,Q为流量,H为水头

**2. 生态流量保障**
- 基本生态流量:维持河流基本生态功能,通常为多年平均流量的10-30%
- 适宜生态流量:维持良好生态状况,通常为40-60%
- 理想生态流量:接近天然状态,通常为60-90%

**3. Pareto最优**
多目标优化问题的解集,任何目标的改善都会导致其他目标恶化。通过Pareto前沿分析,找到权衡方案。

**生态效益评分**考虑流量偏离程度、水温影响、鱼类繁殖需求等因素,通常采用0-100分制。

## 代码说明

### 主要类和函数

1. **HydropowerScheduling类** - 水电调度优化
   - `power_generation()`: 计算发电量
   - `ecological_benefit()`: 评估生态效益
   - `multi_objective_optimization()`: 多目标优化求解

### 核心算法

```python
# 发电量计算
P = efficiency * ρ * g * Q * H / 1e6  # MW

# 生态效益评分
eco_score = 100 * (1 - abs(Q - Q_eco) / Q_eco)^2

# Pareto前沿识别
for each solution i:
    if no other solution dominates i:
        add i to Pareto set
```

## 运行方法

```bash
cd /home/user/CHS-Books/books/ecohydraulics/code/examples/case_21_hydropower
python main.py
```

## 参数说明

### 水电站参数
- `capacity_MW`: 装机容量,如100MW
- `ecological_flow`: 生态流量,如50m³/s
- `efficiency`: 发电效率,通常0.85-0.95
- `head`: 水头高度,如50m

### 调度变量
- `discharge`: 下泄流量,决策变量
- `inflow`: 来水流量,外部输入
- `storage`: 水库蓄水,状态变量

## 预期结果说明

1. **Pareto最优解集**
   - 识别出约10-15个非劣解
   - 展示发电量-生态效益的权衡关系

2. **推荐调度方案**(综合最优)
   - 流量: 约80-100m³/s
   - 发电量: 35-40MW
   - 生态效益: 75-85分

3. **不同偏好方案**
   - 偏发电:流量150m³/s,发电55MW,生态60分
   - 平衡型:流量90m³/s,发电38MW,生态80分
   - 偏生态:流量60m³/s,发电28MW,生态92分

4. **可视化图表**
   - Pareto前沿散点图(发电量-生态效益)
   - 流量-双目标关系曲线
   - 推荐方案标注

## 生态意义与环境影响

### 生态意义

1. **生态保护**:保障下游河流生态流量,维护水生态系统健康
2. **可持续利用**:实现水资源开发与保护的协调发展
3. **决策支持**:为水库调度提供科学依据,避免"一刀切"

### 实际应用

1. **三峡水库生态调度**
   - 4-6月实施人工洪峰,刺激四大家鱼产卵
   - 保障中华鲟产卵期流量
   - 综合考虑防洪、发电、航运、生态

2. **新安江水库生态调度**
   - 维持下游千岛湖水温稳定
   - 保障下泄流量满足生态需求
   - 优化发电与生态的平衡

3. **其他应用**
   - 黄河小浪底水库生态调度
   - 西南梯级水电站联合调度
   - 欧洲阿尔卑斯地区水电生态调度

### 环境效益

- 恢复下游自然水文节律
- 改善鱼类繁殖条件
- 维持河流生物多样性
- 保障河口咸淡水平衡
- 减少水库温室气体排放

## 参考文献

1. 郭生练, 刘攀, 肖义等. 水库生态调度研究进展与展望[J]. 水力发电学报, 2013, 32(6): 1-11.

2. Richter BD, Thomas GA. Restoring environmental flows by modifying dam operations[J]. Ecology and Society, 2007, 12(1): 12.

3. 陈永柏, 许栋, 李锦等. 三峡水库生态调度试验对四大家鱼自然繁殖的影响[J]. 长江科学院院报, 2013, 30(11): 1-5.

4. 石小涛, 陈求稳, 常剑波. 水电工程生态调度原理与实践[M]. 北京:中国水利水电出版社, 2018.

5. Coello CAC, Lamont GB, Van Veldhuizen DA. Evolutionary algorithms for solving multi-objective problems[M]. New York: Springer, 2007.
