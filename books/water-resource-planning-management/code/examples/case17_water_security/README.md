# 案例6.2：供水安全风险分析

## 工程背景

城市供水系统面临水源短缺、设施故障、水质突发事件等多种风险。通过情景分析和蒙特卡洛模拟，评估供水保证率和缺水风险，为应急预案和水源配置提供决策支持。

## 案例目标

1. 理解供水安全的风险内涵
2. 掌握情景分析方法
3. 学习供水可靠性评估
4. 能够制定风险应对策略

## 主要内容

### 1. 供水安全风险

**水源风险**：
- 来水不足（枯水年）
- 水质超标
- 水源冲突

**系统风险**：
- 管道爆管
- 水厂故障
- 泵站停电

**需求风险**：
- 用水激增
- 峰值超预期

### 2. 情景设置

**正常情景**：
- 正常来水
- 设施正常
- 需水正常

**干旱情景**：
- 来水减少30%
- 需水增加10%

**设施故障情景**：
- 主水厂停运
- 能力下降50%

**复合情景**：
- 干旱+故障

## 技术路线

```python
供水系统
  ├─ 水源（水库）
  ├─ 水厂
  └─ 用户需求
         ↓
不确定性
  ├─ 来水随机
  ├─ 设施可靠性
  └─ 需水波动
         ↓
情景生成
  ├─ 正常（概率60%）
  ├─ 干旱（概率25%）
  ├─ 故障（概率10%）
  └─ 复合（概率5%）
         ↓
风险评估
  ├─ 缺水概率
  ├─ 缺水量期望
  ├─ VaR/CVaR
  └─ 供水保证率
         ↓
应对策略
  ├─ 增加水源
  ├─ 应急调度
  └─ 需求管理
```

## 核心算法

### 1. 水量平衡模拟

```python
V(t+1) = V(t) + Inflow(t) - Supply(t)
Supply(t) = min(Demand(t), Available(t))
Shortage(t) = Demand(t) - Supply(t)
```

### 2. 情景概率

```python
P(正常) = 0.60
P(干旱) = 0.25
P(故障) = 0.10
P(复合) = 0.05
```

### 3. 风险指标

**供水保证率**：
```python
R = (T - T_shortage) / T
```

**缺水风险**：
```python
Risk = Σ P_s * Shortage_s
```

## 运行方法

```bash
cd code/examples/case17_water_security
python main.py
```

## 预期结果

### 情景分析
- **正常情景**: 缺水概率0%, 供水保证率100%
- **干旱情景**: 缺水概率15%, 缺水量50万m³/年
- **故障情景**: 缺水概率8%, 缺水量30万m³/年
- **复合情景**: 缺水概率35%, 缺水量120万m³/年

### 综合风险
- **加权缺水概率**: 9.5%
- **年期望缺水量**: 20万m³
- **VaR(95%)**: 80万m³
- **CVaR(95%)**: 110万m³

## 思考题

1. 供水保证率95%意味着什么？
2. 如何确定合理的供水安全标准？
3. 情景分析vs蒙特卡洛的优缺点？
4. 如何制定应急供水预案？
5. 需求侧管理如何降低风险？

## 扩展方向

1. **多水源系统**：联合调度优化
2. **管网可靠性**：节点脆弱性分析
3. **水质风险**：污染扩散模拟
4. **韧性评估**：快速恢复能力
5. **经济分析**：缺水损失评估

## 参考文献

1. Hashimoto T, et al. Reliability, Resiliency, and Vulnerability Criteria for Water Resource System Performance Evaluation[J]. Water Resources Research, 1982, 18(1): 14-20.
2. Moy WS, et al. A Programming Model for Analysis of the Reliability, Resilience, and Vulnerability of a Water Supply Reservoir[J]. Water Resources Research, 1986, 22(4): 489-498.

## 作者信息

- 案例编号：Case 6.2
- 难度等级：⭐⭐⭐⭐ (中高级)
- 所需时间：6-8小时
- 更新日期：2025-11-02
