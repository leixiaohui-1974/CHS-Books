# 第8章：生态修复技术

**学习时间**: 4小时  
**考试频率**: ⭐⭐⭐⭐  
**难度**: ⭐⭐⭐⭐

---

## 一、河流生态修复概述

### 1.1 退化原因

**人类活动影响**：
- 水坝建设（河道阻隔）
- 河道渠化（栖息地单一）
- 过度取水（生态流量不足）
- 污染排放（水质恶化）
- 河床采砂（底质破坏）

**生态后果**：
- 生物多样性降低
- 鱼类种群衰退
- 河岸植被退化
- 河流自净能力下降

### 1.2 修复目标

**(1) 水文连通性**：
- 纵向连通（鱼道）
- 横向连通（漫滩）
- 垂向连通（地表-地下水交换）

**(2) 物理栖息地**：
- 深潭-浅滩结构
- 多样化底质
- 河岸带植被

**(3) 生态功能**：
- 生物通道
- 产卵场
- 索饵场
- 越冬场

---

## 二、鱼道工程

### 2.1 鱼道类型

**(1) 竖缝式鱼道**：

**水力特性**：

$$Q = C \cdot b \cdot h^{3/2}$$

$C$为流量系数（0.4~0.5）

**流速**：

$$v = \frac{Q}{A} \leq v_{max}$$

鲑鱼：$v_{max} = 2.0$m/s

**(2) 池堰式鱼道**：

**堰顶跌差**：

$$\Delta h = 0.15 \sim 0.30 \text{ m}$$

**池长**：

$$L = 2 \sim 3 \text{ m}$$

**消能率**：

$$E = \frac{\rho g Q \Delta h}{V_{pool}} \leq 150 \text{ W/m}^3$$

**(3) 自然仿生鱼道**：

- 底坡：$i = 0.01 \sim 0.05$
- 蜿蜒曲线河道
- 天然底质

### 2.2 鱼道设计准则

**流速控制**：

$$v_{mean} \leq 0.6 v_{burst}$$

其中$v_{burst}$为目标鱼类爆发游泳速度

**休息池**：

每10~15m设置休息池，流速$< 0.3$m/s

**进口位置**：

- 坝下游吸引流
- 流量$\geq 5\%$总流量

---

## 三、河岸带修复

### 3.1 河岸植被配置

**植被分区**：

**(1) 水生植被区**（水下~水位线）：
- 沉水植物：苦草、黑藻
- 挺水植物：芦苇、香蒲

**(2) 湿生植被区**（水位线~高水位）：
- 灌木：柳树、水杉
- 草本：莎草、蒲苇

**(3) 旱生植被区**（高水位以上）：
- 乔木：杨树、榆树
- 灌木：紫穗槐

### 3.2 生态护岸

**技术类型**：

**(1) 植物护岸**：
- 植被毯
- 生态袋
- 植生型生态混凝土

**(2) 生物工程护岸**：
- 柳树桩护岸
- 活体柳枝编笼
- 椰丝网植被护坡

**护岸稳定性**：

$$\tau_{critical} = \tau_0 (1 + k_v CR)$$

$CR$为植被覆盖度，$k_v$为植被系数

---

## 四、河床形态修复

### 4.1 深潭-浅滩系统

**设计参数**：

**深潭**：
- 深度：$h_{pool} > 1.5 h_{mean}$
- 长度：$L_{pool} = 2 \sim 3B$
- 间距：$\lambda = 5 \sim 7B$

**浅滩**：
- 深度：$h_{riffle} < 0.7 h_{mean}$
- 坡度：$i = 0.01 \sim 0.03$

### 4.2 底质改良

**卵石投放**：

$$V_{stone} = A \cdot d \cdot (1 - \phi)$$

- $A$：修复面积
- $d$：铺设厚度（0.3~0.5m）
- $\phi$：孔隙率（0.35~0.45）

**稳定性校核**：

$$d_{50} \geq \frac{\tau}{\gamma_s - \gamma_w} \cdot \frac{1}{K_s}$$

---

## 五、生态调度

### 5.1 分层取水

**温度分层**：

$$\frac{dT}{dz} > 0.5 \text{°C/m}$$

**取水口设置**：
- 表层取水（夏季）
- 中层取水（春秋）
- 深层取水（冬季）

### 5.2 生态水位波动

**模拟天然过程**：

$$Q(t) = Q_{base} + Q_{flood} \cdot \sin(2\pi t / T)$$

**关键水位**：
- 鱼类产卵水位
- 湿地补水水位
- 河漫滩淹没水位

---

## 六、Python实现

```python
import numpy as np
import matplotlib.pyplot as plt
from scipy.optimize import fsolve

class EcologicalRestoration:
    """生态修复技术"""
    
    def __init__(self, g=9.81):
        self.g = g
    
    def vertical_slot_fishway(self, Q, b, h):
        """
        竖缝式鱼道流量计算
        
        Q = C·b·h^(3/2)
        
        参数:
            Q: 流量 (m³/s)
            b: 竖缝宽度 (m)
            h: 水深 (m)
        """
        C = 0.45  # 流量系数
        Q_calc = C * b * h**1.5
        
        return Q_calc
    
    def pool_weir_fishway_energy(self, Q, delta_h, V_pool):
        """
        池堰式鱼道消能率
        
        E = ρgQΔh / V_pool (W/m³)
        
        参数:
            Q: 流量 (m³/s)
            delta_h: 堰顶跌差 (m)
            V_pool: 池容积 (m³)
        """
        rho = 1000  # kg/m³
        
        E = (rho * self.g * Q * delta_h) / V_pool
        
        return E
    
    def fish_swimming_speed(self, L_fish, temperature=15):
        """
        鱼类游泳速度估算
        
        爆发速度: v_burst = 10·L_fish (BL/s)
        持续速度: v_sustained = 3·L_fish
        
        参数:
            L_fish: 鱼体长 (m)
            temperature: 水温 (°C)
        """
        # 体长法
        v_burst = 10 * L_fish  # m/s
        v_sustained = 3 * L_fish
        v_prolonged = 5 * L_fish
        
        # 温度修正（简化）
        T_factor = 1 + 0.01 * (temperature - 15)
        
        v_burst *= T_factor
        v_sustained *= T_factor
        
        return {
            'v_burst': v_burst,
            'v_sustained': v_sustained,
            'v_prolonged': v_prolonged
        }
    
    def fishway_velocity_check(self, Q, b, h, L_fish=0.5):
        """
        鱼道流速校核
        
        要求: v_mean ≤ 0.6·v_burst
        """
        # 鱼道平均流速
        A = b * h
        v_mean = Q / A
        
        # 鱼类游泳能力
        speeds = self.fish_swimming_speed(L_fish)
        v_burst = speeds['v_burst']
        
        # 校核
        v_allowable = 0.6 * v_burst
        
        safety_factor = v_allowable / v_mean
        
        return {
            'v_mean': v_mean,
            'v_burst': v_burst,
            'v_allowable': v_allowable,
            'safety_factor': safety_factor,
            'pass': safety_factor > 1.0
        }
    
    def riparian_vegetation_stability(self, tau, CR, k_v=0.5):
        """
        河岸植被护岸稳定性
        
        τ_critical = τ0(1 + k_v·CR)
        
        参数:
            tau: 作用剪切力 (Pa)
            CR: 植被覆盖度 (0~1)
            k_v: 植被系数
        """
        tau0 = 10  # 裸地临界剪切力 (Pa)
        
        tau_critical = tau0 * (1 + k_v * CR)
        
        safety_factor = tau_critical / tau
        
        return {
            'tau_critical': tau_critical,
            'safety_factor': safety_factor,
            'stable': safety_factor > 1.0
        }
    
    def stone_volume_for_restoration(self, A, d=0.4, phi=0.4):
        """
        底质改良卵石投放量
        
        V = A·d·(1-φ)
        
        参数:
            A: 修复面积 (m²)
            d: 铺设厚度 (m)
            phi: 孔隙率
        """
        V = A * d * (1 - phi)
        
        # 质量（假设密度2650 kg/m³）
        rho_s = 2650
        M = V * rho_s
        
        return {
            'volume': V,
            'mass': M,
            'thickness': d,
            'area': A
        }
    
    def ecological_flow_regime(self, Q_mean, duration_days=365):
        """
        生态流量过程模拟
        
        模拟天然变化模式
        """
        t = np.arange(duration_days)
        
        # 基流
        Q_base = 0.3 * Q_mean
        
        # 季节变化（春季洪峰）
        Q_seasonal = 0.5 * Q_mean * np.sin(2 * np.pi * (t - 90) / 365)
        
        # 随机波动
        np.random.seed(42)
        Q_random = 0.1 * Q_mean * np.random.randn(duration_days)
        
        # 总流量
        Q_total = Q_base + Q_seasonal + Q_random
        Q_total = np.maximum(Q_total, 0.1 * Q_mean)  # 最小值约束
        
        return t, Q_total
    
    def plot_restoration_analysis(self):
        """绘制生态修复分析图"""
        fig, axes = plt.subplots(2, 2, figsize=(16, 12))
        
        # 1. 鱼道流速与鱼类游泳能力
        ax1 = axes[0, 0]
        
        L_fish_values = np.array([0.1, 0.3, 0.5, 0.8, 1.0])  # m
        fish_names = ['小型', '中小型', '中型', '中大型', '大型']
        
        v_burst_values = []
        v_sustained_values = []
        
        for L in L_fish_values:
            speeds = self.fish_swimming_speed(L)
            v_burst_values.append(speeds['v_burst'])
            v_sustained_values.append(speeds['v_sustained'])
        
        x_pos = np.arange(len(fish_names))
        width = 0.35
        
        bars1 = ax1.bar(x_pos - width/2, v_burst_values, width,
                       label='爆发速度', color='red', alpha=0.7,
                       edgecolor='black', linewidth=1.5)
        bars2 = ax1.bar(x_pos + width/2, v_sustained_values, width,
                       label='持续速度', color='blue', alpha=0.7,
                       edgecolor='black', linewidth=1.5)
        
        # 推荐鱼道流速（0.6×爆发速度）
        v_fishway = 0.6 * np.array(v_burst_values)
        ax1.plot(x_pos, v_fishway, 'g--', linewidth=2.5,
                marker='s', markersize=8, label='推荐鱼道流速(0.6×爆发)')
        
        ax1.set_xticks(x_pos)
        ax1.set_xticklabels(fish_names)
        ax1.set_xlabel('鱼类体型', fontsize=11)
        ax1.set_ylabel('游泳速度 (m/s)', fontsize=11)
        ax1.set_title('鱼类游泳能力与鱼道设计', fontsize=13, fontweight='bold')
        ax1.legend()
        ax1.grid(True, alpha=0.3, axis='y')
        
        # 2. 池堰式鱼道消能率
        ax2 = axes[0, 1]
        
        Q_fishway = 0.5  # m³/s
        V_pool_range = np.linspace(1, 10, 100)  # m³
        
        delta_h_values = [0.15, 0.20, 0.25, 0.30]
        colors_dh = ['blue', 'green', 'orange', 'red']
        
        for delta_h, color in zip(delta_h_values, colors_dh):
            E_values = [self.pool_weir_fishway_energy(Q_fishway, delta_h, V)
                       for V in V_pool_range]
            
            ax2.plot(V_pool_range, E_values, color=color, linewidth=2.5,
                    label=f'Δh={delta_h}m')
        
        # 推荐上限
        ax2.axhline(150, color='black', linestyle='--', linewidth=2,
                   label='推荐上限=150W/m³')
        
        ax2.set_xlabel('池容积 V (m³)', fontsize=11)
        ax2.set_ylabel('消能率 E (W/m³)', fontsize=11)
        ax2.set_title(f'池堰式鱼道消能率（Q={Q_fishway}m³/s）',
                     fontsize=13, fontweight='bold')
        ax2.legend()
        ax2.grid(True, alpha=0.3)
        ax2.set_ylim([0, 300])
        
        # 3. 河岸植被护坡效果
        ax3 = axes[1, 0]
        
        CR_range = np.linspace(0, 1, 100)
        
        k_v_values = [0.3, 0.5, 0.8]
        colors_kv = ['blue', 'green', 'red']
        
        for k_v, color in zip(k_v_values, colors_kv):
            tau_crit = [10 * (1 + k_v * CR) for CR in CR_range]
            
            ax3.plot(CR_range * 100, tau_crit, color=color,
                    linewidth=2.5, label=f'k_v={k_v}')
        
        # 裸地临界剪切力
        ax3.axhline(10, color='gray', linestyle='--', linewidth=2,
                   alpha=0.7, label='裸地τ0=10Pa')
        
        ax3.set_xlabel('植被覆盖度 CR (%)', fontsize=11)
        ax3.set_ylabel('临界剪切力 τ_critical (Pa)', fontsize=11)
        ax3.set_title('植被对护岸稳定性的增强作用', fontsize=13, fontweight='bold')
        ax3.legend()
        ax3.grid(True, alpha=0.3)
        
        # 4. 生态流量过程
        ax4 = axes[1, 1]
        
        Q_mean = 50  # m³/s
        t, Q_eco = self.ecological_flow_regime(Q_mean, duration_days=365)
        
        # 转换为月份
        months = t / 30.44
        
        ax4.plot(months, Q_eco, 'b-', linewidth=2, alpha=0.7,
                label='生态流量过程')
        
        # 参考线
        ax4.axhline(Q_mean, color='r', linestyle='--', linewidth=2,
                   label=f'年均流量={Q_mean}m³/s')
        ax4.axhline(0.3 * Q_mean, color='g', linestyle='--',
                   linewidth=1.5, alpha=0.7,
                   label=f'最小生态流量={0.3*Q_mean:.0f}m³/s')
        
        # 季节标注
        season_bounds = [0, 3, 6, 9, 12]
        season_names = ['冬', '春', '夏', '秋', '冬']
        
        for i in range(len(season_bounds) - 1):
            ax4.axvspan(season_bounds[i], season_bounds[i+1],
                       alpha=0.1, color=['blue', 'green', 'red', 'orange'][i])
            
            mid = (season_bounds[i] + season_bounds[i+1]) / 2
            ax4.text(mid, Q_mean * 1.5, season_names[i],
                    ha='center', fontsize=12, fontweight='bold')
        
        ax4.set_xlabel('月份', fontsize=11)
        ax4.set_ylabel('流量 Q (m³/s)', fontsize=11)
        ax4.set_title('生态调度流量过程（模拟天然变化）',
                     fontsize=13, fontweight='bold')
        ax4.legend()
        ax4.grid(True, alpha=0.3)
        ax4.set_xlim([0, 12])
        
        plt.tight_layout()
        plt.savefig('ecological_restoration.png', dpi=300)
        plt.show()

# 示例计算
print("="*60)
print("生态修复技术")
print("="*60)

er = EcologicalRestoration()

# 1. 竖缝式鱼道
print("1. 竖缝式鱼道设计:")

Q_fishway = 0.8  # m³/s
b_slot = 0.3  # m
h_fishway = 1.2  # m

Q_calc = er.vertical_slot_fishway(Q_fishway, b_slot, h_fishway)

print(f"  设计流量 Q = {Q_fishway} m³/s")
print(f"  竖缝宽度 b = {b_slot} m")
print(f"  水深 h = {h_fishway} m")
print(f"  计算流量 Q_calc = {Q_calc:.2f} m³/s")
print(f"  偏差 = {abs(Q_calc - Q_fishway)/Q_fishway*100:.1f}%")

# 流速校核
result_check = er.fishway_velocity_check(Q_fishway, b_slot, h_fishway, L_fish=0.5)

print(f"\n  流速校核（鱼体长=0.5m）:")
print(f"    平均流速 v_mean = {result_check['v_mean']:.2f} m/s")
print(f"    爆发速度 v_burst = {result_check['v_burst']:.2f} m/s")
print(f"    允许流速 v_allow = {result_check['v_allowable']:.2f} m/s")
print(f"    安全系数 = {result_check['safety_factor']:.2f}")
print(f"    结论: {'通过' if result_check['pass'] else '不通过'} ✓" if result_check['pass'] else "    结论: 不通过 ✗")

# 2. 池堰式鱼道消能
print("\n" + "="*60)
print("2. 池堰式鱼道消能率:")

Q_pool = 0.5  # m³/s
delta_h = 0.25  # m
V_pool = 4  # m³

E_pool = er.pool_weir_fishway_energy(Q_pool, delta_h, V_pool)

print(f"  流量 Q = {Q_pool} m³/s")
print(f"  堰顶跌差 Δh = {delta_h} m")
print(f"  池容积 V = {V_pool} m³")
print(f"  消能率 E = {E_pool:.1f} W/m³")
print(f"  推荐值: ≤150 W/m³")
print(f"  结论: {'满足要求 ✓' if E_pool <= 150 else '超标 ✗'}")

# 3. 河岸植被护坡
print("\n" + "="*60)
print("3. 河岸植被护坡稳定性:")

tau_acting = 15  # Pa
CR_vegetation = 0.6  # 60%覆盖度

result_stab = er.riparian_vegetation_stability(tau_acting, CR_vegetation, k_v=0.5)

print(f"  作用剪切力 τ = {tau_acting} Pa")
print(f"  植被覆盖度 CR = {CR_vegetation*100:.0f}%")
print(f"  临界剪切力 τ_crit = {result_stab['tau_critical']:.1f} Pa")
print(f"  安全系数 = {result_stab['safety_factor']:.2f}")
print(f"  结论: {'稳定 ✓' if result_stab['stable'] else '不稳定 ✗'}")

# 4. 底质改良
print("\n" + "="*60)
print("4. 底质改良卵石投放:")

A_restoration = 500  # m²
d_layer = 0.4  # m

result_stone = er.stone_volume_for_restoration(A_restoration, d_layer)

print(f"  修复面积 A = {A_restoration} m²")
print(f"  铺设厚度 d = {d_layer} m")
print(f"  孔隙率 φ = 40%")
print(f"\n  需求量:")
print(f"    体积 V = {result_stone['volume']:.1f} m³")
print(f"    质量 M = {result_stone['mass']/1000:.1f} 吨")

# 5. 深潭-浅滩设计
print("\n" + "="*60)
print("5. 深潭-浅滩系统设计:")

B_channel = 20  # m
h_mean = 1.5  # m

h_pool = 1.5 * h_mean
h_riffle = 0.7 * h_mean
L_pool = 2.5 * B_channel
spacing = 6 * B_channel

print(f"  河宽 B = {B_channel} m")
print(f"  平均水深 h_mean = {h_mean} m")
print(f"\n  深潭设计:")
print(f"    深度 h_pool = {h_pool:.2f} m")
print(f"    长度 L_pool = {L_pool:.0f} m")
print(f"  浅滩设计:")
print(f"    深度 h_riffle = {h_riffle:.2f} m")
print(f"  布置间距 λ = {spacing:.0f} m")

# 6. 不同鱼类鱼道流速要求
print("\n" + "="*60)
print("6. 不同鱼类鱼道流速要求:")

fish_types = [
    ('小型鱼', 0.1),
    ('鲫鱼', 0.2),
    ('草鱼', 0.5),
    ('鲤鱼', 0.6),
    ('鲑鱼', 0.8)
]

for name, L_fish in fish_types:
    speeds = er.fish_swimming_speed(L_fish)
    v_recommend = 0.6 * speeds['v_burst']
    
    print(f"  {name:8s} (L={L_fish}m): 推荐流速≤{v_recommend:.2f}m/s")

# 绘图
print("\n绘制生态修复分析图...")
er.plot_restoration_analysis()
```

---

## 七、典型考题

### 【例题1】鱼道消能率（12分）

**题目**：池堰式鱼道，$Q=0.6$m³/s，$\Delta h=0.20$m，$V_{pool}=3$m³。校核消能率是否满足要求（≤150W/m³）。

**【解答】**

$$E = \frac{\rho g Q \Delta h}{V_{pool}}$$

$$= \frac{1000 \times 9.81 \times 0.6 \times 0.20}{3}$$

$$= \frac{1177.2}{3} = 392.4 \text{ W/m}^3$$

$E = 392.4 > 150$W/m³

**结论**：不满足要求，需增大池容积或减小跌差

---

**本章重点**：
- 鱼道工程设计
- 河岸带修复
- 底质改良
- 生态调度

**全书完成！**
