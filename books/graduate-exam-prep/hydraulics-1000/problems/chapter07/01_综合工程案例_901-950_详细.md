# 第7.1节 综合工程案例（901-950）详细解答

**题目数量**: 50题  
**难度**: ⭐⭐⭐⭐ ~ ⭐⭐⭐⭐⭐  
**预计用时**: 360分钟  

---

## 题901：引水工程综合设计

**【题目】**（40分，考频⭐⭐⭐⭐⭐）

某引水工程，从水库引水至灌区。设计参数：
- 设计流量：Q = 5 m³/s
- 水库水位：Z₁ = 500 m
- 灌区入口水位：Z₂ = 450 m
- 输水距离：L = 10 km
- 混凝土管（n = 0.014）

要求设计：
1. 管道直径（采用经济流速）
2. 沿程水头损失
3. 局部损失（闸阀、弯头等，ζ总=5.0）
4. 总水头损失
5. 富余水头
6. 是否需要水泵（如需要，计算扬程）
7. Python仿真优化

**【解答】**

### 1. 管道直径设计

经济流速推荐：v = 1.5~2.5 m/s

取 v = 2.0 m/s

$$A = \frac{Q}{v} = \frac{5}{2} = 2.5 \text{ m}^2$$

$$d = \sqrt{\frac{4A}{\pi}} = \sqrt{\frac{4 \times 2.5}{\pi}} = 1.784 \text{ m}$$

标准管径：选用**d = 1.8 m**

实际流速：
$$v = \frac{4Q}{\pi d^2} = \frac{4 \times 5}{\pi \times 1.8^2} = 1.964 \text{ m/s}$$

### 2. 沿程水头损失

达西-魏斯巴赫公式：
$$h_f = \lambda \frac{L}{d}\frac{v^2}{2g}$$

先求Re：
$$Re = \frac{vd}{\nu} = \frac{1.964 \times 1.8}{1.0 \times 10^{-6}} = 3.535 \times 10^6$$

混凝土管相对粗糙度：
$$\frac{\varepsilon}{d} = \frac{0.3-3}{1800} \approx 0.001$$

由Moody图或Colebrook公式：
$$\frac{1}{\sqrt{\lambda}} = -2\log\left(\frac{\varepsilon/d}{3.7} + \frac{2.51}{Re\sqrt{\lambda}}\right)$$

迭代求得：$\lambda \approx 0.020$

$$h_f = 0.020 \times \frac{10000}{1.8} \times \frac{1.964^2}{2 \times 9.8}$$
$$= 111.1 \times 0.197 = 21.87 \text{ m}$$

### 3. 局部损失

$$h_j = \zeta \frac{v^2}{2g} = 5.0 \times \frac{1.964^2}{2 \times 9.8}$$
$$= 5.0 \times 0.197 = 0.985 \text{ m}$$

### 4. 总水头损失

$$h_{\text{总}} = h_f + h_j = 21.87 + 0.985 = 22.86 \text{ m}$$

### 5. 富余水头

地形落差：
$$\Delta Z = Z_1 - Z_2 = 500 - 450 = 50 \text{ m}$$

富余水头：
$$h_{\text{富余}} = \Delta Z - h_{\text{总}} = 50 - 22.86 = 27.14 \text{ m}$$

### 6. 是否需要泵站

**不需要**！重力自流即可满足要求 ✓

富余水头27.14m可用于：
- 安全裕度
- 灌区配水压力
- 未来流量增加

### 7. Python综合仿真

```python
import numpy as np
import matplotlib.pyplot as plt
from scipy.optimize import fsolve

class WaterConveyanceSystem:
    """
    输水工程综合设计与仿真
    """
    
    def __init__(self, Q, L, Z1, Z2, n=0.014, zeta_total=5.0):
        self.Q = Q          # 流量 (m³/s)
        self.L = L          # 距离 (m)
        self.Z1 = Z1        # 起点水位 (m)
        self.Z2 = Z2        # 终点水位 (m)
        self.n = n          # 糙率
        self.zeta = zeta_total
        self.g = 9.8
        self.nu = 1.0e-6    # 运动粘度 (m²/s)
        self.epsilon = 1.5e-3  # 混凝土粗糙度 (m)
    
    def economic_diameter(self, v_economic=2.0):
        """
        根据经济流速确定管径
        """
        A = self.Q / v_economic
        d = np.sqrt(4 * A / np.pi)
        return d
    
    def friction_factor(self, d, v):
        """
        计算摩阻系数（Colebrook-White公式）
        """
        Re = v * d / self.nu
        rel_roughness = self.epsilon / d
        
        # Colebrook-White 方程迭代求解
        def colebrook(lam):
            return 1/np.sqrt(lam) + 2*np.log10(rel_roughness/3.7 + 2.51/(Re*np.sqrt(lam)))
        
        lambda_f = fsolve(colebrook, 0.02)[0]
        return lambda_f, Re
    
    def head_loss(self, d):
        """
        计算水头损失
        """
        v = 4 * self.Q / (np.pi * d**2)
        
        # 沿程损失
        lambda_f, Re = self.friction_factor(d, v)
        h_f = lambda_f * (self.L / d) * (v**2 / (2*self.g))
        
        # 局部损失
        h_j = self.zeta * (v**2 / (2*self.g))
        
        # 总损失
        h_total = h_f + h_j
        
        return h_f, h_j, h_total, v, lambda_f, Re
    
    def check_gravity_flow(self, d):
        """
        检查重力自流是否可行
        """
        h_f, h_j, h_total, v, _, _ = self.head_loss(d)
        available_head = self.Z1 - self.Z2
        surplus_head = available_head - h_total
        
        is_feasible = surplus_head > 0
        
        return {
            'diameter': d,
            'velocity': v,
            'head_loss_friction': h_f,
            'head_loss_local': h_j,
            'head_loss_total': h_total,
            'available_head': available_head,
            'surplus_head': surplus_head,
            'is_feasible': is_feasible
        }
    
    def optimize_diameter(self, d_min=1.0, d_max=3.0, num=50):
        """
        优化管径（成本与水头损失平衡）
        """
        diameters = np.linspace(d_min, d_max, num)
        results = []
        
        for d in diameters:
            try:
                result = self.check_gravity_flow(d)
                
                # 成本估算（简化）
                pipe_cost = np.pi * d * self.L * 1000  # 单位：元/m²
                
                # 运行成本（按10年计）
                if result['surplus_head'] < 0:
                    # 需要泵站
                    pump_head = abs(result['surplus_head'])
                    pump_power = 1000 * self.g * self.Q * pump_head / 0.75  # W
                    operation_cost = pump_power * 24 * 365 * 10 * 0.6 / 1000  # 元（按0.6元/kWh）
                else:
                    operation_cost = 0
                
                total_cost = pipe_cost + operation_cost
                
                results.append({
                    'd': d,
                    'v': result['velocity'],
                    'h_total': result['head_loss_total'],
                    'surplus': result['surplus_head'],
                    'cost': total_cost,
                    'feasible': result['is_feasible']
                })
            except:
                pass
        
        return results
    
    def plot_analysis(self, results):
        """
        绘制分析图
        """
        fig, axes = plt.subplots(2, 2, figsize=(14, 10))
        
        d_list = [r['d'] for r in results]
        v_list = [r['v'] for r in results]
        h_list = [r['h_total'] for r in results]
        surplus_list = [r['surplus'] for r in results]
        cost_list = [r['cost'] for r in results]
        
        # 流速
        axes[0, 0].plot(d_list, v_list, 'b-', linewidth=2)
        axes[0, 0].axhline(1.5, color='g', linestyle='--', label='经济流速下限')
        axes[0, 0].axhline(2.5, color='r', linestyle='--', label='经济流速上限')
        axes[0, 0].set_xlabel('管径 d (m)')
        axes[0, 0].set_ylabel('流速 v (m/s)')
        axes[0, 0].set_title('流速-管径关系')
        axes[0, 0].grid(True, alpha=0.3)
        axes[0, 0].legend()
        
        # 水头损失
        axes[0, 1].plot(d_list, h_list, 'r-', linewidth=2)
        axes[0, 1].axhline(self.Z1 - self.Z2, color='g', linestyle='--', label='可用水头')
        axes[0, 1].set_xlabel('管径 d (m)')
        axes[0, 1].set_ylabel('水头损失 (m)')
        axes[0, 1].set_title('水头损失-管径关系')
        axes[0, 1].grid(True, alpha=0.3)
        axes[0, 1].legend()
        
        # 富余水头
        axes[1, 0].plot(d_list, surplus_list, 'g-', linewidth=2)
        axes[1, 0].axhline(0, color='r', linestyle='--', label='临界线')
        axes[1, 0].set_xlabel('管径 d (m)')
        axes[1, 0].set_ylabel('富余水头 (m)')
        axes[1, 0].set_title('富余水头-管径关系')
        axes[1, 0].grid(True, alpha=0.3)
        axes[1, 0].legend()
        
        # 总成本
        axes[1, 1].plot(d_list, np.array(cost_list)/1e6, 'purple', linewidth=2)
        axes[1, 1].set_xlabel('管径 d (m)')
        axes[1, 1].set_ylabel('总成本 (百万元)')
        axes[1, 1].set_title('经济分析')
        axes[1, 1].grid(True, alpha=0.3)
        
        plt.tight_layout()
        plt.savefig('water_conveyance_optimization.png', dpi=300, bbox_inches='tight')
        plt.show()

# 实例计算
system = WaterConveyanceSystem(
    Q=5.0,
    L=10000,
    Z1=500,
    Z2=450,
    n=0.014,
    zeta_total=5.0
)

# 经济管径
d_economic = system.economic_diameter(v_economic=2.0)
print(f"经济管径: {d_economic:.3f} m")
print(f"标准管径选用: 1.8 m")

# 校核计算
result = system.check_gravity_flow(d=1.8)
print(f"\n设计校核结果:")
print(f"  管径: {result['diameter']:.2f} m")
print(f"  流速: {result['velocity']:.3f} m/s")
print(f"  沿程损失: {result['head_loss_friction']:.2f} m")
print(f"  局部损失: {result['head_loss_local']:.2f} m")
print(f"  总损失: {result['head_loss_total']:.2f} m")
print(f"  可用水头: {result['available_head']:.2f} m")
print(f"  富余水头: {result['surplus_head']:.2f} m")
print(f"  重力自流: {'可行' if result['is_feasible'] else '不可行'}")

# 优化分析
print("\n进行管径优化分析...")
results = system.optimize_diameter(d_min=1.2, d_max=2.5, num=100)

# 找到最优方案
feasible_results = [r for r in results if r['feasible']]
if feasible_results:
    optimal = min(feasible_results, key=lambda x: x['cost'])
    print(f"\n经济最优方案:")
    print(f"  最优管径: {optimal['d']:.3f} m")
    print(f"  流速: {optimal['v']:.3f} m/s")
    print(f"  总成本: {optimal['cost']/1e6:.2f} 百万元")

# 绘图
system.plot_analysis(results)
```

### 答案

1. 管道直径：**d = 1.8 m**（标准管径）
2. 沿程损失：**h_f = 21.87 m**
3. 局部损失：**h_j = 0.985 m**
4. 总水头损失：**h_总 = 22.86 m**
5. 富余水头：**h_富余 = 27.14 m**
6. **不需要泵站**，重力自流即可
7. Python仿真已完成（见上述代码）

### 踩分点（40分）

- 经济流速选取（3分）
- 管径计算（4分）
- 摩阻系数（4分）
- 沿程损失（5分）
- 局部损失（3分）
- 总损失汇总（3分）
- 富余水头（3分）
- 泵站判断（5分）
- Python仿真（10分）

---

## 题902：供水管网优化设计

**【题目】**（35分，考频⭐⭐⭐⭐）

某城市供水管网，树状布置，5个节点...

（完整题目，含管网计算、Hardy Cross法、优化设计）

---

## 题903-950：继续详细开发

包括：
- 水库调度
- 防洪计算
- 灌溉系统设计
- 城市排水
- 海绵城市设计

**持续生成详细解答中...**
