# 第4.3节 渠道设计与优化（521-550）详细解答

---

## 题521：梯形渠道最优断面设计

**【题目】**（30分，考频⭐⭐⭐⭐⭐）

设计一条梯形断面灌溉渠道，要求：
- 设计流量：Q = 20 m³/s
- 底坡：i = 0.0002
- 糙率：n = 0.025
- 边坡系数：m = 1.5

求：
1. 最优水力断面条件
2. 最优底宽与水深比
3. 设计底宽b和水深h
4. 湿周P和水力半径R
5. 验证流速（防冲防淤）
6. 土方量估算（渠长L=10km）

**【解答】**

### 1. 最优水力断面理论

梯形断面最优水力条件：**湿周最小，过流能力最大**

理论公式：
$$\frac{b}{h} = 2(\sqrt{1+m^2} - m)$$

### 2. 最优底宽水深比

$$\frac{b}{h} = 2(\sqrt{1+1.5^2} - 1.5)$$
$$= 2(\sqrt{3.25} - 1.5) = 2(1.803 - 1.5)$$
$$= 2 \times 0.303 = 0.606$$

### 3. 设计底宽与水深

曼宁公式：
$$Q = \frac{1}{n}A R^{2/3} i^{1/2}$$

梯形断面：
$$A = (b + mh)h = (b + 1.5h)h$$
$$P = b + 2h\sqrt{1+m^2} = b + 2h \times 1.803$$
$$R = \frac{A}{P}$$

采用最优比例 $b = 0.606h$：

$$A = (0.606h + 1.5h)h = 2.106h^2$$
$$P = 0.606h + 3.606h = 4.212h$$
$$R = \frac{2.106h^2}{4.212h} = 0.5h$$

代入曼宁公式：
$$20 = \frac{1}{0.025} \times 2.106h^2 \times (0.5h)^{2/3} \times 0.0002^{1/2}$$

$$20 = 40 \times 2.106h^2 \times 0.630h^{0.667} \times 0.01414$$

$$20 = 40 \times 2.106 \times 0.630^{0.667} \times 0.01414 \times h^{2.667}$$

$$h^{2.667} = \frac{20}{40 \times 2.106 \times 0.748 \times 0.01414}$$

$$h^{2.667} = \frac{20}{0.891} = 22.45$$

$$h = 22.45^{1/2.667} = 22.45^{0.375} = 3.285 \text{ m}$$

$$b = 0.606 \times 3.285 = 1.991 \text{ m}$$

标准尺寸：**b = 2.0 m，h = 3.3 m**

### 4. 几何要素

$$A = (2.0 + 1.5 \times 3.3) \times 3.3 = 22.935 \text{ m}^2$$

$$P = 2.0 + 2 \times 3.3 \times 1.803 = 13.90 \text{ m}$$

$$R = \frac{22.935}{13.90} = 1.650 \text{ m}$$

### 5. 流速验证

$$v = \frac{Q}{A} = \frac{20}{22.935} = 0.872 \text{ m/s}$$

**防冲验证**：
- 土质渠道不冲流速：[v] = 0.6~1.2 m/s
- 实际流速 0.872 m/s ∈ [0.6, 1.2] ✓

**防淤验证**：
- 不淤流速：[v] > 0.3 m/s
- 实际流速 0.872 > 0.3 ✓

**防冻胀验证**：
- 冰下流速：[v] < 0.5~0.7 m/s
- 若冬季运行，需衬砌

### 6. 土方量估算

断面面积（含边坡）：
$$A_{挖} = A + \frac{m h^2}{2} \times 2 = 22.935 + 1.5 \times 3.3^2$$
$$= 22.935 + 16.335 = 39.27 \text{ m}^2$$

总土方量：
$$V = A_{挖} \times L = 39.27 \times 10000 = 392,700 \text{ m}^3$$

### Python代码

```python
import numpy as np
from scipy.optimize import fsolve
import matplotlib.pyplot as plt

class TrapezoidalChannel:
    """
    梯形渠道水力设计
    """
    
    def __init__(self, Q, i, n, m):
        self.Q = Q  # 流量 (m³/s)
        self.i = i  # 底坡
        self.n = n  # 糙率
        self.m = m  # 边坡系数
        self.g = 9.8
    
    def optimal_ratio(self):
        """
        最优水力断面：b/h比
        """
        ratio = 2 * (np.sqrt(1 + self.m**2) - self.m)
        return ratio
    
    def geometric_properties(self, b, h):
        """
        几何要素
        """
        A = (b + self.m * h) * h
        P = b + 2 * h * np.sqrt(1 + self.m**2)
        R = A / P
        return A, P, R
    
    def manning_flow(self, b, h):
        """
        曼宁公式计算流量
        """
        A, P, R = self.geometric_properties(b, h)
        Q = (1/self.n) * A * R**(2/3) * self.i**(1/2)
        return Q
    
    def design_optimal(self):
        """
        最优断面设计
        """
        # 最优比例
        ratio = self.optimal_ratio()
        
        # 求解水深（b = ratio * h）
        def equation(h):
            b = ratio * h
            Q_calc = self.manning_flow(b, h)
            return Q_calc - self.Q
        
        # 初始估计
        h0 = (self.Q * self.n / self.i**0.5) ** (3/8)
        
        # 求解
        h_optimal = fsolve(equation, h0)[0]
        b_optimal = ratio * h_optimal
        
        # 几何要素
        A, P, R = self.geometric_properties(b_optimal, h_optimal)
        
        # 流速
        v = self.Q / A
        
        # 弗劳德数
        Fr = v / np.sqrt(self.g * h_optimal)
        
        return {
            'b': b_optimal,
            'h': h_optimal,
            'A': A,
            'P': P,
            'R': R,
            'v': v,
            'Fr': Fr,
            'ratio': ratio
        }
    
    def check_velocity(self, v, soil_type='cohesive'):
        """
        流速验证
        """
        # 防冲流速
        non_scouring = {
            'cohesive': (0.6, 1.2),    # 粘土
            'sandy': (0.4, 0.8),        # 砂土
            'gravel': (1.0, 2.0)        # 砾石
        }
        
        # 防淤流速
        non_silting = 0.3
        
        v_min, v_max = non_scouring.get(soil_type, (0.6, 1.2))
        
        is_safe = (v >= v_min) and (v <= v_max) and (v > non_silting)
        
        return {
            'is_safe': is_safe,
            'v_min': v_min,
            'v_max': v_max,
            'v_actual': v,
            'margin_low': v - v_min,
            'margin_high': v_max - v
        }
    
    def earthwork_volume(self, b, h, L):
        """
        土方量计算
        """
        # 断面面积（含边坡）
        A_excavation = (b + self.m * h) * h + self.m * h**2
        
        # 总土方量
        V = A_excavation * L
        
        return V, A_excavation
    
    def plot_cross_section(self, b, h):
        """
        绘制横断面
        """
        fig, ax = plt.subplots(figsize=(10, 6))
        
        # 渠道断面
        x = np.array([
            -self.m * h - b/2,  # 左边坡顶
            -b/2,               # 左底角
            b/2,                # 右底角
            self.m * h + b/2    # 右边坡顶
        ])
        y = np.array([h, 0, 0, h])
        
        # 水面
        x_water = np.array([-self.m*h - b/2, -b/2, b/2, self.m*h + b/2])
        y_water = np.array([h, h, h, h])
        
        ax.fill(x, y, color='brown', alpha=0.3, label='渠道断面')
        ax.fill(x_water, [0, 0, 0, 0], color='lightblue', alpha=0.6, label='水体')
        ax.plot(x, y, 'k-', linewidth=2)
        ax.plot(x_water, y_water, 'b--', linewidth=1.5, label='水面')
        
        # 标注尺寸
        ax.annotate(f'b = {b:.2f} m', xy=(0, -0.2), ha='center', fontsize=12)
        ax.annotate(f'h = {h:.2f} m', xy=(b/2 + 0.5, h/2), fontsize=12)
        ax.annotate(f'm = {self.m}', xy=(-b/2 - 1, h/2), fontsize=12)
        
        ax.set_xlabel('宽度 (m)', fontsize=12)
        ax.set_ylabel('深度 (m)', fontsize=12)
        ax.set_title(f'梯形渠道最优断面设计\nQ={self.Q} m³/s, i={self.i}, n={self.n}', fontsize=14)
        ax.legend()
        ax.grid(True, alpha=0.3)
        ax.axis('equal')
        
        plt.tight_layout()
        plt.savefig('trapezoidal_channel_design.png', dpi=300, bbox_inches='tight')
        plt.show()

# 设计实例
channel = TrapezoidalChannel(Q=20, i=0.0002, n=0.025, m=1.5)

# 最优设计
result = channel.design_optimal()

print("梯形渠道最优设计结果:")
print(f"  最优底宽水深比: b/h = {result['ratio']:.3f}")
print(f"  设计底宽: b = {result['b']:.3f} m → 标准值 2.0 m")
print(f"  设计水深: h = {result['h']:.3f} m → 标准值 3.3 m")
print(f"  断面积: A = {result['A']:.3f} m²")
print(f"  湿周: P = {result['P']:.3f} m")
print(f"  水力半径: R = {result['R']:.3f} m")
print(f"  流速: v = {result['v']:.3f} m/s")
print(f"  弗劳德数: Fr = {result['Fr']:.3f}")

# 流速验证
v_check = channel.check_velocity(result['v'], soil_type='cohesive')
print(f"\n流速验证:")
print(f"  不冲流速范围: [{v_check['v_min']}, {v_check['v_max']}] m/s")
print(f"  实际流速: {v_check['v_actual']:.3f} m/s")
print(f"  是否安全: {'是' if v_check['is_safe'] else '否'}")
print(f"  下限裕度: {v_check['margin_low']:.3f} m/s")
print(f"  上限裕度: {v_check['margin_high']:.3f} m/s")

# 土方量
V, A_exc = channel.earthwork_volume(2.0, 3.3, 10000)
print(f"\n土方量估算（L=10km）:")
print(f"  挖方断面积: {A_exc:.2f} m²")
print(f"  总土方量: {V:.0f} m³")
print(f"  造价估算: {V * 30:.0f} 元（按30元/m³）")

# 绘图
channel.plot_cross_section(2.0, 3.3)
```

### 答案

1. 最优条件：**湿周最小，b/h = 0.606**
2. 最优比例：**b/h = 0.606**
3. 设计尺寸：**b = 2.0 m，h = 3.3 m**
4. 几何要素：**A = 22.94 m²，P = 13.90 m，R = 1.65 m**
5. 流速验证：**v = 0.872 m/s**（满足防冲防淤）
6. 土方量：**392,700 m³**

---

## 题522：渠道纵断面设计

**【题目】**（25分，考频⭐⭐⭐⭐）

某灌溉渠道纵断面设计：
- 渠道长度：L = 5 km
- 起点高程：Z₁ = 120 m
- 终点高程：Z₂ = 115 m
- 流量：Q = 15 m³/s
- 糙率：n = 0.020

要求：
1. 确定合理底坡
2. 均匀流水深计算
3. 正常水深与临界水深比较
4. 判断流态
5. 是否会产生跌水或壅水

**【解答】**

### 1. 地形坡度

$$i_0 = \frac{Z_1 - Z_2}{L} = \frac{120 - 115}{5000} = 0.001$$

### 2. 渠道设计底坡

采用经验：$i = (0.8 \sim 0.9)i_0$

取 $i = 0.0008$

### 3. 正常水深（均匀流）

假设矩形断面，b = 4m：

$$Q = \frac{1}{n}A R^{2/3} i^{1/2}$$

$$15 = \frac{1}{0.020} \times 4h \times \left(\frac{4h}{4+2h}\right)^{2/3} \times 0.0008^{1/2}$$

$$15 = 50 \times 4h \times \left(\frac{4h}{4+2h}\right)^{0.667} \times 0.0283$$

采用迭代法求解：$h_n \approx 1.65$ m

### 4. 临界水深

$$h_c = \sqrt[3]{\frac{Q^2}{gb^2}} = \sqrt[3]{\frac{15^2}{9.8 \times 4^2}} = 1.09 \text{ m}$$

### 5. 流态判断

$h_n = 1.65$ m $>$ $h_c = 1.09$ m

→ **缓流**（亚临界流）

---

## 题523-550：继续详细开发中...

持续生成详细题解！
