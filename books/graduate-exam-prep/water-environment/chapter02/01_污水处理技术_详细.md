# 第2章：污水处理技术

**工艺**: 物理+化学+生物  
**重要性**: ⭐⭐⭐⭐⭐

---

## 一、污水处理基本流程

### 1.1 处理等级

```
一级处理 → 二级处理 → 三级处理
（物理）   （生物）     （深度）
  ↓          ↓           ↓
去除悬浮物  去除BOD    去除N、P
```

**出水标准**（城镇污水处理厂）：
- 一级A标准：COD≤50mg/L，BOD₅≤10mg/L，NH₃-N≤5mg/L
- 一级B标准：COD≤60mg/L，BOD₅≤20mg/L，NH₃-N≤8mg/L

### 1.2 典型工艺流程

$$\text{格栅} → \text{沉砂池} → \text{初沉池} → \text{曝气池} → \text{二沉池} → \text{消毒} → \text{出水}$$

---

## 二、活性污泥法

### 2.1 基本原理

**微生物代谢**：
- **好氧**：有机物 + O₂ → CO₂ + H₂O + 能量
- **合成**：有机物 + 营养 → 新细胞

**MLSS**（混合液悬浮固体）：2000-5000 mg/L

**污泥龄**（SRT）：
$$\theta_c = \frac{V \cdot MLSS}{Q_w \cdot X_r + Q_e \cdot X_e}$$

- $V$：曝气池容积
- $Q_w$：剩余污泥排放量
- $X_r$：回流污泥浓度

### 2.2 工艺参数

**污泥负荷**（F/M）：
$$N_s = \frac{Q \cdot S_0}{V \cdot MLSS}$$

典型值：0.2-0.5 kgBOD/(kgMLSS·d)

**需氧量**：
$$O_2 = a' \cdot Q \cdot (S_0 - S_e) + b' \cdot V \cdot MLSS$$

- $a'$：BOD氧化系数（0.5-0.6）
- $b'$：内源呼吸系数（0.05-0.1）

### Python实现

```python
import numpy as np
import matplotlib.pyplot as plt

class WastewaterTreatment:
    """污水处理工艺计算"""
    
    def __init__(self):
        self.rho = 1000  # kg/m³
    
    def activated_sludge_design(self, Q, S0, Se, MLSS, X_r, SVI=100):
        """
        活性污泥法设计
        
        参数:
            Q: 污水流量 (m³/d)
            S0: 进水BOD (mg/L)
            Se: 出水BOD (mg/L)
            MLSS: 混合液悬浮固体浓度 (mg/L)
            X_r: 回流污泥浓度 (mg/L)
            SVI: 污泥体积指数 (mL/g)
        
        返回:
            设计参数
        """
        # BOD去除量
        BOD_removed = (S0 - Se) * Q / 1000  # kg/d
        
        # 污泥负荷（取0.3）
        Ns = 0.3  # kgBOD/(kgMLSS·d)
        
        # 曝气池容积
        V = BOD_removed / (Ns * MLSS / 1000)  # m³
        
        # 水力停留时间
        HRT = V / Q  # d
        HRT_hours = HRT * 24  # h
        
        # 污泥龄（经验公式，与污泥负荷反比）
        theta_c = 1 / Ns  # d
        
        # 需氧量
        a_prime = 0.5
        b_prime = 0.05
        
        O2_demand = a_prime * Q * (S0 - Se) / 1000 + \
                   b_prime * V * MLSS / 1000  # kg/d
        
        # 回流比
        R = MLSS / (X_r - MLSS)
        
        # 剩余污泥量（污泥产率系数0.6）
        Y = 0.6  # kgMLSS/kgBOD
        Kd = 0.05  # 内源衰减系数
        
        Px = Y * BOD_removed - Kd * V * MLSS / 1000  # kg/d
        
        results = {
            'V': V,
            'HRT_hours': HRT_hours,
            'theta_c': theta_c,
            'O2_demand': O2_demand,
            'R': R,
            'Px': Px
        }
        
        return results
    
    def oxygen_transfer(self, KLa, Cs, C, V):
        """
        氧传递
        
        dC/dt = KLa(Cs - C) - r
        
        参数:
            KLa: 氧总传质系数 (1/h)
            Cs: 饱和溶解氧 (mg/L)
            C: 实际溶解氧 (mg/L)
            V: 池容积 (m³)
        
        返回:
            氧传递速率 (kg/h)
        """
        OTR = KLa * (Cs - C) * V / 1000  # kg/h
        
        return OTR
    
    def nitrification_denitrification(self, Q, NH3_in, NH3_out, NO3_target):
        """
        硝化反硝化计算
        
        硝化: NH₄⁺ + 2O₂ → NO₃⁻ + 2H⁺ + H₂O
        反硝化: NO₃⁻ + 5H → N₂ + 2H₂O + OH⁻
        
        参数:
            Q: 流量 (m³/d)
            NH3_in: 进水氨氮 (mg/L)
            NH3_out: 出水氨氮 (mg/L)
            NO3_target: 出水硝态氮 (mg/L)
        
        返回:
            需氧量、碳源需求
        """
        # 硝化需氧量（1gNH₃-N需4.57gO₂）
        NH3_removed = (NH3_in - NH3_out) * Q / 1000  # kg/d
        O2_nitrification = NH3_removed * 4.57  # kg/d
        
        # 反硝化碳源需求（1gNO₃-N需2.86gCOD）
        NO3_removed = (NH3_in - NH3_out - NO3_target) * Q / 1000  # kg/d
        COD_denitrification = NO3_removed * 2.86  # kg/d
        
        return O2_nitrification, COD_denitrification
    
    def sludge_settling(self, Q, MLSS, SVI):
        """
        污泥沉降
        
        SVI = 污泥体积/污泥重量 (mL/g)
        
        参数:
            Q: 流量 (m³/d)
            MLSS: 混合液悬浮固体 (mg/L)
            SVI: 污泥体积指数 (mL/g)
        
        返回:
            二沉池表面负荷
        """
        # SVI评价
        if SVI < 50:
            status = "污泥无机成分多，沉降好但活性差"
        elif 50 <= SVI <= 100:
            status = "良好"
        elif 100 < SVI <= 200:
            status = "一般，有膨胀倾向"
        else:
            status = "污泥膨胀"
        
        # 推荐表面负荷（根据SVI）
        if SVI <= 100:
            q_recommended = 1.0  # m³/(m²·h)
        else:
            q_recommended = 0.6
        
        return status, q_recommended
    
    def plot_bod_removal(self, t_range, S0, k):
        """
        绘制BOD去除曲线
        
        S = S0 * exp(-k*t)
        """
        t = np.linspace(0, t_range, 100)
        S = S0 * np.exp(-k * t)
        
        removal_efficiency = (1 - S / S0) * 100
        
        fig, axes = plt.subplots(1, 2, figsize=(14, 5))
        
        # BOD浓度
        axes[0].plot(t, S, 'b-', linewidth=2)
        axes[0].axhline(S0, color='r', linestyle='--', 
                       alpha=0.5, label=f'进水BOD={S0}mg/L')
        axes[0].set_xlabel('时间 (天)', fontsize=12)
        axes[0].set_ylabel('BOD (mg/L)', fontsize=12)
        axes[0].set_title('BOD降解曲线', fontsize=14)
        axes[0].legend()
        axes[0].grid(True, alpha=0.3)
        
        # 去除率
        axes[1].plot(t, removal_efficiency, 'g-', linewidth=2)
        axes[1].axhline(90, color='r', linestyle='--',
                       alpha=0.5, label='90%去除率')
        axes[1].set_xlabel('时间 (天)', fontsize=12)
        axes[1].set_ylabel('去除率 (%)', fontsize=12)
        axes[1].set_title('BOD去除效率', fontsize=14)
        axes[1].legend()
        axes[1].grid(True, alpha=0.3)
        
        plt.tight_layout()
        plt.savefig('bod_removal.png', dpi=300)
        plt.show()

# 示例1：活性污泥法设计
print("="*60)
print("示例1：活性污泥法工艺设计")
print("="*60)

ww = WastewaterTreatment()

# 设计参数
Q = 10000  # m³/d
S0 = 200   # mg/L
Se = 20    # mg/L
MLSS = 3000  # mg/L
X_r = 10000  # mg/L

print(f"设计条件:")
print(f"  处理水量: {Q} m³/d")
print(f"  进水BOD: {S0} mg/L")
print(f"  出水BOD: {Se} mg/L")
print(f"  MLSS: {MLSS} mg/L")
print(f"  回流污泥浓度: {X_r} mg/L")

# 设计计算
results = ww.activated_sludge_design(Q, S0, Se, MLSS, X_r)

print(f"\n设计结果:")
print(f"  曝气池容积: {results['V']:.0f} m³")
print(f"  水力停留时间: {results['HRT_hours']:.1f} h")
print(f"  污泥龄: {results['theta_c']:.1f} d")
print(f"  需氧量: {results['O2_demand']:.0f} kg/d = {results['O2_demand']/24:.1f} kg/h")
print(f"  回流比: {results['R']:.2f}")
print(f"  剩余污泥量: {results['Px']:.0f} kg/d")

# 示例2：脱氮计算
print("\n" + "="*60)
print("示例2：脱氮工艺计算")
print("="*60)

NH3_in = 40  # mg/L
NH3_out = 5  # mg/L
NO3_target = 10  # mg/L

print(f"氮素浓度:")
print(f"  进水氨氮: {NH3_in} mg/L")
print(f"  出水氨氮: {NH3_out} mg/L")
print(f"  出水硝态氮: {NO3_target} mg/L")

O2_nit, COD_denit = ww.nitrification_denitrification(
    Q, NH3_in, NH3_out, NO3_target
)

print(f"\n工艺需求:")
print(f"  硝化需氧量: {O2_nit:.0f} kg/d")
print(f"  反硝化需碳源: {COD_denit:.0f} kgCOD/d")

# 示例3：污泥沉降
print("\n" + "="*60)
print("示例3：污泥沉降性能评价")
print("="*60)

SVI_values = [80, 120, 200]

for SVI in SVI_values:
    status, q_rec = ww.sludge_settling(Q, MLSS, SVI)
    print(f"SVI = {SVI} mL/g:")
    print(f"  状态: {status}")
    print(f"  推荐表面负荷: {q_rec} m³/(m²·h)")
    print()

# 可视化BOD去除
ww.plot_bod_removal(t_range=5, S0=200, k=0.8)
```

---

## 三、生物脱氮除磷

### 3.1 A²/O工艺

**流程**：
$$\text{厌氧池} → \text{缺氧池} → \text{好氧池} → \text{二沉池}$$

**原理**：
- **厌氧**：释磷（聚磷菌释放磷，吸收VFA）
- **缺氧**：反硝化（利用硝酸盐，产生碱度）
- **好氧**：硝化+过量吸磷

**容积比**：厌氧:缺氧:好氧 = 1:1:3

### 3.2 SBR工艺

**序批式活性污泥法**：

单池中按时序运行：
1. 进水（Fill）
2. 反应（React）
3. 沉淀（Settle）
4. 排水（Draw）
5. 闲置（Idle）

**优点**：
- 工艺灵活
- 脱氮除磷效果好
- 无需二沉池

---

## 四、高级氧化技术

### 4.1 Fenton氧化

$$\text{Fe}^{2+} + \text{H}_2\text{O}_2 → \text{Fe}^{3+} + \text{OH}^- + \text{·OH}$$

**羟基自由基**$\cdot\text{OH}$：强氧化性

**应用**：难降解有机物

### 4.2 臭氧氧化

$$\text{O}_3 + \text{有机物} → \text{CO}_2 + \text{H}_2\text{O}$$

**优点**：
- 氧化能力强
- 副产物少
- 同时消毒

---

## 五、典型考题

### 【例题】活性污泥法计算

**题目**（25分）

污水处理厂，Q=5000m³/d，进水BOD=250mg/L，出水BOD≤20mg/L，MLSS=3500mg/L，污泥负荷Ns=0.25kgBOD/(kgMLSS·d)。求：
1. 曝气池容积
2. 水力停留时间
3. 需氧量（a'=0.5，b'=0.06）

**【解答】**

(1) **曝气池容积**（8分）

$$V = \frac{Q(S_0 - S_e)}{N_s \cdot X} = \frac{5000 \times (250 - 20) / 1000}{0.25 \times 3.5} = 1314 \text{ m}^3$$

(2) **水力停留时间**（7分）

$$HRT = \frac{V}{Q} = \frac{1314}{5000} = 0.263 \text{ d} = 6.3 \text{ h}$$

(3) **需氧量**（10分）

$$O_2 = a'Q(S_0 - S_e) + b'VX$$

$$= 0.5 \times 5000 \times 230 / 1000 + 0.06 \times 1314 \times 3.5$$

$$= 575 + 276 = 851 \text{ kg/d} = 35.5 \text{ kg/h}$$

---

**本章重点**：
- 活性污泥法原理
- 工艺参数计算
- 脱氮除磷工艺
- 需氧量计算
