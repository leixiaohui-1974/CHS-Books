# 第08章 渗流计算 - 代码实现

## 完成状态
- **章节**: 第08章 渗流计算
- **完成度**: 100% ✓
- **代码文件**: 5个
- **总代码量**: ~4,400行
- **可视化**: 45个子图
- **开发时间**: 2025-11-07

## 章节概述

本章实现渗流力学的核心计算方法，涵盖：
1. **裘布依公式应用**：基坑降水设计
2. **渗流网绘制**：流线、等势线、流量计算
3. **土坝渗流**：浸润线、出逸点
4. **基坑涌水量**：等效圆法、井数确定
5. **渗流稳定性**：管涌、流土、边坡

## 文件清单

### 1. 裘布依公式应用 (ch08_problem01_dupuit_formula.py)
**功能**：
- 承压水井流量（Q = 2πKM(H₀-hw)/ln(R/r₀)）
- 无压水井流量（Q = πK(H₀²-hw²)/ln(R/r₀)）
- 降水井数量与布置
- 降水周期估算
- 成本估算（施工费+运行费）

**核心公式**：
```python
承压水: Q = 2πKM·s/ln(R/r0)
无压水: Q = πK(H0²-hw²)/ln(R/r0)
井数: n ≥ Q_基坑/(Q_单井) × 安全系数
```

**可视化**（9个子图）：
1. 降水井布置平面图
2. 计算参数
3. 降深-流量关系
4. 承压vs无压对比
5. 渗透系数影响
6. 影响半径影响
7. 降水周期分析
8. 费用估算饼图
9. 结果汇总表

### 2. 渗流网绘制与分析 (ch08_problem04_seepage_net.py)
**功能**：
- 渗流网生成（流线+等势线）
- 单宽流量计算（q = K·ΔH·(nf/nd)）
- 渗透坡降分布
- 渗透压力分布
- 管涌验证（出逸坡降）

**核心公式**：
```python
单宽流量: q = K·ΔH·(nf/nd)
渗透坡降: i = Δh/Δl
出逸坡降: i_出 = Δh/Δl（最后一格）
允许坡降: [i] ≈ 1.0
```

**渗流网性质**：
- 正交性：流线⊥等势线
- 曲边正方形：长宽比≈1
- nf: 流槽数，nd: 势降数

**可视化**（9个子图）：
1. 渗流网图（流线+等势线）
2. 计算参数
3. 流槽数影响
4. 渗透坡降分布
5. 渗透压力分布
6. 管涌验证
7. 渗透系数影响
8. 渗流网性质说明
9. 结果汇总表

### 3. 土坝渗流分析 (ch08_problem07_earth_dam_seepage.py)
**功能**：
- 浸润线方程（y² = y0² - (2q/K)x）
- 卡萨格兰德基点法
- 单宽渗流量
- 出逸点位置
- 排水设施设计

**核心公式**：
```python
浸润线: y² = y0² - (2q/K)x（抛物线）
单宽流量: q = K·H1²/(2L)
基点: A点（卡萨格兰德法）
出逸点: 浸润线与下游坡交点
```

**可视化**（9个子图）：
1. 土坝断面与浸润线
2. 计算参数
3. 浸润线方程验证（y²-x关系）
4. 渗透系数影响
5. 水位影响
6. 浸润线高程分布
7. 排水设施设计
8. 坡比影响
9. 结果汇总表

### 4. 基坑涌水量计算 (ch08_problem10_pit_inflow.py)
**功能**：
- 等效圆法（r0 = √(LB/π)）
- 承压水基坑涌水量
- 形状系数修正（α = 1.1~1.3）
- 抽水井数量与布置
- 抽水周期与费用

**核心公式**：
```python
等效半径: r0 = √(LB/π)
涌水量: Q = 2πKM·s/ln(R/r0)
修正: Q' = α·Q
井数: n = Q'/(Q_单井) × 1.3
```

**可视化**（9个子图）：
1. 抽水井布置平面图
2. 计算参数
3. 涌水量计算对比
4. 降深-涌水量关系
5. 渗透系数影响
6. 井数-总流量关系
7. 抽水周期分析
8. 费用估算饼图
9. 结果汇总表

### 5. 渗流稳定性分析 (ch08_problem13_seepage_stability.py)
**功能**：
- 渗透力计算（j = i·γw）
- 管涌稳定性（[i] = (γs-γw)/γw）
- 流土稳定性（ic = (γs-γw)/(γw·n)）
- 边坡稳定性（圆弧法）
- 防治措施建议

**核心公式**：
```python
渗透力: j = i·γw
管涌临界坡降: [i] = (γs-γw)/γw ≈ 1.6
流土临界坡降: ic = (γs-γw)/(γw·n) ≈ 4.0
安全系数: K = i_临界/i_实际 > 1.5
```

**稳定性判别**：
- 管涌：K > 1.5
- 流土：K > 1.5
- 边坡：K > 1.3

**可视化**（9个子图）：
1. 渗流稳定性示意图
2. 计算参数
3. 管涌稳定性验算
4. 流土稳定性验算
5. 边坡稳定性验算
6. 安全系数对比柱状图
7. 渗透坡降影响
8. 防治措施
9. 稳定性汇总表

## 技术特点

### 1. 核心算法
- **裘布依公式**：承压/无压水井流量
- **渗流网理论**：流线与等势线正交
- **浸润线方程**：抛物线方程求解
- **等效圆法**：矩形基坑简化为圆形
- **稳定性判别**：管涌、流土、边坡

### 2. 工程应用
- **基坑降水**：井数、井距、费用
- **土坝设计**：浸润线、出逸点、排水
- **渗流分析**：流量、压力、坡降
- **稳定性评价**：安全系数、防治措施

### 3. 考试要点
- **裘布依公式**：承压与无压区别
- **渗流网**：nf/nd比值、流量计算
- **浸润线**：抛物线方程、基点法
- **稳定性**：管涌、流土判别标准

## 代码统计

| 程序 | 文件名 | 代码行数 | 类/函数 | 可视化 |
|------|--------|---------|---------|--------|
| 题1 | ch08_problem01_dupuit_formula.py | ~890 | 1类/11方法 | 9子图 |
| 题4 | ch08_problem04_seepage_net.py | ~880 | 1类/9方法 | 9子图 |
| 题7 | ch08_problem07_earth_dam_seepage.py | ~920 | 1类/10方法 | 9子图 |
| 题10 | ch08_problem10_pit_inflow.py | ~890 | 1类/12方法 | 9子图 |
| 题13 | ch08_problem13_seepage_stability.py | ~820 | 1类/10方法 | 9子图 |
| **合计** | - | **~4,400** | **5类/52方法** | **45子图** |

## 运行方法

```python
# 运行单个程序
python ch08_problem01_dupuit_formula.py
python ch08_problem04_seepage_net.py
python ch08_problem07_earth_dam_seepage.py
python ch08_problem10_pit_inflow.py
python ch08_problem13_seepage_stability.py

# 或在Python中导入使用
from ch08_problem01_dupuit_formula import DupuitDewatering

dew = DupuitDewatering(L=50, B=30, M=10, K=0.001, R=100, s0=5)
dew.print_results()
dew.plot_analysis()
```python

## 依赖库

```python
numpy >= 1.19.0
matplotlib >= 3.3.0
scipy >= 1.5.0
```python

## 开发规范

1. **代码风格**：遵循PEP 8，中文注释
2. **类设计**：OOP封装，参数化配置
3. **文档字符串**：详细的docstring
4. **可视化**：统一9子图布局，16x12英寸
5. **输出格式**：结构化文本 + 高清图表

## 知识覆盖

### 渗流基本理论
- ✓ Darcy定律：v = K·i
- ✓ 渗流连续性方程
- ✓ 渗流网：流线+等势线
- ✓ 裘布依公式：井流量计算

### 工程渗流问题
- ✓ 基坑降水：井数、布置、费用
- ✓ 土坝渗流：浸润线、出逸点
- ✓ 地基渗流：渗流网、流量
- ✓ 边坡渗流：稳定性分析

### 渗透破坏
- ✓ 管涌：细颗粒流失（[i] ≈ 1.0~1.6）
- ✓ 流土：整体上浮（ic ≈ 4.0）
- ✓ 流砂：快速渗流（施工期）
- ✓ 接触冲刷：接触面破坏

### 防治措施
- ✓ 反滤层：防管涌
- ✓ 覆盖层：防流土
- ✓ 排水设施：降低浸润线
- ✓ 削坡/加固：边坡稳定

## 更新日志

### 2025-11-07
- ✓ 完成题1：裘布依公式应用（890行，9子图）
- ✓ 完成题4：渗流网绘制（880行，9子图）
- ✓ 完成题7：土坝渗流分析（920行，9子图）
- ✓ 完成题10：基坑涌水量（890行，9子图）
- ✓ 完成题13：渗流稳定性（820行，9子图）
- ✓ 第08章代码开发100%完成

## 考研应用价值

本章代码对考研复习的价值：
1. **核心知识点**：涵盖渗流力学90%以上考点
2. **公式记忆**：通过代码理解公式推导
3. **计算训练**：典型题目完整求解步骤
4. **快速验证**：考试计算结果验证工具
5. **工程应用**：实际工程设计思路

## 典型例题

### 例1：基坑降水（裘布依公式）
已知：L=50m, B=30m, M=10m, K=0.001m/s, s0=5m
求：单井流量、井数、费用

**解答**：
```python
dew = DupuitDewatering(50, 30, 10, 0.001, 100, 5)
Q_conf = dew.confined_well_discharge()  # 承压井
n = dew.well_count(Q_conf)  # 井数
cost = dew.cost_estimate(n, 20)  # 费用
```python

### 例2：渗流网（流量计算）
已知：ΔH=16m, K=0.0001m/s, nf=4, nd=10
求：单宽流量

**解答**：
```python
net = SeepageNet(20, 40, 18, 2, 10, 0.0001)
q = net.unit_seepage(nf=4, nd=10)
# q = K·ΔH·(nf/nd) = 6.4×10⁻⁵ m³/(s·m)
```python

### 例3：管涌判别（稳定性）
已知：i=0.8, γs=26kN/m³, γw=10kN/m³
求：安全系数，是否安全

**解答**：
```python
stab = SeepageStability(25, 2.5, 3, 0.8, 25, 19, 20)
K, is_safe = stab.piping_safety_factor()
# [i] = (26-10)/10 = 1.6
# K = 1.6/0.8 = 2.0 > 1.5 ✓
```

---

**开发团队**：CHS-Books Team  
**联系方式**：见项目主README  
**版本**：v1.0  
**最后更新**：2025-11-07
