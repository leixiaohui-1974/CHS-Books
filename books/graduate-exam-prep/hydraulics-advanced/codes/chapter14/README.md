# 第14章 压轴大题专项训练 - 代码实现

## 章节概述

本章是研究生入学考试水力学科目的**压轴大题专项训练**，汇集了最具挑战性的综合设计题。每个程序都整合多个章节知识点，模拟真实工程场景，旨在培养学生的综合应用能力和工程设计思维。

## 程序清单

### 1. 题1：灌区渠系综合设计 (ch14_problem01_irrigation_canal_design.py)

**问题描述**：
- 灌溉面积：5000亩
- 灌溉定额：400 m³/亩
- 灌溉周期：10天
- 三级渠系：干渠、支渠、斗渠

**核心内容**：
- 设计流量计算（Q_设 = W/(T×86400×η)）
- 干渠断面设计（梯形，曼宁公式）
- 正常水深与临界水深计算
- 流态判断（Fr数，缓流/急流）
- 支渠和斗渠设计
- 工程投资估算（土方+衬砌+建筑物）
- 经济分析（成本效益，投资回收期）

**关键公式**：
```
Q_设 = W/(T×86400×η)            # 设计流量
Q = A×R^(2/3)×J^(1/2)/n        # 曼宁公式
hc = (q²/g)^(1/3)               # 临界水深
Jc = n²q²/(R^(4/3))             # 临界坡度
```

**技术亮点**：
- 三级渠系完整设计
- 流态智能判别
- 渠系布置可视化
- 全面经济分析
- 9幅专业图表

---

### 2. 题4：水库-电站联合调度 (ch14_problem04_reservoir_power_operation.py)

**问题描述**：
- 总库容：10亿m³
- 装机容量：300MW
- 设计水头：85m
- 月径流变化过程

**核心内容**：
- 库容-水位关系（V-Z曲线）
- 电站出力计算（N = 9.81·η·Q·H/1000）
- 保证出力评估
- 逐月调节计算（水量平衡）
- 优化调度方案（最大发电量）
- 弃水与缺电分析
- 经济效益评估

**关键公式**：
```
N = 9.81·η·Q·H/1000          # 出力 (MW)
E = N·T                      # 发电量 (MW·h)
V(t+1) = V(t) + (Q_in-Q_out)·Δt  # 水量平衡
```

**技术亮点**：
- V-Z关系建立
- 逐月动态调节
- 优化调度策略
- 发电量预测
- 综合效益评价
- 9幅专业图表

---

### 3. 题7：泵站系统优化设计 (ch14_problem07_pump_station_optimization.py)

**问题描述**：
- 设计流量：15 m³/s
- 设计扬程：12m
- 三种泵型可选（A/B/C型）
- 年运行8000小时

**核心内容**：
- 配置方案设计（单台/并联/混合）
- 运行特性分析（Q-H曲线，效率曲线）
- 投资成本对比
- 运行费用计算（电费+维护）
- 优化方案选择（最小年费用法）
- 调节运行分析（变速/变角/变台）

**关键公式**：
```
P = ρgQH/η                      # 功率
年费用 = (投资×折旧率) + 年运行费
并联：Q_总 = ΣQ_i, H = H_单台
```

**技术亮点**：
- 多方案比选
- 全生命周期成本
- 特性曲线分析
- 优化算法应用
- 经济流速法
- 9幅专业图表

---

### 4. 题10：水电站引水系统设计 (ch14_problem10_hydropower_diversion_system.py)

**问题描述**：
- 装机：200MW
- 设计水头：80m
- 压力隧洞：3000m×φ5m
- 压力钢管：500m×φ4m

**核心内容**：
- 水力计算（沿程损失+局部损失）
- 净水头计算
- 电站出力计算
- 管径优化选择（经济流速法）
- 水击计算与防护（Joukowsky公式）
- 洞室稳定性分析
- 技术经济评价

**关键公式**：
```
hf = λ·L/D·v²/(2g)           # 沿程损失
hj = Σξ·v²/(2g)              # 局部损失
N = 9.81·η·Q·H_净/1000      # 出力
Δp = ρ·c·Δv                 # 水击压力
```

**技术亮点**：
- 完整水力计算
- 管径优化分析
- 水击压力计算
- 围岩稳定评价
- 投资效益分析
- 9幅专业图表

---

### 5. 题13：防洪工程综合设计 (ch14_problem13_flood_control_design.py)

**问题描述**：
- 保护面积：50 km²
- 百年洪峰：2000 m³/s
- 20年洪峰：1500 m³/s
- 防洪标准：城区100年，农田20年

**核心内容**：
- 设计洪水位计算（天然+工程）
- 堤防断面设计与加高
- 分洪道布置与流量分配
- 蓄滞洪区容量与调度
- 防洪工程投资估算
- 减灾效益评价

**关键公式**：
```
Q = A·R^(2/3)·i^(1/2)/n        # 曼宁公式
Q_分 = Q_总 - Q_河              # 分洪流量
减灾效益 = Σ(损失_无 - 损失_有)
```

**技术亮点**：
- 多级防护体系
- 洪水演算
- 分洪道设计
- 蓄滞洪区调度
- 减灾效益量化
- 9幅专业图表

---

## 代码统计

| 程序 | 文件大小 | 代码行数 | 图表数量 | 核心类 |
|------|---------|---------|---------|--------|
| 题1 | ~27KB | ~930行 | 9 | IrrigationCanalDesign |
| 题4 | ~21KB | ~740行 | 9 | ReservoirPowerOperation |
| 题7 | ~20KB | ~720行 | 9 | PumpStationOptimization |
| 题10 | ~22KB | ~770行 | 9 | HydropowerDiversionSystem |
| 题13 | ~25KB | ~890行 | 9 | FloodControlDesign |
| **合计** | **~115KB** | **~4,050行** | **45** | **5个类** |

## 技术架构

### 1. 综合性设计理念

每个程序都是一个**完整的工程设计项目**：
- 问题分析 → 方案设计 → 计算论证 → 经济评价 → 综合决策

### 2. 跨章节知识整合

**题1（灌区渠系）**：
- 第3章：明渠流水力计算
- 第9章：渠道设计
- 经济分析方法

**题4（水库-电站）**：
- 第5章：水文计算
- 第11章：水库调节
- 第12章：水电站出力

**题7（泵站优化）**：
- 第6章：水泵性能
- 并联/串联计算
- 优化设计方法

**题10（引水系统）**：
- 第2章：能量方程
- 第3章：管流计算
- 水击理论

**题13（防洪工程）**：
- 第3章：明渠流
- 第5章：洪水计算
- 工程综合设计

### 3. 多目标优化思维

- **技术可行性**：满足设计标准
- **经济合理性**：最小年费用
- **环境协调性**：生态友好
- **社会效益性**：减灾保障

### 4. 完整的分析框架

每个程序都包含：
```python
class ProblemSolver:
    def __init__(self, ...):
        """初始化参数"""
        
    def technical_calculation(self):
        """技术计算"""
        
    def scheme_design(self):
        """方案设计"""
        
    def optimization(self):
        """优化分析"""
        
    def cost_estimation(self):
        """投资估算"""
        
    def economic_evaluation(self):
        """经济评价"""
        
    def plot_analysis(self):
        """9宫格图表分析"""
        
    def print_results(self):
        """结果输出"""
```

## 核心公式汇总

### 水力计算
```
Q = A·R^(2/3)·i^(1/2)/n         # 曼宁公式（明渠）
hf = λ·L/D·v²/(2g)              # 沿程损失（管流）
hj = Σξ·v²/(2g)                 # 局部损失
Fr = v/√(gh)                    # 弗劳德数
```

### 水工建筑物
```
H_堤 = h_设计 + h_波浪 + h_安全    # 堤防高度
V_库 = k·(Z - Z_死)²             # 库容-水位关系
Q_分 = Q_总 - Q_河               # 分洪流量
```

### 水电计算
```
N = 9.81·η·Q·H/1000           # 出力 (MW)
E = N·T                       # 电量 (kW·h)
V(t+1) = V(t) + (Q_in-Q_out)·Δt  # 水量平衡
```

### 经济分析
```
年费用 = (投资×折旧率) + 年运行费
B/C = 总效益/总成本
NPV = Σ[B_t/(1+r)^t] - I
IRR: NPV = 0时的r
```

## 考试要点

### 技术计算（40%）
1. 明渠水力计算（曼宁公式）
2. 管流水力计算（沿程+局部）
3. 水库调节计算（水量平衡）
4. 水电站出力计算
5. 泵站特性分析

### 方案设计（30%）
1. 渠道断面设计
2. 堤防断面设计
3. 泵站配置方案
4. 引水系统布置
5. 防洪工程体系

### 优化分析（20%）
1. 多方案比选
2. 参数优化
3. 调度优化
4. 成本优化

### 经济评价（10%）
1. 投资估算
2. 效益计算
3. B/C比分析
4. 投资回收期

## 学习建议

### 理论准备
1. 熟练掌握水力学基础公式
2. 理解工程设计基本流程
3. 掌握优化设计方法
4. 了解经济分析原理

### 编程实践
1. 逐个运行程序，理解计算过程
2. 修改参数，观察结果变化
3. 分析图表，理解工程意义
4. 扩展功能，增强应用能力

### 解题技巧
1. **审题要细**：理清已知条件和求解目标
2. **画图辅助**：绘制示意图帮助理解
3. **分步计算**：复杂问题分解为若干子问题
4. **检验合理**：结果要符合工程实际
5. **归纳总结**：总结通用方法和规律

### 考试策略
1. **时间分配**：压轴大题40-50分钟
2. **答题顺序**：先易后难，确保基础分
3. **公式书写**：列出关键公式，展示思路
4. **单位注意**：单位转换是易错点
5. **结果检查**：计算结果要检查数量级

## 使用方法

### 运行单个程序
```bash
cd /workspace/books/graduate-exam-prep/hydraulics-advanced/codes/chapter14
python3 ch14_problem01_irrigation_canal_design.py
```

### 批量运行
```bash
cd /workspace/books/graduate-exam-prep/hydraulics-advanced/codes/chapter14
for file in ch14_problem*.py; do
    echo "运行 $file..."
    python3 "$file"
done
```

### 参数自定义
每个程序的 `main()` 函数都可以修改参数：
```python
def main():
    # 修改这些参数
    Q_design = 15.0  # 设计流量
    H_design = 12.0  # 设计水头
    # ... 更多参数
```

## 扩展学习

### 深度学习方向
1. 增加更多优化算法（遗传算法、粒子群等）
2. 引入不确定性分析（蒙特卡洛）
3. 多目标优化（Pareto前沿）
4. 风险分析与决策

### 工程应用方向
1. 实际工程案例分析
2. BIM与CAD集成
3. GIS数据处理
4. 智能调度系统

### 编程提升方向
1. GUI界面开发
2. 数据库管理
3. Web应用开发
4. 云计算部署

## 参考资料

1. 《水力学》（第5版）
2. 《灌溉排水工程学》
3. 《水电站》
4. 《泵与泵站》
5. 《防洪工程》
6. 《工程经济学》
7. 研究生入学考试真题集

## 技术支持

- 开发团队：CHS-Books Team
- 开发日期：2025-11-07
- Python版本：3.8+
- 依赖库：numpy, matplotlib, scipy

---

**教学目标**：通过本章学习，学生应具备综合运用水力学知识解决复杂工程问题的能力，熟练掌握工程设计基本方法，能够进行多方案比选和经济评价，为考研压轴大题和未来工程实践打下坚实基础。

**考试重点**：综合设计、跨章节应用、优化分析、经济评价。

**实际应用**：灌区设计、水电站规划、泵站建设、防洪工程、水资源管理。

**难度等级**：⭐⭐⭐⭐⭐（最高难度，综合性最强）
