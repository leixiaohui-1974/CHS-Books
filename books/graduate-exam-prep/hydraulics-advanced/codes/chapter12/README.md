# 第12章 河流动力学 - 代码实现

## 目录结构

```
chapter12/
├── ch12_problem01_river_bed_evolution.py      # 题1：河床演变计算
├── ch12_problem04_meandering_river.py         # 题4：弯曲河道水流分析
├── ch12_problem07_river_regime.py             # 题7：河相关系分析
├── ch12_problem10_sediment_transport.py       # 题10：泥沙输移计算
├── ch12_problem13_comprehensive.py            # 题13：河流综合治理方案
└── README.md
```

## 核心内容

### 1. 河床演变计算（题1）

**问题描述：**
某河段长度L = 10km，河道平均宽度B = 200m，上游来水流量Q = 1000 m³/s，含沙量S₀ = 5 kg/m³，河床泥沙中值粒径d₅₀ = 0.25mm，河床坡度i = 0.0002。

**核心公式：**
```
1. 挟沙能力：S* = K·V^m·h^n
2. 冲淤量：ΔV = (S₀-S*)·Q·T/γₛ
3. 床面剪切力：τ₀ = γ·R·i
4. 输沙率：Qs = S·Q
```

**主要功能：**
- 水流参数计算（水深、流速、Fr数）
- 床面剪切力与泥沙起动
- 挟沙能力计算（张瑞瑾公式）
- 冲淤量与冲淤厚度
- 河床演变时间序列
- 河床形态分类

**可视化输出：**
- 河道纵剖面
- 水流与泥沙参数
- 冲淤量时间序列
- 河床演变过程
- 挟沙能力-流速关系
- 冲淤平衡分析

---

### 2. 弯曲河道水流分析（题4）

**问题描述：**
某弯曲河道，弯曲半径R = 500m，河道宽度B = 100m，流量Q = 500 m³/s，平均水深h = 5m，弯道中心角θ = 90°，河床坡度i = 0.0001。

**核心公式：**
```
1. 横向水面比降：J_s = v²/(g·R)
2. 环流强度：Γ = K·v²/R
3. 弯曲度：P = L_c/L_v
4. 冲刷深度：h_max = h·(1+α·P)
```

**主要功能：**
- 弯道几何参数
- 横向水面比降计算
- 横向水位差
- 弯道环流强度
- 弯曲度计算
- 凹岸冲刷与凸岸淤积
- 离心力分析

**可视化输出：**
- 弯道平面布置图
- 横断面水面线
- 横向水面比降
- 环流示意图
- 冲淤分布
- 弯曲半径影响
- 离心力分析

---

### 3. 河相关系分析（题7）

**问题描述：**
某河段统计数据：多年平均流量Q = 800 m³/s，河道宽度B = 150m，平均水深h = 6m，河床坡度i = 0.0003，河床泥沙d₅₀ = 0.3mm。

**核心公式：**
```
1. 河宽关系：B = K_B·Q^b
2. 水深关系：h = K_h·Q^f
3. 流速关系：v = K_v·Q^m
4. 约束条件：b + f + m = 1
```

**主要功能：**
- 河相系数确定（冲积平原）
- B-Q、h-Q、v-Q关系
- 河相关系验证（相对误差）
- 河道稳定性指标
- 水力几何形态
- 对数坐标拟合

**可视化输出：**
- 河道断面
- 河相系数表
- B-Q、h-Q、v-Q关系曲线
- 对数坐标验证
- 不同流量下断面形态
- 稳定性评价

---

### 4. 泥沙输移计算（题10）

**问题描述：**
某河段流量Q = 1000 m³/s，河宽B = 200m，水深h = 5m，河床坡度i = 0.0002，河床泥沙d₅₀ = 0.2mm，上游含沙量S₀ = 3 kg/m³。

**核心公式：**
```
1. 起动流速：v_c = K·√[(γ_s-γ_w)/γ_w·g·d]
2. 推移质：Q_b = K_b·(τ-τ_c)^1.5
3. 悬移质：Q_s = α·S·Q
4. 总输沙率：Q_t = Q_b + Q_s
```

**主要功能：**
- 泥沙起动判别
- Shields参数计算
- 推移质输沙率（Einstein-Brown公式）
- 悬移质输沙率
- 总输沙率与组成
- 沉降速度
- 悬浮判别（Rouse数）

**可视化输出：**
- 泥沙运动示意图
- 输沙率组成饼图
- 流量-输沙率关系
- Shields判别图
- 悬浮判别
- 粒径影响分析
- 输沙平衡

---

### 5. 河流综合治理方案（题13）

**问题描述：**
某河段治理工程，河道长度L = 5km，多年平均流量Q = 1000 m³/s，设计洪峰Qp = 3000 m³/s，河道宽度B = 150m，河床坡度i = 0.0003。

**核心内容：**
```
1. 河道断面设计
2. 防洪能力评估
3. 生态护岸设计
4. 泥沙综合治理
5. 综合效益分析
```

**主要功能：**
- 梯形断面设计（河相关系+曼宁公式）
- 防洪标准与安全系数
- 生态护岸类型选择
- 护岸工程量统计
- 泥沙治理措施
- 综合效益评估（防洪、生态、航运、景观）
- 投资估算与效益费用比

**可视化输出：**
- 河道断面设计图
- 防洪能力对比
- 生态护岸布置
- 综合效益饼图
- 投资构成
- 泥沙治理方案
- 效益-费用分析
- 综合评价表

---

## 考试要点

### 1. 河床演变

**核心概念：**
- **冲淤平衡**：S = S*（挟沙能力）
- **冲刷**：S < S*（输沙不足）
- **淤积**：S > S*（输沙过剩）

**关键公式：**
- 挟沙能力：S* = K·V^m（张瑞瑾公式）
- 冲淤量：ΔV = (S₀-S*)·Q·T/γₛ
- 床面剪切力：τ₀ = γ·R·i

**判别标准：**
- τ₀ > τc：泥沙起动
- Fr < 0.3：平坦床面
- 0.3 < Fr < 0.8：沙波、沙垄

### 2. 弯道水流

**核心概念：**
- **横向水面比降**：离心力作用
- **弯道环流**：螺旋流动
- **凹岸冲刷**：主流顶冲
- **凸岸淤积**：流速减小

**关键公式：**
- 横向比降：J_s = v²/(g·R)
- 环流强度：Γ = K·v²/R
- 弯曲度：P = L_c/L_v

**冲淤规律：**
- 凹岸：h_max = h·(1+α·P)
- 凸岸：h_min = h·(1-β·P)

### 3. 河相关系

**核心概念：**
- **河相系数**：经验统计关系
- **幂函数形式**：B = K·Q^b
- **连续性约束**：b + f + m = 1

**典型系数（冲积平原）：**
```
B = 4.7·Q^0.5
h = 0.56·Q^0.36
v = 0.38·Q^0.14
```

**稳定性指标：**
- SI = (B·h)/(Q·√i)
- SI > 1.5：稳定
- SI > 1.0：基本稳定

### 4. 泥沙输移

**核心概念：**
- **推移质**：沿河床滚动、跳跃
- **悬移质**：悬浮于水体
- **起动条件**：τ₀ > τc 或 v > vc

**关键公式：**
- Shields参数：θ = τ/(γₛ-γw)·d
- 推移质：Q_b ∝ (τ-τc)^1.5
- 悬浮判别：Z = ω/(κ·u*)

**判别标准：**
- θ > 0.05：泥沙起动
- Z < 1：易悬浮
- Z ≥ 1：不易悬浮

### 5. 河流治理

**设计原则：**
1. **防洪安全**：K ≥ 1.2
2. **生态优先**：缓坡护岸
3. **经济合理**：B/C > 1.0
4. **综合治理**：水土保持

**护岸类型：**
- 硬质护岸：混凝土、石砌
- 软质护岸：植草、土工材料
- 生态护岸：植被+工程

---

## 使用方法

### 1. 单独运行某个程序：
```bash
python3 ch12_problem01_river_bed_evolution.py
python3 ch12_problem04_meandering_river.py
python3 ch12_problem07_river_regime.py
python3 ch12_problem10_sediment_transport.py
python3 ch12_problem13_comprehensive.py
```

### 2. 修改参数进行计算：
在每个程序的 `main()` 函数中修改参数值，例如：
```python
def main():
    # 河床演变参数
    L = 10      # 河段长度 km
    B = 200     # 河道宽度 m
    Q = 1000    # 流量 m³/s
    S0 = 5      # 含沙量 kg/m³
    # ...
```

### 3. 查看可视化结果：
程序会生成9宫格图表，保存在 `/tmp/` 目录下，并显示在屏幕上。

---

## 输出内容

每个程序输出包括：
1. **文本输出**：详细的计算步骤、中间结果和最终结果
2. **图形输出**：9宫格综合分析图，包括：
   - 示意图与断面图
   - 参数分布曲线
   - 关系曲线
   - 对比分析
   - 结果汇总表

---

## 代码统计

| 文件 | 行数 | 功能 | 图表数 |
|-----|------|------|--------|
| ch12_problem01_river_bed_evolution.py | ~570 | 河床演变 | 9 |
| ch12_problem04_meandering_river.py | ~550 | 弯曲河道 | 9 |
| ch12_problem07_river_regime.py | ~540 | 河相关系 | 9 |
| ch12_problem10_sediment_transport.py | ~600 | 泥沙输移 | 9 |
| ch12_problem13_comprehensive.py | ~630 | 综合治理 | 9 |
| **总计** | **~2,890** | **5个程序** | **45** |

---

## 技术特点

### 1. 面向对象设计
- 每个问题封装为一个类
- 清晰的方法划分
- 易于扩展和维护

### 2. 完整的河流动力学计算
- 水流参数
- 泥沙运动
- 河床演变
- 弯道水流
- 综合治理

### 3. 丰富的可视化
- 纵剖面图
- 横断面图
- 平面布置图
- 关系曲线图
- 对比分析图
- 综合评价表

### 4. 详细的注释
- 公式说明
- 参数解释
- 计算步骤
- 考试要点

---

## 工程应用

### 1. 河道治理
- 河床演变预测
- 冲淤量计算
- 防洪能力评估

### 2. 航道整治
- 弯道水流分析
- 航道尺度设计
- 护岸工程

### 3. 泥沙管理
- 水库淤积
- 河口演变
- 输沙平衡

### 4. 生态修复
- 生态护岸
- 河流连通
- 综合治理

---

## 知识拓展

### 1. 河流动力学理论
- 泥沙起动理论
- 挟沙能力理论
- 河床演变理论
- 弯道环流理论

### 2. 设计规范
- 《河道整治设计规范》GB 50707
- 《防洪标准》GB 50201
- 《堤防工程设计规范》GB 50286

### 3. 工程实例
- 黄河小浪底水库
- 长江中下游河道整治
- 珠江三角洲治理

---

## 参考资料

1. 韩其为《泥沙运动统计理论》
2. 窦国仁《泥沙运动力学》
3. 钱宁、万兆惠《泥沙运动力学》
4. 谢鉴衡《河床演变及整治》

---

## 注意事项

1. 所有公式均基于经典理论和规范
2. 计算结果仅供参考，实际工程需详细勘测设计
3. 河相系数因地区而异，需根据当地资料率定
4. 单位制：长度(m)、流量(m³/s)、含沙量(kg/m³)

---

## 版本信息

- **版本**：v1.0
- **日期**：2025-11-07
- **作者**：CHS-Books Team
- **Python版本**：3.8+
- **依赖库**：numpy, matplotlib, scipy

---

**项目状态：✅ 100% 完成**
- 5个核心程序
- 45个可视化图表
- ~2,890行代码
- 完整的考点覆盖
